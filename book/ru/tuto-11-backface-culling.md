# Выбраковка

Прежде чем идти дальше, нужно еще кое-что знать о 3D-рендеринге.

После того, как ваш вершинный шейдер выведет координаты вершины на экран, каждый треугольник может находиться в двух возможных ситуациях:

 - Три вершины расположены на экране по часовой стрелке.
 - Три вершины расположены на экране против часовой стрелки.

Если вы когда-нибудь повернёте треугольник, чтобы увидеть его спину, он окажется в другой категории.

Поэтому вы можете связать лицо треугольника, который вы видите, с порядком на экране.
Например, если треугольник находится по часовой стрелке, то вы видите лицо A, а если треугольник против часовой стрелки, то вы видите лицо B.

Когда вы рисуете 3D-модели, есть грани, которые вам не нужно рисовать: грани, которые находятся внутри модели. Модели обычно видны снаружи, так что это не проблема, если внутри не существует поверхности.

Если вы убедитесь, что все треугольники вашей модели расположены против часовой стрелки, когда внешняя сторона обращена к камере (как в случае с чайником, использованным в этих уроках), вы можете попросить видеокарту автоматически отбросить все треугольники, которые по часовой стрелке. Эта техника называется *выбраковкой задней поверхности*. Ваше программное обеспечение для 3D-моделирования обычно гарантирует применение этого соглашения.

В большинстве случаев это просто оптимизация. Отбрасывая половину треугольников после выполнения вершинного шейдера, вы уменьшаете вдвое количество вызовов фрагментного шейдера. Это может привести к довольно хорошему ускорению.

## Выбраковка в glium

Использование отбраковки задней поверхности в glium состоит просто в изменении переменной в `DrawParameters`, которую вы передаете в функцию `draw`.

Просто замените:

```rust
let params = glium::DrawParameters {
    depth: glium::Depth {
        test: glium::DepthTest::IfLess,
        write: true,
        .. Default::default()
    },
    .. Default::default()
};
```

На:

```rust
let params = glium::DrawParameters {
    depth: glium::Depth {
        test: glium::DepthTest::IfLess,
        write: true,
        .. Default::default()
    },
    backface_culling: glium::draw_parameters::BackfaceCullingMode::CullClockwise,
    .. Default::default()
};
```

Однако мы не собираемся включать это для чайника, потому что модель не закрыта. Вы можете смотреть сквозь отверстия и не видеть ничего внутри. 3D модели обычно полностью закрыты, но не наш чайник.
