<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Opening a window | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./tuto-02-triangle.html" />
    
    
    <link rel="prev" href="./index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="1.1"
        data-chapter-title="Opening a window"
        data-filepath="tuto-01-getting-started.md"
        data-basepath="."
        data-revision="Tue Jan 16 2018 16:47:08 GMT-0800 (PST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Tutorial</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1" data-path="tuto-01-getting-started.html">
            
                
                    <a href="./tuto-01-getting-started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Opening a window
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="tuto-02-triangle.html">
            
                
                    <a href="./tuto-02-triangle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Drawing a triangle
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="tuto-03-animated-triangle.html">
            
                
                    <a href="./tuto-03-animated-triangle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Uniforms
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="tuto-04-matrices.html">
            
                
                    <a href="./tuto-04-matrices.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Matrices
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="tuto-05-colors.html">
            
                
                    <a href="./tuto-05-colors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Adding colors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="tuto-06-texture.html">
            
                
                    <a href="./tuto-06-texture.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Adding a texture
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="tuto-07-shape.html">
            
                
                    <a href="./tuto-07-shape.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        A more complex shape
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="tuto-08-gouraud.html">
            
                
                    <a href="./tuto-08-gouraud.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Gouraud shading
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="tuto-09-depth.html">
            
                
                    <a href="./tuto-09-depth.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        Depth testing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="tuto-10-perspective.html">
            
                
                    <a href="./tuto-10-perspective.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.10.</b>
                        
                        Adjusting the perspective
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="tuto-11-backface-culling.html">
            
                
                    <a href="./tuto-11-backface-culling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.11.</b>
                        
                        Backface culling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="tuto-12-camera.html">
            
                
                    <a href="./tuto-12-camera.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.</b>
                        
                        The camera and summary of the vertex processing stages
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="tuto-13-phong.html">
            
                
                    <a href="./tuto-13-phong.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.13.</b>
                        
                        Blinn-phong shading
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="tuto-14-wall.html">
            
                
                    <a href="./tuto-14-wall.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.14.</b>
                        
                        Normal mapping
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.15" >
            
            <span><b>1.15.</b> Parallax mapping</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.16" >
            
            <span><b>1.16.</b> Deferred shading</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.17" >
            
            <span><b>1.17.</b> Shadow mapping</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.18" >
            
            <span><b>1.18.</b> Antialiasing</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.19" >
            
            <span><b>1.19.</b> Drawing lots of objects with instancing</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="perf-intro.html">
            
                
                    <a href="./perf-intro.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Performances
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="perf-sync.html">
            
                
                    <a href="./perf-sync.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Synchronization
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="creating-a-project">Creating a project</h1>
<p>To start this tutorial, we will create a new project from scratch. Even though it&apos;s highly recommended to be familiar with Rust and Cargo before starting, some little reminders are always good. Let&apos;s start by running:</p>
<pre><code class="lang-sh">cargo new --bin my_project
<span class="hljs-built_in">cd</span> my_project
</code></pre>
<p>The directory you have just created should contain a <code>Cargo.toml</code> file which contains our project&apos;s metadata, plus a <code>src/main.rs</code> file which contains the Rust source code. If you have <code>src/lib.rs</code> file instead, that means that you forgot the <code>--bin</code> flag ; just rename the file.</p>
<p>In order to use the glium library, we need to add them as dependencies in our <code>Cargo.toml</code> file:</p>
<pre><code class="lang-toml"><span class="hljs-title">[dependencies]</span>
<span class="hljs-setting">glium = <span class="hljs-value"><span class="hljs-string">&quot;*&quot;</span></span></span>
</code></pre>
<p>Before we can use them, we also need to import this library in our <code>src/main.rs</code> file, like this:</p>
<pre><code class="lang-rust"><span class="hljs-preprocessor">#[macro_use]</span>
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> glium;

<span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
}
</code></pre>
<p>It is now time to start filling the <code>main</code> function!</p>
<h1 id="creating-a-window">Creating a window</h1>
<p>The first step when creating a graphical application is to create a window. If you have ever worked with OpenGL before, you know how hard it is to do this correctly. Both window creation and context creation are platform-specific, and they are sometimes weird and tedious. Fortunately, this is where the <strong>glutin</strong> library shines.</p>
<p>Initializing an OpenGL window with glutin can be done using the following steps:</p>
<ol>
<li>Creating an <code>EventsLoop</code> for handling window and device events.</li>
<li>Specify Window parameters using <code>glium::glutin::WindowBuilder::new()</code>. These
are window-specific attributes that have nothing to do with OpenGL.</li>
<li>Specify Context parameters using <code>glium::glutin::ContextBuilder::new()</code>.
Here we specify OpenGL-specific attributes like multisampling or vsync.</li>
<li>Create the OpenGL window (in glium, this is the <code>Display</code>):
<code>glium::Display::new(window, context, &amp;events_loop).unwrap()</code>.
This builds a Display using the given window and context attributes, and
registers the window with the given events_loop.</li>
</ol>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">use</span> glium::glutin;

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> events_loop = glutin::EventsLoop::new();
    <span class="hljs-keyword">let</span> window = glutin::WindowBuilder::new();
    <span class="hljs-keyword">let</span> context = glutin::ContextBuilder::new();
    <span class="hljs-keyword">let</span> display = glium::Display::new(window, context, &amp;events_loop).unwrap();
}
</code></pre>
<p>But there is a problem: as soon as the window has been created, our main function exits and <code>display</code>&apos;s destructor closes the window. To prevent this, we need to loop forever until we detect that a <code>Closed</code> event has been received:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> closed = <span class="hljs-keyword">false</span>;
<span class="hljs-keyword">while</span> !closed {
    <span class="hljs-comment">// listing the events produced by application and waiting to be received</span>
    events_loop.poll_events(|ev| {
        <span class="hljs-keyword">match</span> ev {
            glutin::Event::WindowEvent { event, .. } =&gt; <span class="hljs-keyword">match</span> event {
                glutin::WindowEvent::Closed =&gt; closed = <span class="hljs-keyword">true</span>,
                _ =&gt; (),
            },
            _ =&gt; (),
        }
    });
}
</code></pre>
<p>Right now this code will consume 100% of our CPU, but that will do for now. In a real application you should either use vertical synchronization or sleep for a few milliseconds at the end of the loop, but that is a more advanced topic.</p>
<p>You can now execute <code>cargo run</code>. After a few minutes during which Cargo downloads and compiles glium and its dependencies, you should see a nice little window.</p>
<h3 id="clearing-the-color">Clearing the color</h3>
<p>The content of the window, however, is not not very appealing. Depending on your system, it can appear black, show a random image, or just some snow. We are expected to draw on the window, so the system doesn&apos;t bother initializing its color to a specific value.</p>
<p>Glium and the OpenGL API work similarly to drawing software like Windows&apos; Paint or The GIMP. We start with an empty image, then draw an object on it, then another object, then another object, etc. until we are satisfied with the result. But contrary to drawing software, you don&apos;t want your users to see the intermediate steps. Only the final result should be shown.</p>
<p>To handle this, OpenGL uses what is called <em>double buffering</em>. Instead of drawing directly to the window, we are drawing to an image stored in memory. Once we have finished drawing, this image is copied to the window.
This is represented in glium by the <code>Frame</code> object. When you want to start drawing something on your window, you must first call <code>display.draw()</code> in order to produce a <code>Frame</code>:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> target = display.draw();
</code></pre>
<p>We can then use this <code>target</code> as a drawing surface. One of the operations that OpenGL and glium provide is filling the surface with a given color. This is what we are going to do.</p>
<pre><code class="lang-rust">target.clear_color(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);
</code></pre>
<p>Note that to use this function, we will need to import the <code>Surface</code> trait first:</p>
<pre><code class="lang-rust"><span class="hljs-keyword">use</span> glium::Surface;
</code></pre>
<p>The four values that we pass to <code>clear_color</code> represent the four components of our color: red, green, blue and alpha. Only values between <code>0.0</code> and <code>1.0</code> are valid. Here we are drawing an opaque blue color.</p>
<p>Like I explained above, the user doesn&apos;t immediately see the blue color on the screen. At this point if we were in a real application, we would most likely draw our characters, their weapons, the ground, the sky, etc. But in this tutorial we will just stop here:</p>
<pre><code class="lang-rust">target.finish().unwrap();
</code></pre>
<p>This call to <code>finish()</code> means that we have finished drawing. It destroys the <code>Frame</code> object and copies our background image to the window. Our window is now filled with blue.</p>
<p>Here is our full <code>main</code> function after this step:</p>
<pre><code class="lang-rust"><span class="hljs-function"><span class="hljs-keyword">fn</span> <span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">use</span> glium::{glutin, Surface};

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> events_loop = glium::glutin::EventsLoop::new();
    <span class="hljs-keyword">let</span> window = glium::glutin::WindowBuilder::new();
    <span class="hljs-keyword">let</span> context = glium::glutin::ContextBuilder::new();
    <span class="hljs-keyword">let</span> display = glium::Display::new(window, context, &amp;events_loop).unwrap();

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> closed = <span class="hljs-keyword">false</span>;
    <span class="hljs-keyword">while</span> !closed {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut</span> target = display.draw();
        target.clear_color(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);
        target.finish().unwrap();

        events_loop.poll_events(|ev| {
            <span class="hljs-keyword">match</span> ev {
                glutin::Event::WindowEvent { event, .. } =&gt; <span class="hljs-keyword">match</span> event {
                    glutin::WindowEvent::Closed =&gt; closed = <span class="hljs-keyword">true</span>,
                    _ =&gt; (),
                },
                _ =&gt; (),
            }
        });
    }
}
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./index.html" class="navigation navigation-prev " aria-label="Previous page: Introduction"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./tuto-02-triangle.html" class="navigation navigation-next " aria-label="Next page: Drawing a triangle"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
