<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `zwp_linux_dmabuf_v1` mod in crate `wayland_protocols`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, zwp_linux_dmabuf_v1">

    <title>wayland_protocols::unstable::linux_dmabuf::v1::client::zwp_linux_dmabuf_v1 - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../main.css">
    

    
    
</head>
<body class="rustdoc mod">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Module zwp_linux_dmabuf_v1</p><div class="block items"><ul><li><a href="#structs">Structs</a></li></ul></div><p class='location'><a href='../../../../../index.html'>wayland_protocols</a>::<wbr><a href='../../../../index.html'>unstable</a>::<wbr><a href='../../../index.html'>linux_dmabuf</a>::<wbr><a href='../../index.html'>v1</a>::<wbr><a href='../index.html'>client</a></p><script>window.sidebarCurrent = {name: 'zwp_linux_dmabuf_v1', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Module <a href='../../../../../index.html'>wayland_protocols</a>::<wbr><a href='../../../../index.html'>unstable</a>::<wbr><a href='../../../index.html'>linux_dmabuf</a>::<wbr><a href='../../index.html'>v1</a>::<wbr><a href='../index.html'>client</a>::<wbr><a class="mod" href=''>zwp_linux_dmabuf_v1</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../../../../../src/wayland_protocols/home/daboross/Projects/CheckedOut/glium/target/debug/build/wayland-protocols-3a519757c9d6d391/out/linux-dmabuf-v1_client_api.rs.html#28-296' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>factory for creating dmabuf-based wl_buffers</p>

<p>Following the interfaces from:
<a href="https://www.khronos.org/registry/egl/extensions/EXT/EGL_EXT_image_dma_buf_import.txt">https://www.khronos.org/registry/egl/extensions/EXT/EGL_EXT_image_dma_buf_import.txt</a>
and the Linux DRM sub-system&#39;s AddFb2 ioctl.</p>

<p>This interface offers ways to create generic dmabuf-based
wl_buffers. Immediately after a client binds to this interface,
the set of supported formats and format modifiers is sent with
&#39;format&#39; and &#39;modifier&#39; events.</p>

<p>The following are required from clients:</p>

<ul>
<li><p>Clients must ensure that either all data in the dma-buf is
coherent for all subsequent read access or that coherency is
correctly handled by the underlying kernel-side dma-buf
implementation.</p></li>
<li><p>Don&#39;t make any more attachments after sending the buffer to the
compositor. Making more attachments later increases the risk of
the compositor not being able to use (re-import) an existing
dmabuf-based wl_buffer.</p></li>
</ul>

<p>The underlying graphics stack must ensure the following:</p>

<ul>
<li>The dmabuf file descriptors relayed to the server will stay valid
for the whole lifetime of the wl_buffer. This means the server may
at any time use those fds to import the dmabuf into any kernel
sub-system that might accept it.</li>
</ul>

<p>To create a wl_buffer from one or more dmabufs, a client creates a
zwp_linux_dmabuf_params_v1 object with a zwp_linux_dmabuf_v1.create_params
request. All planes required by the intended format are added with
the &#39;add&#39; request. Finally, a &#39;create&#39; or &#39;create_immed&#39; request is
issued, which has the following outcome depending on the import success.</p>

<p>The &#39;create&#39; request,
- on success, triggers a &#39;created&#39; event which provides the final
wl_buffer to the client.
- on failure, triggers a &#39;failed&#39; event to convey that the server
cannot use the dmabufs received from the client.</p>

<p>For the &#39;create_immed&#39; request,
- on success, the server immediately imports the added dmabufs to
create a wl_buffer. No event is sent from the server in this case.
- on failure, the server can choose to either:
- terminate the client by raising a fatal error.
- mark the wl_buffer as failed, and send a &#39;failed&#39; event to the
client. If the client uses a failed wl_buffer as an argument to any
request, the behaviour is compositor implementation-defined.</p>

<p>Warning! The protocol described in this file is experimental and
backward incompatible changes may be made. Backward compatible changes
may be added together with the corresponding interface version bump.
Backward incompatible changes are done by bumping the version number in
the protocol and interface names and resetting the interface version.
Once the protocol is to be declared stable, the &#39;z&#39; prefix and the
version number in the protocol and interface names are removed and the
interface version number is reset.</p>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.Implementation.html"
                                  title='struct wayland_protocols::unstable::linux_dmabuf::v1::client::zwp_linux_dmabuf_v1::Implementation'>Implementation</a></td>
                           <td class='docblock-short'>
                                
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class="struct" href="struct.ZwpLinuxDmabufV1.html"
                                  title='struct wayland_protocols::unstable::linux_dmabuf::v1::client::zwp_linux_dmabuf_v1::ZwpLinuxDmabufV1'>ZwpLinuxDmabufV1</a></td>
                           <td class='docblock-short'>
                                
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../../../../";
        window.currentCrate = "wayland_protocols";
    </script>
    <script src="../../../../../../main.js"></script>
    <script defer src="../../../../../../search-index.js"></script>
</body>
</html>