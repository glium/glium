<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="Source to the Rust file `/home/daboross/Projects/CheckedOut/glium/target/debug/build/wayland-client-d3dc919fa9fca936/out/wayland_api.rs`.">
    <meta name="keywords" content="rust, rustlang, rust-lang">

    <title>wayland_api.rs.html -- source</title>

    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../main.css">
    

    
    
</head>
<body class="rustdoc source">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content"><pre class="line-numbers"><span id="1">   1</span>
<span id="2">   2</span>
<span id="3">   3</span>
<span id="4">   4</span>
<span id="5">   5</span>
<span id="6">   6</span>
<span id="7">   7</span>
<span id="8">   8</span>
<span id="9">   9</span>
<span id="10">  10</span>
<span id="11">  11</span>
<span id="12">  12</span>
<span id="13">  13</span>
<span id="14">  14</span>
<span id="15">  15</span>
<span id="16">  16</span>
<span id="17">  17</span>
<span id="18">  18</span>
<span id="19">  19</span>
<span id="20">  20</span>
<span id="21">  21</span>
<span id="22">  22</span>
<span id="23">  23</span>
<span id="24">  24</span>
<span id="25">  25</span>
<span id="26">  26</span>
<span id="27">  27</span>
<span id="28">  28</span>
<span id="29">  29</span>
<span id="30">  30</span>
<span id="31">  31</span>
<span id="32">  32</span>
<span id="33">  33</span>
<span id="34">  34</span>
<span id="35">  35</span>
<span id="36">  36</span>
<span id="37">  37</span>
<span id="38">  38</span>
<span id="39">  39</span>
<span id="40">  40</span>
<span id="41">  41</span>
<span id="42">  42</span>
<span id="43">  43</span>
<span id="44">  44</span>
<span id="45">  45</span>
<span id="46">  46</span>
<span id="47">  47</span>
<span id="48">  48</span>
<span id="49">  49</span>
<span id="50">  50</span>
<span id="51">  51</span>
<span id="52">  52</span>
<span id="53">  53</span>
<span id="54">  54</span>
<span id="55">  55</span>
<span id="56">  56</span>
<span id="57">  57</span>
<span id="58">  58</span>
<span id="59">  59</span>
<span id="60">  60</span>
<span id="61">  61</span>
<span id="62">  62</span>
<span id="63">  63</span>
<span id="64">  64</span>
<span id="65">  65</span>
<span id="66">  66</span>
<span id="67">  67</span>
<span id="68">  68</span>
<span id="69">  69</span>
<span id="70">  70</span>
<span id="71">  71</span>
<span id="72">  72</span>
<span id="73">  73</span>
<span id="74">  74</span>
<span id="75">  75</span>
<span id="76">  76</span>
<span id="77">  77</span>
<span id="78">  78</span>
<span id="79">  79</span>
<span id="80">  80</span>
<span id="81">  81</span>
<span id="82">  82</span>
<span id="83">  83</span>
<span id="84">  84</span>
<span id="85">  85</span>
<span id="86">  86</span>
<span id="87">  87</span>
<span id="88">  88</span>
<span id="89">  89</span>
<span id="90">  90</span>
<span id="91">  91</span>
<span id="92">  92</span>
<span id="93">  93</span>
<span id="94">  94</span>
<span id="95">  95</span>
<span id="96">  96</span>
<span id="97">  97</span>
<span id="98">  98</span>
<span id="99">  99</span>
<span id="100"> 100</span>
<span id="101"> 101</span>
<span id="102"> 102</span>
<span id="103"> 103</span>
<span id="104"> 104</span>
<span id="105"> 105</span>
<span id="106"> 106</span>
<span id="107"> 107</span>
<span id="108"> 108</span>
<span id="109"> 109</span>
<span id="110"> 110</span>
<span id="111"> 111</span>
<span id="112"> 112</span>
<span id="113"> 113</span>
<span id="114"> 114</span>
<span id="115"> 115</span>
<span id="116"> 116</span>
<span id="117"> 117</span>
<span id="118"> 118</span>
<span id="119"> 119</span>
<span id="120"> 120</span>
<span id="121"> 121</span>
<span id="122"> 122</span>
<span id="123"> 123</span>
<span id="124"> 124</span>
<span id="125"> 125</span>
<span id="126"> 126</span>
<span id="127"> 127</span>
<span id="128"> 128</span>
<span id="129"> 129</span>
<span id="130"> 130</span>
<span id="131"> 131</span>
<span id="132"> 132</span>
<span id="133"> 133</span>
<span id="134"> 134</span>
<span id="135"> 135</span>
<span id="136"> 136</span>
<span id="137"> 137</span>
<span id="138"> 138</span>
<span id="139"> 139</span>
<span id="140"> 140</span>
<span id="141"> 141</span>
<span id="142"> 142</span>
<span id="143"> 143</span>
<span id="144"> 144</span>
<span id="145"> 145</span>
<span id="146"> 146</span>
<span id="147"> 147</span>
<span id="148"> 148</span>
<span id="149"> 149</span>
<span id="150"> 150</span>
<span id="151"> 151</span>
<span id="152"> 152</span>
<span id="153"> 153</span>
<span id="154"> 154</span>
<span id="155"> 155</span>
<span id="156"> 156</span>
<span id="157"> 157</span>
<span id="158"> 158</span>
<span id="159"> 159</span>
<span id="160"> 160</span>
<span id="161"> 161</span>
<span id="162"> 162</span>
<span id="163"> 163</span>
<span id="164"> 164</span>
<span id="165"> 165</span>
<span id="166"> 166</span>
<span id="167"> 167</span>
<span id="168"> 168</span>
<span id="169"> 169</span>
<span id="170"> 170</span>
<span id="171"> 171</span>
<span id="172"> 172</span>
<span id="173"> 173</span>
<span id="174"> 174</span>
<span id="175"> 175</span>
<span id="176"> 176</span>
<span id="177"> 177</span>
<span id="178"> 178</span>
<span id="179"> 179</span>
<span id="180"> 180</span>
<span id="181"> 181</span>
<span id="182"> 182</span>
<span id="183"> 183</span>
<span id="184"> 184</span>
<span id="185"> 185</span>
<span id="186"> 186</span>
<span id="187"> 187</span>
<span id="188"> 188</span>
<span id="189"> 189</span>
<span id="190"> 190</span>
<span id="191"> 191</span>
<span id="192"> 192</span>
<span id="193"> 193</span>
<span id="194"> 194</span>
<span id="195"> 195</span>
<span id="196"> 196</span>
<span id="197"> 197</span>
<span id="198"> 198</span>
<span id="199"> 199</span>
<span id="200"> 200</span>
<span id="201"> 201</span>
<span id="202"> 202</span>
<span id="203"> 203</span>
<span id="204"> 204</span>
<span id="205"> 205</span>
<span id="206"> 206</span>
<span id="207"> 207</span>
<span id="208"> 208</span>
<span id="209"> 209</span>
<span id="210"> 210</span>
<span id="211"> 211</span>
<span id="212"> 212</span>
<span id="213"> 213</span>
<span id="214"> 214</span>
<span id="215"> 215</span>
<span id="216"> 216</span>
<span id="217"> 217</span>
<span id="218"> 218</span>
<span id="219"> 219</span>
<span id="220"> 220</span>
<span id="221"> 221</span>
<span id="222"> 222</span>
<span id="223"> 223</span>
<span id="224"> 224</span>
<span id="225"> 225</span>
<span id="226"> 226</span>
<span id="227"> 227</span>
<span id="228"> 228</span>
<span id="229"> 229</span>
<span id="230"> 230</span>
<span id="231"> 231</span>
<span id="232"> 232</span>
<span id="233"> 233</span>
<span id="234"> 234</span>
<span id="235"> 235</span>
<span id="236"> 236</span>
<span id="237"> 237</span>
<span id="238"> 238</span>
<span id="239"> 239</span>
<span id="240"> 240</span>
<span id="241"> 241</span>
<span id="242"> 242</span>
<span id="243"> 243</span>
<span id="244"> 244</span>
<span id="245"> 245</span>
<span id="246"> 246</span>
<span id="247"> 247</span>
<span id="248"> 248</span>
<span id="249"> 249</span>
<span id="250"> 250</span>
<span id="251"> 251</span>
<span id="252"> 252</span>
<span id="253"> 253</span>
<span id="254"> 254</span>
<span id="255"> 255</span>
<span id="256"> 256</span>
<span id="257"> 257</span>
<span id="258"> 258</span>
<span id="259"> 259</span>
<span id="260"> 260</span>
<span id="261"> 261</span>
<span id="262"> 262</span>
<span id="263"> 263</span>
<span id="264"> 264</span>
<span id="265"> 265</span>
<span id="266"> 266</span>
<span id="267"> 267</span>
<span id="268"> 268</span>
<span id="269"> 269</span>
<span id="270"> 270</span>
<span id="271"> 271</span>
<span id="272"> 272</span>
<span id="273"> 273</span>
<span id="274"> 274</span>
<span id="275"> 275</span>
<span id="276"> 276</span>
<span id="277"> 277</span>
<span id="278"> 278</span>
<span id="279"> 279</span>
<span id="280"> 280</span>
<span id="281"> 281</span>
<span id="282"> 282</span>
<span id="283"> 283</span>
<span id="284"> 284</span>
<span id="285"> 285</span>
<span id="286"> 286</span>
<span id="287"> 287</span>
<span id="288"> 288</span>
<span id="289"> 289</span>
<span id="290"> 290</span>
<span id="291"> 291</span>
<span id="292"> 292</span>
<span id="293"> 293</span>
<span id="294"> 294</span>
<span id="295"> 295</span>
<span id="296"> 296</span>
<span id="297"> 297</span>
<span id="298"> 298</span>
<span id="299"> 299</span>
<span id="300"> 300</span>
<span id="301"> 301</span>
<span id="302"> 302</span>
<span id="303"> 303</span>
<span id="304"> 304</span>
<span id="305"> 305</span>
<span id="306"> 306</span>
<span id="307"> 307</span>
<span id="308"> 308</span>
<span id="309"> 309</span>
<span id="310"> 310</span>
<span id="311"> 311</span>
<span id="312"> 312</span>
<span id="313"> 313</span>
<span id="314"> 314</span>
<span id="315"> 315</span>
<span id="316"> 316</span>
<span id="317"> 317</span>
<span id="318"> 318</span>
<span id="319"> 319</span>
<span id="320"> 320</span>
<span id="321"> 321</span>
<span id="322"> 322</span>
<span id="323"> 323</span>
<span id="324"> 324</span>
<span id="325"> 325</span>
<span id="326"> 326</span>
<span id="327"> 327</span>
<span id="328"> 328</span>
<span id="329"> 329</span>
<span id="330"> 330</span>
<span id="331"> 331</span>
<span id="332"> 332</span>
<span id="333"> 333</span>
<span id="334"> 334</span>
<span id="335"> 335</span>
<span id="336"> 336</span>
<span id="337"> 337</span>
<span id="338"> 338</span>
<span id="339"> 339</span>
<span id="340"> 340</span>
<span id="341"> 341</span>
<span id="342"> 342</span>
<span id="343"> 343</span>
<span id="344"> 344</span>
<span id="345"> 345</span>
<span id="346"> 346</span>
<span id="347"> 347</span>
<span id="348"> 348</span>
<span id="349"> 349</span>
<span id="350"> 350</span>
<span id="351"> 351</span>
<span id="352"> 352</span>
<span id="353"> 353</span>
<span id="354"> 354</span>
<span id="355"> 355</span>
<span id="356"> 356</span>
<span id="357"> 357</span>
<span id="358"> 358</span>
<span id="359"> 359</span>
<span id="360"> 360</span>
<span id="361"> 361</span>
<span id="362"> 362</span>
<span id="363"> 363</span>
<span id="364"> 364</span>
<span id="365"> 365</span>
<span id="366"> 366</span>
<span id="367"> 367</span>
<span id="368"> 368</span>
<span id="369"> 369</span>
<span id="370"> 370</span>
<span id="371"> 371</span>
<span id="372"> 372</span>
<span id="373"> 373</span>
<span id="374"> 374</span>
<span id="375"> 375</span>
<span id="376"> 376</span>
<span id="377"> 377</span>
<span id="378"> 378</span>
<span id="379"> 379</span>
<span id="380"> 380</span>
<span id="381"> 381</span>
<span id="382"> 382</span>
<span id="383"> 383</span>
<span id="384"> 384</span>
<span id="385"> 385</span>
<span id="386"> 386</span>
<span id="387"> 387</span>
<span id="388"> 388</span>
<span id="389"> 389</span>
<span id="390"> 390</span>
<span id="391"> 391</span>
<span id="392"> 392</span>
<span id="393"> 393</span>
<span id="394"> 394</span>
<span id="395"> 395</span>
<span id="396"> 396</span>
<span id="397"> 397</span>
<span id="398"> 398</span>
<span id="399"> 399</span>
<span id="400"> 400</span>
<span id="401"> 401</span>
<span id="402"> 402</span>
<span id="403"> 403</span>
<span id="404"> 404</span>
<span id="405"> 405</span>
<span id="406"> 406</span>
<span id="407"> 407</span>
<span id="408"> 408</span>
<span id="409"> 409</span>
<span id="410"> 410</span>
<span id="411"> 411</span>
<span id="412"> 412</span>
<span id="413"> 413</span>
<span id="414"> 414</span>
<span id="415"> 415</span>
<span id="416"> 416</span>
<span id="417"> 417</span>
<span id="418"> 418</span>
<span id="419"> 419</span>
<span id="420"> 420</span>
<span id="421"> 421</span>
<span id="422"> 422</span>
<span id="423"> 423</span>
<span id="424"> 424</span>
<span id="425"> 425</span>
<span id="426"> 426</span>
<span id="427"> 427</span>
<span id="428"> 428</span>
<span id="429"> 429</span>
<span id="430"> 430</span>
<span id="431"> 431</span>
<span id="432"> 432</span>
<span id="433"> 433</span>
<span id="434"> 434</span>
<span id="435"> 435</span>
<span id="436"> 436</span>
<span id="437"> 437</span>
<span id="438"> 438</span>
<span id="439"> 439</span>
<span id="440"> 440</span>
<span id="441"> 441</span>
<span id="442"> 442</span>
<span id="443"> 443</span>
<span id="444"> 444</span>
<span id="445"> 445</span>
<span id="446"> 446</span>
<span id="447"> 447</span>
<span id="448"> 448</span>
<span id="449"> 449</span>
<span id="450"> 450</span>
<span id="451"> 451</span>
<span id="452"> 452</span>
<span id="453"> 453</span>
<span id="454"> 454</span>
<span id="455"> 455</span>
<span id="456"> 456</span>
<span id="457"> 457</span>
<span id="458"> 458</span>
<span id="459"> 459</span>
<span id="460"> 460</span>
<span id="461"> 461</span>
<span id="462"> 462</span>
<span id="463"> 463</span>
<span id="464"> 464</span>
<span id="465"> 465</span>
<span id="466"> 466</span>
<span id="467"> 467</span>
<span id="468"> 468</span>
<span id="469"> 469</span>
<span id="470"> 470</span>
<span id="471"> 471</span>
<span id="472"> 472</span>
<span id="473"> 473</span>
<span id="474"> 474</span>
<span id="475"> 475</span>
<span id="476"> 476</span>
<span id="477"> 477</span>
<span id="478"> 478</span>
<span id="479"> 479</span>
<span id="480"> 480</span>
<span id="481"> 481</span>
<span id="482"> 482</span>
<span id="483"> 483</span>
<span id="484"> 484</span>
<span id="485"> 485</span>
<span id="486"> 486</span>
<span id="487"> 487</span>
<span id="488"> 488</span>
<span id="489"> 489</span>
<span id="490"> 490</span>
<span id="491"> 491</span>
<span id="492"> 492</span>
<span id="493"> 493</span>
<span id="494"> 494</span>
<span id="495"> 495</span>
<span id="496"> 496</span>
<span id="497"> 497</span>
<span id="498"> 498</span>
<span id="499"> 499</span>
<span id="500"> 500</span>
<span id="501"> 501</span>
<span id="502"> 502</span>
<span id="503"> 503</span>
<span id="504"> 504</span>
<span id="505"> 505</span>
<span id="506"> 506</span>
<span id="507"> 507</span>
<span id="508"> 508</span>
<span id="509"> 509</span>
<span id="510"> 510</span>
<span id="511"> 511</span>
<span id="512"> 512</span>
<span id="513"> 513</span>
<span id="514"> 514</span>
<span id="515"> 515</span>
<span id="516"> 516</span>
<span id="517"> 517</span>
<span id="518"> 518</span>
<span id="519"> 519</span>
<span id="520"> 520</span>
<span id="521"> 521</span>
<span id="522"> 522</span>
<span id="523"> 523</span>
<span id="524"> 524</span>
<span id="525"> 525</span>
<span id="526"> 526</span>
<span id="527"> 527</span>
<span id="528"> 528</span>
<span id="529"> 529</span>
<span id="530"> 530</span>
<span id="531"> 531</span>
<span id="532"> 532</span>
<span id="533"> 533</span>
<span id="534"> 534</span>
<span id="535"> 535</span>
<span id="536"> 536</span>
<span id="537"> 537</span>
<span id="538"> 538</span>
<span id="539"> 539</span>
<span id="540"> 540</span>
<span id="541"> 541</span>
<span id="542"> 542</span>
<span id="543"> 543</span>
<span id="544"> 544</span>
<span id="545"> 545</span>
<span id="546"> 546</span>
<span id="547"> 547</span>
<span id="548"> 548</span>
<span id="549"> 549</span>
<span id="550"> 550</span>
<span id="551"> 551</span>
<span id="552"> 552</span>
<span id="553"> 553</span>
<span id="554"> 554</span>
<span id="555"> 555</span>
<span id="556"> 556</span>
<span id="557"> 557</span>
<span id="558"> 558</span>
<span id="559"> 559</span>
<span id="560"> 560</span>
<span id="561"> 561</span>
<span id="562"> 562</span>
<span id="563"> 563</span>
<span id="564"> 564</span>
<span id="565"> 565</span>
<span id="566"> 566</span>
<span id="567"> 567</span>
<span id="568"> 568</span>
<span id="569"> 569</span>
<span id="570"> 570</span>
<span id="571"> 571</span>
<span id="572"> 572</span>
<span id="573"> 573</span>
<span id="574"> 574</span>
<span id="575"> 575</span>
<span id="576"> 576</span>
<span id="577"> 577</span>
<span id="578"> 578</span>
<span id="579"> 579</span>
<span id="580"> 580</span>
<span id="581"> 581</span>
<span id="582"> 582</span>
<span id="583"> 583</span>
<span id="584"> 584</span>
<span id="585"> 585</span>
<span id="586"> 586</span>
<span id="587"> 587</span>
<span id="588"> 588</span>
<span id="589"> 589</span>
<span id="590"> 590</span>
<span id="591"> 591</span>
<span id="592"> 592</span>
<span id="593"> 593</span>
<span id="594"> 594</span>
<span id="595"> 595</span>
<span id="596"> 596</span>
<span id="597"> 597</span>
<span id="598"> 598</span>
<span id="599"> 599</span>
<span id="600"> 600</span>
<span id="601"> 601</span>
<span id="602"> 602</span>
<span id="603"> 603</span>
<span id="604"> 604</span>
<span id="605"> 605</span>
<span id="606"> 606</span>
<span id="607"> 607</span>
<span id="608"> 608</span>
<span id="609"> 609</span>
<span id="610"> 610</span>
<span id="611"> 611</span>
<span id="612"> 612</span>
<span id="613"> 613</span>
<span id="614"> 614</span>
<span id="615"> 615</span>
<span id="616"> 616</span>
<span id="617"> 617</span>
<span id="618"> 618</span>
<span id="619"> 619</span>
<span id="620"> 620</span>
<span id="621"> 621</span>
<span id="622"> 622</span>
<span id="623"> 623</span>
<span id="624"> 624</span>
<span id="625"> 625</span>
<span id="626"> 626</span>
<span id="627"> 627</span>
<span id="628"> 628</span>
<span id="629"> 629</span>
<span id="630"> 630</span>
<span id="631"> 631</span>
<span id="632"> 632</span>
<span id="633"> 633</span>
<span id="634"> 634</span>
<span id="635"> 635</span>
<span id="636"> 636</span>
<span id="637"> 637</span>
<span id="638"> 638</span>
<span id="639"> 639</span>
<span id="640"> 640</span>
<span id="641"> 641</span>
<span id="642"> 642</span>
<span id="643"> 643</span>
<span id="644"> 644</span>
<span id="645"> 645</span>
<span id="646"> 646</span>
<span id="647"> 647</span>
<span id="648"> 648</span>
<span id="649"> 649</span>
<span id="650"> 650</span>
<span id="651"> 651</span>
<span id="652"> 652</span>
<span id="653"> 653</span>
<span id="654"> 654</span>
<span id="655"> 655</span>
<span id="656"> 656</span>
<span id="657"> 657</span>
<span id="658"> 658</span>
<span id="659"> 659</span>
<span id="660"> 660</span>
<span id="661"> 661</span>
<span id="662"> 662</span>
<span id="663"> 663</span>
<span id="664"> 664</span>
<span id="665"> 665</span>
<span id="666"> 666</span>
<span id="667"> 667</span>
<span id="668"> 668</span>
<span id="669"> 669</span>
<span id="670"> 670</span>
<span id="671"> 671</span>
<span id="672"> 672</span>
<span id="673"> 673</span>
<span id="674"> 674</span>
<span id="675"> 675</span>
<span id="676"> 676</span>
<span id="677"> 677</span>
<span id="678"> 678</span>
<span id="679"> 679</span>
<span id="680"> 680</span>
<span id="681"> 681</span>
<span id="682"> 682</span>
<span id="683"> 683</span>
<span id="684"> 684</span>
<span id="685"> 685</span>
<span id="686"> 686</span>
<span id="687"> 687</span>
<span id="688"> 688</span>
<span id="689"> 689</span>
<span id="690"> 690</span>
<span id="691"> 691</span>
<span id="692"> 692</span>
<span id="693"> 693</span>
<span id="694"> 694</span>
<span id="695"> 695</span>
<span id="696"> 696</span>
<span id="697"> 697</span>
<span id="698"> 698</span>
<span id="699"> 699</span>
<span id="700"> 700</span>
<span id="701"> 701</span>
<span id="702"> 702</span>
<span id="703"> 703</span>
<span id="704"> 704</span>
<span id="705"> 705</span>
<span id="706"> 706</span>
<span id="707"> 707</span>
<span id="708"> 708</span>
<span id="709"> 709</span>
<span id="710"> 710</span>
<span id="711"> 711</span>
<span id="712"> 712</span>
<span id="713"> 713</span>
<span id="714"> 714</span>
<span id="715"> 715</span>
<span id="716"> 716</span>
<span id="717"> 717</span>
<span id="718"> 718</span>
<span id="719"> 719</span>
<span id="720"> 720</span>
<span id="721"> 721</span>
<span id="722"> 722</span>
<span id="723"> 723</span>
<span id="724"> 724</span>
<span id="725"> 725</span>
<span id="726"> 726</span>
<span id="727"> 727</span>
<span id="728"> 728</span>
<span id="729"> 729</span>
<span id="730"> 730</span>
<span id="731"> 731</span>
<span id="732"> 732</span>
<span id="733"> 733</span>
<span id="734"> 734</span>
<span id="735"> 735</span>
<span id="736"> 736</span>
<span id="737"> 737</span>
<span id="738"> 738</span>
<span id="739"> 739</span>
<span id="740"> 740</span>
<span id="741"> 741</span>
<span id="742"> 742</span>
<span id="743"> 743</span>
<span id="744"> 744</span>
<span id="745"> 745</span>
<span id="746"> 746</span>
<span id="747"> 747</span>
<span id="748"> 748</span>
<span id="749"> 749</span>
<span id="750"> 750</span>
<span id="751"> 751</span>
<span id="752"> 752</span>
<span id="753"> 753</span>
<span id="754"> 754</span>
<span id="755"> 755</span>
<span id="756"> 756</span>
<span id="757"> 757</span>
<span id="758"> 758</span>
<span id="759"> 759</span>
<span id="760"> 760</span>
<span id="761"> 761</span>
<span id="762"> 762</span>
<span id="763"> 763</span>
<span id="764"> 764</span>
<span id="765"> 765</span>
<span id="766"> 766</span>
<span id="767"> 767</span>
<span id="768"> 768</span>
<span id="769"> 769</span>
<span id="770"> 770</span>
<span id="771"> 771</span>
<span id="772"> 772</span>
<span id="773"> 773</span>
<span id="774"> 774</span>
<span id="775"> 775</span>
<span id="776"> 776</span>
<span id="777"> 777</span>
<span id="778"> 778</span>
<span id="779"> 779</span>
<span id="780"> 780</span>
<span id="781"> 781</span>
<span id="782"> 782</span>
<span id="783"> 783</span>
<span id="784"> 784</span>
<span id="785"> 785</span>
<span id="786"> 786</span>
<span id="787"> 787</span>
<span id="788"> 788</span>
<span id="789"> 789</span>
<span id="790"> 790</span>
<span id="791"> 791</span>
<span id="792"> 792</span>
<span id="793"> 793</span>
<span id="794"> 794</span>
<span id="795"> 795</span>
<span id="796"> 796</span>
<span id="797"> 797</span>
<span id="798"> 798</span>
<span id="799"> 799</span>
<span id="800"> 800</span>
<span id="801"> 801</span>
<span id="802"> 802</span>
<span id="803"> 803</span>
<span id="804"> 804</span>
<span id="805"> 805</span>
<span id="806"> 806</span>
<span id="807"> 807</span>
<span id="808"> 808</span>
<span id="809"> 809</span>
<span id="810"> 810</span>
<span id="811"> 811</span>
<span id="812"> 812</span>
<span id="813"> 813</span>
<span id="814"> 814</span>
<span id="815"> 815</span>
<span id="816"> 816</span>
<span id="817"> 817</span>
<span id="818"> 818</span>
<span id="819"> 819</span>
<span id="820"> 820</span>
<span id="821"> 821</span>
<span id="822"> 822</span>
<span id="823"> 823</span>
<span id="824"> 824</span>
<span id="825"> 825</span>
<span id="826"> 826</span>
<span id="827"> 827</span>
<span id="828"> 828</span>
<span id="829"> 829</span>
<span id="830"> 830</span>
<span id="831"> 831</span>
<span id="832"> 832</span>
<span id="833"> 833</span>
<span id="834"> 834</span>
<span id="835"> 835</span>
<span id="836"> 836</span>
<span id="837"> 837</span>
<span id="838"> 838</span>
<span id="839"> 839</span>
<span id="840"> 840</span>
<span id="841"> 841</span>
<span id="842"> 842</span>
<span id="843"> 843</span>
<span id="844"> 844</span>
<span id="845"> 845</span>
<span id="846"> 846</span>
<span id="847"> 847</span>
<span id="848"> 848</span>
<span id="849"> 849</span>
<span id="850"> 850</span>
<span id="851"> 851</span>
<span id="852"> 852</span>
<span id="853"> 853</span>
<span id="854"> 854</span>
<span id="855"> 855</span>
<span id="856"> 856</span>
<span id="857"> 857</span>
<span id="858"> 858</span>
<span id="859"> 859</span>
<span id="860"> 860</span>
<span id="861"> 861</span>
<span id="862"> 862</span>
<span id="863"> 863</span>
<span id="864"> 864</span>
<span id="865"> 865</span>
<span id="866"> 866</span>
<span id="867"> 867</span>
<span id="868"> 868</span>
<span id="869"> 869</span>
<span id="870"> 870</span>
<span id="871"> 871</span>
<span id="872"> 872</span>
<span id="873"> 873</span>
<span id="874"> 874</span>
<span id="875"> 875</span>
<span id="876"> 876</span>
<span id="877"> 877</span>
<span id="878"> 878</span>
<span id="879"> 879</span>
<span id="880"> 880</span>
<span id="881"> 881</span>
<span id="882"> 882</span>
<span id="883"> 883</span>
<span id="884"> 884</span>
<span id="885"> 885</span>
<span id="886"> 886</span>
<span id="887"> 887</span>
<span id="888"> 888</span>
<span id="889"> 889</span>
<span id="890"> 890</span>
<span id="891"> 891</span>
<span id="892"> 892</span>
<span id="893"> 893</span>
<span id="894"> 894</span>
<span id="895"> 895</span>
<span id="896"> 896</span>
<span id="897"> 897</span>
<span id="898"> 898</span>
<span id="899"> 899</span>
<span id="900"> 900</span>
<span id="901"> 901</span>
<span id="902"> 902</span>
<span id="903"> 903</span>
<span id="904"> 904</span>
<span id="905"> 905</span>
<span id="906"> 906</span>
<span id="907"> 907</span>
<span id="908"> 908</span>
<span id="909"> 909</span>
<span id="910"> 910</span>
<span id="911"> 911</span>
<span id="912"> 912</span>
<span id="913"> 913</span>
<span id="914"> 914</span>
<span id="915"> 915</span>
<span id="916"> 916</span>
<span id="917"> 917</span>
<span id="918"> 918</span>
<span id="919"> 919</span>
<span id="920"> 920</span>
<span id="921"> 921</span>
<span id="922"> 922</span>
<span id="923"> 923</span>
<span id="924"> 924</span>
<span id="925"> 925</span>
<span id="926"> 926</span>
<span id="927"> 927</span>
<span id="928"> 928</span>
<span id="929"> 929</span>
<span id="930"> 930</span>
<span id="931"> 931</span>
<span id="932"> 932</span>
<span id="933"> 933</span>
<span id="934"> 934</span>
<span id="935"> 935</span>
<span id="936"> 936</span>
<span id="937"> 937</span>
<span id="938"> 938</span>
<span id="939"> 939</span>
<span id="940"> 940</span>
<span id="941"> 941</span>
<span id="942"> 942</span>
<span id="943"> 943</span>
<span id="944"> 944</span>
<span id="945"> 945</span>
<span id="946"> 946</span>
<span id="947"> 947</span>
<span id="948"> 948</span>
<span id="949"> 949</span>
<span id="950"> 950</span>
<span id="951"> 951</span>
<span id="952"> 952</span>
<span id="953"> 953</span>
<span id="954"> 954</span>
<span id="955"> 955</span>
<span id="956"> 956</span>
<span id="957"> 957</span>
<span id="958"> 958</span>
<span id="959"> 959</span>
<span id="960"> 960</span>
<span id="961"> 961</span>
<span id="962"> 962</span>
<span id="963"> 963</span>
<span id="964"> 964</span>
<span id="965"> 965</span>
<span id="966"> 966</span>
<span id="967"> 967</span>
<span id="968"> 968</span>
<span id="969"> 969</span>
<span id="970"> 970</span>
<span id="971"> 971</span>
<span id="972"> 972</span>
<span id="973"> 973</span>
<span id="974"> 974</span>
<span id="975"> 975</span>
<span id="976"> 976</span>
<span id="977"> 977</span>
<span id="978"> 978</span>
<span id="979"> 979</span>
<span id="980"> 980</span>
<span id="981"> 981</span>
<span id="982"> 982</span>
<span id="983"> 983</span>
<span id="984"> 984</span>
<span id="985"> 985</span>
<span id="986"> 986</span>
<span id="987"> 987</span>
<span id="988"> 988</span>
<span id="989"> 989</span>
<span id="990"> 990</span>
<span id="991"> 991</span>
<span id="992"> 992</span>
<span id="993"> 993</span>
<span id="994"> 994</span>
<span id="995"> 995</span>
<span id="996"> 996</span>
<span id="997"> 997</span>
<span id="998"> 998</span>
<span id="999"> 999</span>
<span id="1000">1000</span>
<span id="1001">1001</span>
<span id="1002">1002</span>
<span id="1003">1003</span>
<span id="1004">1004</span>
<span id="1005">1005</span>
<span id="1006">1006</span>
<span id="1007">1007</span>
<span id="1008">1008</span>
<span id="1009">1009</span>
<span id="1010">1010</span>
<span id="1011">1011</span>
<span id="1012">1012</span>
<span id="1013">1013</span>
<span id="1014">1014</span>
<span id="1015">1015</span>
<span id="1016">1016</span>
<span id="1017">1017</span>
<span id="1018">1018</span>
<span id="1019">1019</span>
<span id="1020">1020</span>
<span id="1021">1021</span>
<span id="1022">1022</span>
<span id="1023">1023</span>
<span id="1024">1024</span>
<span id="1025">1025</span>
<span id="1026">1026</span>
<span id="1027">1027</span>
<span id="1028">1028</span>
<span id="1029">1029</span>
<span id="1030">1030</span>
<span id="1031">1031</span>
<span id="1032">1032</span>
<span id="1033">1033</span>
<span id="1034">1034</span>
<span id="1035">1035</span>
<span id="1036">1036</span>
<span id="1037">1037</span>
<span id="1038">1038</span>
<span id="1039">1039</span>
<span id="1040">1040</span>
<span id="1041">1041</span>
<span id="1042">1042</span>
<span id="1043">1043</span>
<span id="1044">1044</span>
<span id="1045">1045</span>
<span id="1046">1046</span>
<span id="1047">1047</span>
<span id="1048">1048</span>
<span id="1049">1049</span>
<span id="1050">1050</span>
<span id="1051">1051</span>
<span id="1052">1052</span>
<span id="1053">1053</span>
<span id="1054">1054</span>
<span id="1055">1055</span>
<span id="1056">1056</span>
<span id="1057">1057</span>
<span id="1058">1058</span>
<span id="1059">1059</span>
<span id="1060">1060</span>
<span id="1061">1061</span>
<span id="1062">1062</span>
<span id="1063">1063</span>
<span id="1064">1064</span>
<span id="1065">1065</span>
<span id="1066">1066</span>
<span id="1067">1067</span>
<span id="1068">1068</span>
<span id="1069">1069</span>
<span id="1070">1070</span>
<span id="1071">1071</span>
<span id="1072">1072</span>
<span id="1073">1073</span>
<span id="1074">1074</span>
<span id="1075">1075</span>
<span id="1076">1076</span>
<span id="1077">1077</span>
<span id="1078">1078</span>
<span id="1079">1079</span>
<span id="1080">1080</span>
<span id="1081">1081</span>
<span id="1082">1082</span>
<span id="1083">1083</span>
<span id="1084">1084</span>
<span id="1085">1085</span>
<span id="1086">1086</span>
<span id="1087">1087</span>
<span id="1088">1088</span>
<span id="1089">1089</span>
<span id="1090">1090</span>
<span id="1091">1091</span>
<span id="1092">1092</span>
<span id="1093">1093</span>
<span id="1094">1094</span>
<span id="1095">1095</span>
<span id="1096">1096</span>
<span id="1097">1097</span>
<span id="1098">1098</span>
<span id="1099">1099</span>
<span id="1100">1100</span>
<span id="1101">1101</span>
<span id="1102">1102</span>
<span id="1103">1103</span>
<span id="1104">1104</span>
<span id="1105">1105</span>
<span id="1106">1106</span>
<span id="1107">1107</span>
<span id="1108">1108</span>
<span id="1109">1109</span>
<span id="1110">1110</span>
<span id="1111">1111</span>
<span id="1112">1112</span>
<span id="1113">1113</span>
<span id="1114">1114</span>
<span id="1115">1115</span>
<span id="1116">1116</span>
<span id="1117">1117</span>
<span id="1118">1118</span>
<span id="1119">1119</span>
<span id="1120">1120</span>
<span id="1121">1121</span>
<span id="1122">1122</span>
<span id="1123">1123</span>
<span id="1124">1124</span>
<span id="1125">1125</span>
<span id="1126">1126</span>
<span id="1127">1127</span>
<span id="1128">1128</span>
<span id="1129">1129</span>
<span id="1130">1130</span>
<span id="1131">1131</span>
<span id="1132">1132</span>
<span id="1133">1133</span>
<span id="1134">1134</span>
<span id="1135">1135</span>
<span id="1136">1136</span>
<span id="1137">1137</span>
<span id="1138">1138</span>
<span id="1139">1139</span>
<span id="1140">1140</span>
<span id="1141">1141</span>
<span id="1142">1142</span>
<span id="1143">1143</span>
<span id="1144">1144</span>
<span id="1145">1145</span>
<span id="1146">1146</span>
<span id="1147">1147</span>
<span id="1148">1148</span>
<span id="1149">1149</span>
<span id="1150">1150</span>
<span id="1151">1151</span>
<span id="1152">1152</span>
<span id="1153">1153</span>
<span id="1154">1154</span>
<span id="1155">1155</span>
<span id="1156">1156</span>
<span id="1157">1157</span>
<span id="1158">1158</span>
<span id="1159">1159</span>
<span id="1160">1160</span>
<span id="1161">1161</span>
<span id="1162">1162</span>
<span id="1163">1163</span>
<span id="1164">1164</span>
<span id="1165">1165</span>
<span id="1166">1166</span>
<span id="1167">1167</span>
<span id="1168">1168</span>
<span id="1169">1169</span>
<span id="1170">1170</span>
<span id="1171">1171</span>
<span id="1172">1172</span>
<span id="1173">1173</span>
<span id="1174">1174</span>
<span id="1175">1175</span>
<span id="1176">1176</span>
<span id="1177">1177</span>
<span id="1178">1178</span>
<span id="1179">1179</span>
<span id="1180">1180</span>
<span id="1181">1181</span>
<span id="1182">1182</span>
<span id="1183">1183</span>
<span id="1184">1184</span>
<span id="1185">1185</span>
<span id="1186">1186</span>
<span id="1187">1187</span>
<span id="1188">1188</span>
<span id="1189">1189</span>
<span id="1190">1190</span>
<span id="1191">1191</span>
<span id="1192">1192</span>
<span id="1193">1193</span>
<span id="1194">1194</span>
<span id="1195">1195</span>
<span id="1196">1196</span>
<span id="1197">1197</span>
<span id="1198">1198</span>
<span id="1199">1199</span>
<span id="1200">1200</span>
<span id="1201">1201</span>
<span id="1202">1202</span>
<span id="1203">1203</span>
<span id="1204">1204</span>
<span id="1205">1205</span>
<span id="1206">1206</span>
<span id="1207">1207</span>
<span id="1208">1208</span>
<span id="1209">1209</span>
<span id="1210">1210</span>
<span id="1211">1211</span>
<span id="1212">1212</span>
<span id="1213">1213</span>
<span id="1214">1214</span>
<span id="1215">1215</span>
<span id="1216">1216</span>
<span id="1217">1217</span>
<span id="1218">1218</span>
<span id="1219">1219</span>
<span id="1220">1220</span>
<span id="1221">1221</span>
<span id="1222">1222</span>
<span id="1223">1223</span>
<span id="1224">1224</span>
<span id="1225">1225</span>
<span id="1226">1226</span>
<span id="1227">1227</span>
<span id="1228">1228</span>
<span id="1229">1229</span>
<span id="1230">1230</span>
<span id="1231">1231</span>
<span id="1232">1232</span>
<span id="1233">1233</span>
<span id="1234">1234</span>
<span id="1235">1235</span>
<span id="1236">1236</span>
<span id="1237">1237</span>
<span id="1238">1238</span>
<span id="1239">1239</span>
<span id="1240">1240</span>
<span id="1241">1241</span>
<span id="1242">1242</span>
<span id="1243">1243</span>
<span id="1244">1244</span>
<span id="1245">1245</span>
<span id="1246">1246</span>
<span id="1247">1247</span>
<span id="1248">1248</span>
<span id="1249">1249</span>
<span id="1250">1250</span>
<span id="1251">1251</span>
<span id="1252">1252</span>
<span id="1253">1253</span>
<span id="1254">1254</span>
<span id="1255">1255</span>
<span id="1256">1256</span>
<span id="1257">1257</span>
<span id="1258">1258</span>
<span id="1259">1259</span>
<span id="1260">1260</span>
<span id="1261">1261</span>
<span id="1262">1262</span>
<span id="1263">1263</span>
<span id="1264">1264</span>
<span id="1265">1265</span>
<span id="1266">1266</span>
<span id="1267">1267</span>
<span id="1268">1268</span>
<span id="1269">1269</span>
<span id="1270">1270</span>
<span id="1271">1271</span>
<span id="1272">1272</span>
<span id="1273">1273</span>
<span id="1274">1274</span>
<span id="1275">1275</span>
<span id="1276">1276</span>
<span id="1277">1277</span>
<span id="1278">1278</span>
<span id="1279">1279</span>
<span id="1280">1280</span>
<span id="1281">1281</span>
<span id="1282">1282</span>
<span id="1283">1283</span>
<span id="1284">1284</span>
<span id="1285">1285</span>
<span id="1286">1286</span>
<span id="1287">1287</span>
<span id="1288">1288</span>
<span id="1289">1289</span>
<span id="1290">1290</span>
<span id="1291">1291</span>
<span id="1292">1292</span>
<span id="1293">1293</span>
<span id="1294">1294</span>
<span id="1295">1295</span>
<span id="1296">1296</span>
<span id="1297">1297</span>
<span id="1298">1298</span>
<span id="1299">1299</span>
<span id="1300">1300</span>
<span id="1301">1301</span>
<span id="1302">1302</span>
<span id="1303">1303</span>
<span id="1304">1304</span>
<span id="1305">1305</span>
<span id="1306">1306</span>
<span id="1307">1307</span>
<span id="1308">1308</span>
<span id="1309">1309</span>
<span id="1310">1310</span>
<span id="1311">1311</span>
<span id="1312">1312</span>
<span id="1313">1313</span>
<span id="1314">1314</span>
<span id="1315">1315</span>
<span id="1316">1316</span>
<span id="1317">1317</span>
<span id="1318">1318</span>
<span id="1319">1319</span>
<span id="1320">1320</span>
<span id="1321">1321</span>
<span id="1322">1322</span>
<span id="1323">1323</span>
<span id="1324">1324</span>
<span id="1325">1325</span>
<span id="1326">1326</span>
<span id="1327">1327</span>
<span id="1328">1328</span>
<span id="1329">1329</span>
<span id="1330">1330</span>
<span id="1331">1331</span>
<span id="1332">1332</span>
<span id="1333">1333</span>
<span id="1334">1334</span>
<span id="1335">1335</span>
<span id="1336">1336</span>
<span id="1337">1337</span>
<span id="1338">1338</span>
<span id="1339">1339</span>
<span id="1340">1340</span>
<span id="1341">1341</span>
<span id="1342">1342</span>
<span id="1343">1343</span>
<span id="1344">1344</span>
<span id="1345">1345</span>
<span id="1346">1346</span>
<span id="1347">1347</span>
<span id="1348">1348</span>
<span id="1349">1349</span>
<span id="1350">1350</span>
<span id="1351">1351</span>
<span id="1352">1352</span>
<span id="1353">1353</span>
<span id="1354">1354</span>
<span id="1355">1355</span>
<span id="1356">1356</span>
<span id="1357">1357</span>
<span id="1358">1358</span>
<span id="1359">1359</span>
<span id="1360">1360</span>
<span id="1361">1361</span>
<span id="1362">1362</span>
<span id="1363">1363</span>
<span id="1364">1364</span>
<span id="1365">1365</span>
<span id="1366">1366</span>
<span id="1367">1367</span>
<span id="1368">1368</span>
<span id="1369">1369</span>
<span id="1370">1370</span>
<span id="1371">1371</span>
<span id="1372">1372</span>
<span id="1373">1373</span>
<span id="1374">1374</span>
<span id="1375">1375</span>
<span id="1376">1376</span>
<span id="1377">1377</span>
<span id="1378">1378</span>
<span id="1379">1379</span>
<span id="1380">1380</span>
<span id="1381">1381</span>
<span id="1382">1382</span>
<span id="1383">1383</span>
<span id="1384">1384</span>
<span id="1385">1385</span>
<span id="1386">1386</span>
<span id="1387">1387</span>
<span id="1388">1388</span>
<span id="1389">1389</span>
<span id="1390">1390</span>
<span id="1391">1391</span>
<span id="1392">1392</span>
<span id="1393">1393</span>
<span id="1394">1394</span>
<span id="1395">1395</span>
<span id="1396">1396</span>
<span id="1397">1397</span>
<span id="1398">1398</span>
<span id="1399">1399</span>
<span id="1400">1400</span>
<span id="1401">1401</span>
<span id="1402">1402</span>
<span id="1403">1403</span>
<span id="1404">1404</span>
<span id="1405">1405</span>
<span id="1406">1406</span>
<span id="1407">1407</span>
<span id="1408">1408</span>
<span id="1409">1409</span>
<span id="1410">1410</span>
<span id="1411">1411</span>
<span id="1412">1412</span>
<span id="1413">1413</span>
<span id="1414">1414</span>
<span id="1415">1415</span>
<span id="1416">1416</span>
<span id="1417">1417</span>
<span id="1418">1418</span>
<span id="1419">1419</span>
<span id="1420">1420</span>
<span id="1421">1421</span>
<span id="1422">1422</span>
<span id="1423">1423</span>
<span id="1424">1424</span>
<span id="1425">1425</span>
<span id="1426">1426</span>
<span id="1427">1427</span>
<span id="1428">1428</span>
<span id="1429">1429</span>
<span id="1430">1430</span>
<span id="1431">1431</span>
<span id="1432">1432</span>
<span id="1433">1433</span>
<span id="1434">1434</span>
<span id="1435">1435</span>
<span id="1436">1436</span>
<span id="1437">1437</span>
<span id="1438">1438</span>
<span id="1439">1439</span>
<span id="1440">1440</span>
<span id="1441">1441</span>
<span id="1442">1442</span>
<span id="1443">1443</span>
<span id="1444">1444</span>
<span id="1445">1445</span>
<span id="1446">1446</span>
<span id="1447">1447</span>
<span id="1448">1448</span>
<span id="1449">1449</span>
<span id="1450">1450</span>
<span id="1451">1451</span>
<span id="1452">1452</span>
<span id="1453">1453</span>
<span id="1454">1454</span>
<span id="1455">1455</span>
<span id="1456">1456</span>
<span id="1457">1457</span>
<span id="1458">1458</span>
<span id="1459">1459</span>
<span id="1460">1460</span>
<span id="1461">1461</span>
<span id="1462">1462</span>
<span id="1463">1463</span>
<span id="1464">1464</span>
<span id="1465">1465</span>
<span id="1466">1466</span>
<span id="1467">1467</span>
<span id="1468">1468</span>
<span id="1469">1469</span>
<span id="1470">1470</span>
<span id="1471">1471</span>
<span id="1472">1472</span>
<span id="1473">1473</span>
<span id="1474">1474</span>
<span id="1475">1475</span>
<span id="1476">1476</span>
<span id="1477">1477</span>
<span id="1478">1478</span>
<span id="1479">1479</span>
<span id="1480">1480</span>
<span id="1481">1481</span>
<span id="1482">1482</span>
<span id="1483">1483</span>
<span id="1484">1484</span>
<span id="1485">1485</span>
<span id="1486">1486</span>
<span id="1487">1487</span>
<span id="1488">1488</span>
<span id="1489">1489</span>
<span id="1490">1490</span>
<span id="1491">1491</span>
<span id="1492">1492</span>
<span id="1493">1493</span>
<span id="1494">1494</span>
<span id="1495">1495</span>
<span id="1496">1496</span>
<span id="1497">1497</span>
<span id="1498">1498</span>
<span id="1499">1499</span>
<span id="1500">1500</span>
<span id="1501">1501</span>
<span id="1502">1502</span>
<span id="1503">1503</span>
<span id="1504">1504</span>
<span id="1505">1505</span>
<span id="1506">1506</span>
<span id="1507">1507</span>
<span id="1508">1508</span>
<span id="1509">1509</span>
<span id="1510">1510</span>
<span id="1511">1511</span>
<span id="1512">1512</span>
<span id="1513">1513</span>
<span id="1514">1514</span>
<span id="1515">1515</span>
<span id="1516">1516</span>
<span id="1517">1517</span>
<span id="1518">1518</span>
<span id="1519">1519</span>
<span id="1520">1520</span>
<span id="1521">1521</span>
<span id="1522">1522</span>
<span id="1523">1523</span>
<span id="1524">1524</span>
<span id="1525">1525</span>
<span id="1526">1526</span>
<span id="1527">1527</span>
<span id="1528">1528</span>
<span id="1529">1529</span>
<span id="1530">1530</span>
<span id="1531">1531</span>
<span id="1532">1532</span>
<span id="1533">1533</span>
<span id="1534">1534</span>
<span id="1535">1535</span>
<span id="1536">1536</span>
<span id="1537">1537</span>
<span id="1538">1538</span>
<span id="1539">1539</span>
<span id="1540">1540</span>
<span id="1541">1541</span>
<span id="1542">1542</span>
<span id="1543">1543</span>
<span id="1544">1544</span>
<span id="1545">1545</span>
<span id="1546">1546</span>
<span id="1547">1547</span>
<span id="1548">1548</span>
<span id="1549">1549</span>
<span id="1550">1550</span>
<span id="1551">1551</span>
<span id="1552">1552</span>
<span id="1553">1553</span>
<span id="1554">1554</span>
<span id="1555">1555</span>
<span id="1556">1556</span>
<span id="1557">1557</span>
<span id="1558">1558</span>
<span id="1559">1559</span>
<span id="1560">1560</span>
<span id="1561">1561</span>
<span id="1562">1562</span>
<span id="1563">1563</span>
<span id="1564">1564</span>
<span id="1565">1565</span>
<span id="1566">1566</span>
<span id="1567">1567</span>
<span id="1568">1568</span>
<span id="1569">1569</span>
<span id="1570">1570</span>
<span id="1571">1571</span>
<span id="1572">1572</span>
<span id="1573">1573</span>
<span id="1574">1574</span>
<span id="1575">1575</span>
<span id="1576">1576</span>
<span id="1577">1577</span>
<span id="1578">1578</span>
<span id="1579">1579</span>
<span id="1580">1580</span>
<span id="1581">1581</span>
<span id="1582">1582</span>
<span id="1583">1583</span>
<span id="1584">1584</span>
<span id="1585">1585</span>
<span id="1586">1586</span>
<span id="1587">1587</span>
<span id="1588">1588</span>
<span id="1589">1589</span>
<span id="1590">1590</span>
<span id="1591">1591</span>
<span id="1592">1592</span>
<span id="1593">1593</span>
<span id="1594">1594</span>
<span id="1595">1595</span>
<span id="1596">1596</span>
<span id="1597">1597</span>
<span id="1598">1598</span>
<span id="1599">1599</span>
<span id="1600">1600</span>
<span id="1601">1601</span>
<span id="1602">1602</span>
<span id="1603">1603</span>
<span id="1604">1604</span>
<span id="1605">1605</span>
<span id="1606">1606</span>
<span id="1607">1607</span>
<span id="1608">1608</span>
<span id="1609">1609</span>
<span id="1610">1610</span>
<span id="1611">1611</span>
<span id="1612">1612</span>
<span id="1613">1613</span>
<span id="1614">1614</span>
<span id="1615">1615</span>
<span id="1616">1616</span>
<span id="1617">1617</span>
<span id="1618">1618</span>
<span id="1619">1619</span>
<span id="1620">1620</span>
<span id="1621">1621</span>
<span id="1622">1622</span>
<span id="1623">1623</span>
<span id="1624">1624</span>
<span id="1625">1625</span>
<span id="1626">1626</span>
<span id="1627">1627</span>
<span id="1628">1628</span>
<span id="1629">1629</span>
<span id="1630">1630</span>
<span id="1631">1631</span>
<span id="1632">1632</span>
<span id="1633">1633</span>
<span id="1634">1634</span>
<span id="1635">1635</span>
<span id="1636">1636</span>
<span id="1637">1637</span>
<span id="1638">1638</span>
<span id="1639">1639</span>
<span id="1640">1640</span>
<span id="1641">1641</span>
<span id="1642">1642</span>
<span id="1643">1643</span>
<span id="1644">1644</span>
<span id="1645">1645</span>
<span id="1646">1646</span>
<span id="1647">1647</span>
<span id="1648">1648</span>
<span id="1649">1649</span>
<span id="1650">1650</span>
<span id="1651">1651</span>
<span id="1652">1652</span>
<span id="1653">1653</span>
<span id="1654">1654</span>
<span id="1655">1655</span>
<span id="1656">1656</span>
<span id="1657">1657</span>
<span id="1658">1658</span>
<span id="1659">1659</span>
<span id="1660">1660</span>
<span id="1661">1661</span>
<span id="1662">1662</span>
<span id="1663">1663</span>
<span id="1664">1664</span>
<span id="1665">1665</span>
<span id="1666">1666</span>
<span id="1667">1667</span>
<span id="1668">1668</span>
<span id="1669">1669</span>
<span id="1670">1670</span>
<span id="1671">1671</span>
<span id="1672">1672</span>
<span id="1673">1673</span>
<span id="1674">1674</span>
<span id="1675">1675</span>
<span id="1676">1676</span>
<span id="1677">1677</span>
<span id="1678">1678</span>
<span id="1679">1679</span>
<span id="1680">1680</span>
<span id="1681">1681</span>
<span id="1682">1682</span>
<span id="1683">1683</span>
<span id="1684">1684</span>
<span id="1685">1685</span>
<span id="1686">1686</span>
<span id="1687">1687</span>
<span id="1688">1688</span>
<span id="1689">1689</span>
<span id="1690">1690</span>
<span id="1691">1691</span>
<span id="1692">1692</span>
<span id="1693">1693</span>
<span id="1694">1694</span>
<span id="1695">1695</span>
<span id="1696">1696</span>
<span id="1697">1697</span>
<span id="1698">1698</span>
<span id="1699">1699</span>
<span id="1700">1700</span>
<span id="1701">1701</span>
<span id="1702">1702</span>
<span id="1703">1703</span>
<span id="1704">1704</span>
<span id="1705">1705</span>
<span id="1706">1706</span>
<span id="1707">1707</span>
<span id="1708">1708</span>
<span id="1709">1709</span>
<span id="1710">1710</span>
<span id="1711">1711</span>
<span id="1712">1712</span>
<span id="1713">1713</span>
<span id="1714">1714</span>
<span id="1715">1715</span>
<span id="1716">1716</span>
<span id="1717">1717</span>
<span id="1718">1718</span>
<span id="1719">1719</span>
<span id="1720">1720</span>
<span id="1721">1721</span>
<span id="1722">1722</span>
<span id="1723">1723</span>
<span id="1724">1724</span>
<span id="1725">1725</span>
<span id="1726">1726</span>
<span id="1727">1727</span>
<span id="1728">1728</span>
<span id="1729">1729</span>
<span id="1730">1730</span>
<span id="1731">1731</span>
<span id="1732">1732</span>
<span id="1733">1733</span>
<span id="1734">1734</span>
<span id="1735">1735</span>
<span id="1736">1736</span>
<span id="1737">1737</span>
<span id="1738">1738</span>
<span id="1739">1739</span>
<span id="1740">1740</span>
<span id="1741">1741</span>
<span id="1742">1742</span>
<span id="1743">1743</span>
<span id="1744">1744</span>
<span id="1745">1745</span>
<span id="1746">1746</span>
<span id="1747">1747</span>
<span id="1748">1748</span>
<span id="1749">1749</span>
<span id="1750">1750</span>
<span id="1751">1751</span>
<span id="1752">1752</span>
<span id="1753">1753</span>
<span id="1754">1754</span>
<span id="1755">1755</span>
<span id="1756">1756</span>
<span id="1757">1757</span>
<span id="1758">1758</span>
<span id="1759">1759</span>
<span id="1760">1760</span>
<span id="1761">1761</span>
<span id="1762">1762</span>
<span id="1763">1763</span>
<span id="1764">1764</span>
<span id="1765">1765</span>
<span id="1766">1766</span>
<span id="1767">1767</span>
<span id="1768">1768</span>
<span id="1769">1769</span>
<span id="1770">1770</span>
<span id="1771">1771</span>
<span id="1772">1772</span>
<span id="1773">1773</span>
<span id="1774">1774</span>
<span id="1775">1775</span>
<span id="1776">1776</span>
<span id="1777">1777</span>
<span id="1778">1778</span>
<span id="1779">1779</span>
<span id="1780">1780</span>
<span id="1781">1781</span>
<span id="1782">1782</span>
<span id="1783">1783</span>
<span id="1784">1784</span>
<span id="1785">1785</span>
<span id="1786">1786</span>
<span id="1787">1787</span>
<span id="1788">1788</span>
<span id="1789">1789</span>
<span id="1790">1790</span>
<span id="1791">1791</span>
<span id="1792">1792</span>
<span id="1793">1793</span>
<span id="1794">1794</span>
<span id="1795">1795</span>
<span id="1796">1796</span>
<span id="1797">1797</span>
<span id="1798">1798</span>
<span id="1799">1799</span>
<span id="1800">1800</span>
<span id="1801">1801</span>
<span id="1802">1802</span>
<span id="1803">1803</span>
<span id="1804">1804</span>
<span id="1805">1805</span>
<span id="1806">1806</span>
<span id="1807">1807</span>
<span id="1808">1808</span>
<span id="1809">1809</span>
<span id="1810">1810</span>
<span id="1811">1811</span>
<span id="1812">1812</span>
<span id="1813">1813</span>
<span id="1814">1814</span>
<span id="1815">1815</span>
<span id="1816">1816</span>
<span id="1817">1817</span>
<span id="1818">1818</span>
<span id="1819">1819</span>
<span id="1820">1820</span>
<span id="1821">1821</span>
<span id="1822">1822</span>
<span id="1823">1823</span>
<span id="1824">1824</span>
<span id="1825">1825</span>
<span id="1826">1826</span>
<span id="1827">1827</span>
<span id="1828">1828</span>
<span id="1829">1829</span>
<span id="1830">1830</span>
<span id="1831">1831</span>
<span id="1832">1832</span>
<span id="1833">1833</span>
<span id="1834">1834</span>
<span id="1835">1835</span>
<span id="1836">1836</span>
<span id="1837">1837</span>
<span id="1838">1838</span>
<span id="1839">1839</span>
<span id="1840">1840</span>
<span id="1841">1841</span>
<span id="1842">1842</span>
<span id="1843">1843</span>
<span id="1844">1844</span>
<span id="1845">1845</span>
<span id="1846">1846</span>
<span id="1847">1847</span>
<span id="1848">1848</span>
<span id="1849">1849</span>
<span id="1850">1850</span>
<span id="1851">1851</span>
<span id="1852">1852</span>
<span id="1853">1853</span>
<span id="1854">1854</span>
<span id="1855">1855</span>
<span id="1856">1856</span>
<span id="1857">1857</span>
<span id="1858">1858</span>
<span id="1859">1859</span>
<span id="1860">1860</span>
<span id="1861">1861</span>
<span id="1862">1862</span>
<span id="1863">1863</span>
<span id="1864">1864</span>
<span id="1865">1865</span>
<span id="1866">1866</span>
<span id="1867">1867</span>
<span id="1868">1868</span>
<span id="1869">1869</span>
<span id="1870">1870</span>
<span id="1871">1871</span>
<span id="1872">1872</span>
<span id="1873">1873</span>
<span id="1874">1874</span>
<span id="1875">1875</span>
<span id="1876">1876</span>
<span id="1877">1877</span>
<span id="1878">1878</span>
<span id="1879">1879</span>
<span id="1880">1880</span>
<span id="1881">1881</span>
<span id="1882">1882</span>
<span id="1883">1883</span>
<span id="1884">1884</span>
<span id="1885">1885</span>
<span id="1886">1886</span>
<span id="1887">1887</span>
<span id="1888">1888</span>
<span id="1889">1889</span>
<span id="1890">1890</span>
<span id="1891">1891</span>
<span id="1892">1892</span>
<span id="1893">1893</span>
<span id="1894">1894</span>
<span id="1895">1895</span>
<span id="1896">1896</span>
<span id="1897">1897</span>
<span id="1898">1898</span>
<span id="1899">1899</span>
<span id="1900">1900</span>
<span id="1901">1901</span>
<span id="1902">1902</span>
<span id="1903">1903</span>
<span id="1904">1904</span>
<span id="1905">1905</span>
<span id="1906">1906</span>
<span id="1907">1907</span>
<span id="1908">1908</span>
<span id="1909">1909</span>
<span id="1910">1910</span>
<span id="1911">1911</span>
<span id="1912">1912</span>
<span id="1913">1913</span>
<span id="1914">1914</span>
<span id="1915">1915</span>
<span id="1916">1916</span>
<span id="1917">1917</span>
<span id="1918">1918</span>
<span id="1919">1919</span>
<span id="1920">1920</span>
<span id="1921">1921</span>
<span id="1922">1922</span>
<span id="1923">1923</span>
<span id="1924">1924</span>
<span id="1925">1925</span>
<span id="1926">1926</span>
<span id="1927">1927</span>
<span id="1928">1928</span>
<span id="1929">1929</span>
<span id="1930">1930</span>
<span id="1931">1931</span>
<span id="1932">1932</span>
<span id="1933">1933</span>
<span id="1934">1934</span>
<span id="1935">1935</span>
<span id="1936">1936</span>
<span id="1937">1937</span>
<span id="1938">1938</span>
<span id="1939">1939</span>
<span id="1940">1940</span>
<span id="1941">1941</span>
<span id="1942">1942</span>
<span id="1943">1943</span>
<span id="1944">1944</span>
<span id="1945">1945</span>
<span id="1946">1946</span>
<span id="1947">1947</span>
<span id="1948">1948</span>
<span id="1949">1949</span>
<span id="1950">1950</span>
<span id="1951">1951</span>
<span id="1952">1952</span>
<span id="1953">1953</span>
<span id="1954">1954</span>
<span id="1955">1955</span>
<span id="1956">1956</span>
<span id="1957">1957</span>
<span id="1958">1958</span>
<span id="1959">1959</span>
<span id="1960">1960</span>
<span id="1961">1961</span>
<span id="1962">1962</span>
<span id="1963">1963</span>
<span id="1964">1964</span>
<span id="1965">1965</span>
<span id="1966">1966</span>
<span id="1967">1967</span>
<span id="1968">1968</span>
<span id="1969">1969</span>
<span id="1970">1970</span>
<span id="1971">1971</span>
<span id="1972">1972</span>
<span id="1973">1973</span>
<span id="1974">1974</span>
<span id="1975">1975</span>
<span id="1976">1976</span>
<span id="1977">1977</span>
<span id="1978">1978</span>
<span id="1979">1979</span>
<span id="1980">1980</span>
<span id="1981">1981</span>
<span id="1982">1982</span>
<span id="1983">1983</span>
<span id="1984">1984</span>
<span id="1985">1985</span>
<span id="1986">1986</span>
<span id="1987">1987</span>
<span id="1988">1988</span>
<span id="1989">1989</span>
<span id="1990">1990</span>
<span id="1991">1991</span>
<span id="1992">1992</span>
<span id="1993">1993</span>
<span id="1994">1994</span>
<span id="1995">1995</span>
<span id="1996">1996</span>
<span id="1997">1997</span>
<span id="1998">1998</span>
<span id="1999">1999</span>
<span id="2000">2000</span>
<span id="2001">2001</span>
<span id="2002">2002</span>
<span id="2003">2003</span>
<span id="2004">2004</span>
<span id="2005">2005</span>
<span id="2006">2006</span>
<span id="2007">2007</span>
<span id="2008">2008</span>
<span id="2009">2009</span>
<span id="2010">2010</span>
<span id="2011">2011</span>
<span id="2012">2012</span>
<span id="2013">2013</span>
<span id="2014">2014</span>
<span id="2015">2015</span>
<span id="2016">2016</span>
<span id="2017">2017</span>
<span id="2018">2018</span>
<span id="2019">2019</span>
<span id="2020">2020</span>
<span id="2021">2021</span>
<span id="2022">2022</span>
<span id="2023">2023</span>
<span id="2024">2024</span>
<span id="2025">2025</span>
<span id="2026">2026</span>
<span id="2027">2027</span>
<span id="2028">2028</span>
<span id="2029">2029</span>
<span id="2030">2030</span>
<span id="2031">2031</span>
<span id="2032">2032</span>
<span id="2033">2033</span>
<span id="2034">2034</span>
<span id="2035">2035</span>
<span id="2036">2036</span>
<span id="2037">2037</span>
<span id="2038">2038</span>
<span id="2039">2039</span>
<span id="2040">2040</span>
<span id="2041">2041</span>
<span id="2042">2042</span>
<span id="2043">2043</span>
<span id="2044">2044</span>
<span id="2045">2045</span>
<span id="2046">2046</span>
<span id="2047">2047</span>
<span id="2048">2048</span>
<span id="2049">2049</span>
<span id="2050">2050</span>
<span id="2051">2051</span>
<span id="2052">2052</span>
<span id="2053">2053</span>
<span id="2054">2054</span>
<span id="2055">2055</span>
<span id="2056">2056</span>
<span id="2057">2057</span>
<span id="2058">2058</span>
<span id="2059">2059</span>
<span id="2060">2060</span>
<span id="2061">2061</span>
<span id="2062">2062</span>
<span id="2063">2063</span>
<span id="2064">2064</span>
<span id="2065">2065</span>
<span id="2066">2066</span>
<span id="2067">2067</span>
<span id="2068">2068</span>
<span id="2069">2069</span>
<span id="2070">2070</span>
<span id="2071">2071</span>
<span id="2072">2072</span>
<span id="2073">2073</span>
<span id="2074">2074</span>
<span id="2075">2075</span>
<span id="2076">2076</span>
<span id="2077">2077</span>
<span id="2078">2078</span>
<span id="2079">2079</span>
<span id="2080">2080</span>
<span id="2081">2081</span>
<span id="2082">2082</span>
<span id="2083">2083</span>
<span id="2084">2084</span>
<span id="2085">2085</span>
<span id="2086">2086</span>
<span id="2087">2087</span>
<span id="2088">2088</span>
<span id="2089">2089</span>
<span id="2090">2090</span>
<span id="2091">2091</span>
<span id="2092">2092</span>
<span id="2093">2093</span>
<span id="2094">2094</span>
<span id="2095">2095</span>
<span id="2096">2096</span>
<span id="2097">2097</span>
<span id="2098">2098</span>
<span id="2099">2099</span>
<span id="2100">2100</span>
<span id="2101">2101</span>
<span id="2102">2102</span>
<span id="2103">2103</span>
<span id="2104">2104</span>
<span id="2105">2105</span>
<span id="2106">2106</span>
<span id="2107">2107</span>
<span id="2108">2108</span>
<span id="2109">2109</span>
<span id="2110">2110</span>
<span id="2111">2111</span>
<span id="2112">2112</span>
<span id="2113">2113</span>
<span id="2114">2114</span>
<span id="2115">2115</span>
<span id="2116">2116</span>
<span id="2117">2117</span>
<span id="2118">2118</span>
<span id="2119">2119</span>
<span id="2120">2120</span>
<span id="2121">2121</span>
<span id="2122">2122</span>
<span id="2123">2123</span>
<span id="2124">2124</span>
<span id="2125">2125</span>
<span id="2126">2126</span>
<span id="2127">2127</span>
<span id="2128">2128</span>
<span id="2129">2129</span>
<span id="2130">2130</span>
<span id="2131">2131</span>
<span id="2132">2132</span>
<span id="2133">2133</span>
<span id="2134">2134</span>
<span id="2135">2135</span>
<span id="2136">2136</span>
<span id="2137">2137</span>
<span id="2138">2138</span>
<span id="2139">2139</span>
<span id="2140">2140</span>
<span id="2141">2141</span>
<span id="2142">2142</span>
<span id="2143">2143</span>
<span id="2144">2144</span>
<span id="2145">2145</span>
<span id="2146">2146</span>
<span id="2147">2147</span>
<span id="2148">2148</span>
<span id="2149">2149</span>
<span id="2150">2150</span>
<span id="2151">2151</span>
<span id="2152">2152</span>
<span id="2153">2153</span>
<span id="2154">2154</span>
<span id="2155">2155</span>
<span id="2156">2156</span>
<span id="2157">2157</span>
<span id="2158">2158</span>
<span id="2159">2159</span>
<span id="2160">2160</span>
<span id="2161">2161</span>
<span id="2162">2162</span>
<span id="2163">2163</span>
<span id="2164">2164</span>
<span id="2165">2165</span>
<span id="2166">2166</span>
<span id="2167">2167</span>
<span id="2168">2168</span>
<span id="2169">2169</span>
<span id="2170">2170</span>
<span id="2171">2171</span>
<span id="2172">2172</span>
<span id="2173">2173</span>
<span id="2174">2174</span>
<span id="2175">2175</span>
<span id="2176">2176</span>
<span id="2177">2177</span>
<span id="2178">2178</span>
<span id="2179">2179</span>
<span id="2180">2180</span>
<span id="2181">2181</span>
<span id="2182">2182</span>
<span id="2183">2183</span>
<span id="2184">2184</span>
<span id="2185">2185</span>
<span id="2186">2186</span>
<span id="2187">2187</span>
<span id="2188">2188</span>
<span id="2189">2189</span>
<span id="2190">2190</span>
<span id="2191">2191</span>
<span id="2192">2192</span>
<span id="2193">2193</span>
<span id="2194">2194</span>
<span id="2195">2195</span>
<span id="2196">2196</span>
<span id="2197">2197</span>
<span id="2198">2198</span>
<span id="2199">2199</span>
<span id="2200">2200</span>
<span id="2201">2201</span>
<span id="2202">2202</span>
<span id="2203">2203</span>
<span id="2204">2204</span>
<span id="2205">2205</span>
<span id="2206">2206</span>
<span id="2207">2207</span>
<span id="2208">2208</span>
<span id="2209">2209</span>
<span id="2210">2210</span>
<span id="2211">2211</span>
<span id="2212">2212</span>
<span id="2213">2213</span>
<span id="2214">2214</span>
<span id="2215">2215</span>
<span id="2216">2216</span>
<span id="2217">2217</span>
<span id="2218">2218</span>
<span id="2219">2219</span>
<span id="2220">2220</span>
<span id="2221">2221</span>
<span id="2222">2222</span>
<span id="2223">2223</span>
<span id="2224">2224</span>
<span id="2225">2225</span>
<span id="2226">2226</span>
<span id="2227">2227</span>
<span id="2228">2228</span>
<span id="2229">2229</span>
<span id="2230">2230</span>
<span id="2231">2231</span>
<span id="2232">2232</span>
<span id="2233">2233</span>
<span id="2234">2234</span>
<span id="2235">2235</span>
<span id="2236">2236</span>
<span id="2237">2237</span>
<span id="2238">2238</span>
<span id="2239">2239</span>
<span id="2240">2240</span>
<span id="2241">2241</span>
<span id="2242">2242</span>
<span id="2243">2243</span>
<span id="2244">2244</span>
<span id="2245">2245</span>
<span id="2246">2246</span>
<span id="2247">2247</span>
<span id="2248">2248</span>
<span id="2249">2249</span>
<span id="2250">2250</span>
<span id="2251">2251</span>
<span id="2252">2252</span>
<span id="2253">2253</span>
<span id="2254">2254</span>
<span id="2255">2255</span>
<span id="2256">2256</span>
<span id="2257">2257</span>
<span id="2258">2258</span>
<span id="2259">2259</span>
<span id="2260">2260</span>
<span id="2261">2261</span>
<span id="2262">2262</span>
<span id="2263">2263</span>
<span id="2264">2264</span>
<span id="2265">2265</span>
<span id="2266">2266</span>
<span id="2267">2267</span>
<span id="2268">2268</span>
<span id="2269">2269</span>
<span id="2270">2270</span>
<span id="2271">2271</span>
<span id="2272">2272</span>
<span id="2273">2273</span>
<span id="2274">2274</span>
<span id="2275">2275</span>
<span id="2276">2276</span>
<span id="2277">2277</span>
<span id="2278">2278</span>
<span id="2279">2279</span>
<span id="2280">2280</span>
<span id="2281">2281</span>
<span id="2282">2282</span>
<span id="2283">2283</span>
<span id="2284">2284</span>
<span id="2285">2285</span>
<span id="2286">2286</span>
<span id="2287">2287</span>
<span id="2288">2288</span>
<span id="2289">2289</span>
<span id="2290">2290</span>
<span id="2291">2291</span>
<span id="2292">2292</span>
<span id="2293">2293</span>
<span id="2294">2294</span>
<span id="2295">2295</span>
<span id="2296">2296</span>
<span id="2297">2297</span>
<span id="2298">2298</span>
<span id="2299">2299</span>
<span id="2300">2300</span>
<span id="2301">2301</span>
<span id="2302">2302</span>
<span id="2303">2303</span>
<span id="2304">2304</span>
<span id="2305">2305</span>
<span id="2306">2306</span>
<span id="2307">2307</span>
<span id="2308">2308</span>
<span id="2309">2309</span>
<span id="2310">2310</span>
<span id="2311">2311</span>
<span id="2312">2312</span>
<span id="2313">2313</span>
<span id="2314">2314</span>
<span id="2315">2315</span>
<span id="2316">2316</span>
<span id="2317">2317</span>
<span id="2318">2318</span>
<span id="2319">2319</span>
<span id="2320">2320</span>
<span id="2321">2321</span>
<span id="2322">2322</span>
<span id="2323">2323</span>
<span id="2324">2324</span>
<span id="2325">2325</span>
<span id="2326">2326</span>
<span id="2327">2327</span>
<span id="2328">2328</span>
<span id="2329">2329</span>
<span id="2330">2330</span>
<span id="2331">2331</span>
<span id="2332">2332</span>
<span id="2333">2333</span>
<span id="2334">2334</span>
<span id="2335">2335</span>
<span id="2336">2336</span>
<span id="2337">2337</span>
<span id="2338">2338</span>
<span id="2339">2339</span>
<span id="2340">2340</span>
<span id="2341">2341</span>
<span id="2342">2342</span>
<span id="2343">2343</span>
<span id="2344">2344</span>
<span id="2345">2345</span>
<span id="2346">2346</span>
<span id="2347">2347</span>
<span id="2348">2348</span>
<span id="2349">2349</span>
<span id="2350">2350</span>
<span id="2351">2351</span>
<span id="2352">2352</span>
<span id="2353">2353</span>
<span id="2354">2354</span>
<span id="2355">2355</span>
<span id="2356">2356</span>
<span id="2357">2357</span>
<span id="2358">2358</span>
<span id="2359">2359</span>
<span id="2360">2360</span>
<span id="2361">2361</span>
<span id="2362">2362</span>
<span id="2363">2363</span>
<span id="2364">2364</span>
<span id="2365">2365</span>
<span id="2366">2366</span>
<span id="2367">2367</span>
<span id="2368">2368</span>
<span id="2369">2369</span>
<span id="2370">2370</span>
<span id="2371">2371</span>
<span id="2372">2372</span>
<span id="2373">2373</span>
<span id="2374">2374</span>
<span id="2375">2375</span>
<span id="2376">2376</span>
<span id="2377">2377</span>
<span id="2378">2378</span>
<span id="2379">2379</span>
<span id="2380">2380</span>
<span id="2381">2381</span>
<span id="2382">2382</span>
<span id="2383">2383</span>
<span id="2384">2384</span>
<span id="2385">2385</span>
<span id="2386">2386</span>
<span id="2387">2387</span>
<span id="2388">2388</span>
<span id="2389">2389</span>
<span id="2390">2390</span>
<span id="2391">2391</span>
<span id="2392">2392</span>
<span id="2393">2393</span>
<span id="2394">2394</span>
<span id="2395">2395</span>
<span id="2396">2396</span>
<span id="2397">2397</span>
<span id="2398">2398</span>
<span id="2399">2399</span>
<span id="2400">2400</span>
<span id="2401">2401</span>
<span id="2402">2402</span>
<span id="2403">2403</span>
<span id="2404">2404</span>
<span id="2405">2405</span>
<span id="2406">2406</span>
<span id="2407">2407</span>
<span id="2408">2408</span>
<span id="2409">2409</span>
<span id="2410">2410</span>
<span id="2411">2411</span>
<span id="2412">2412</span>
<span id="2413">2413</span>
<span id="2414">2414</span>
<span id="2415">2415</span>
<span id="2416">2416</span>
<span id="2417">2417</span>
<span id="2418">2418</span>
<span id="2419">2419</span>
<span id="2420">2420</span>
<span id="2421">2421</span>
<span id="2422">2422</span>
<span id="2423">2423</span>
<span id="2424">2424</span>
<span id="2425">2425</span>
<span id="2426">2426</span>
<span id="2427">2427</span>
<span id="2428">2428</span>
<span id="2429">2429</span>
<span id="2430">2430</span>
<span id="2431">2431</span>
<span id="2432">2432</span>
<span id="2433">2433</span>
<span id="2434">2434</span>
<span id="2435">2435</span>
<span id="2436">2436</span>
<span id="2437">2437</span>
<span id="2438">2438</span>
<span id="2439">2439</span>
<span id="2440">2440</span>
<span id="2441">2441</span>
<span id="2442">2442</span>
<span id="2443">2443</span>
<span id="2444">2444</span>
<span id="2445">2445</span>
<span id="2446">2446</span>
<span id="2447">2447</span>
<span id="2448">2448</span>
<span id="2449">2449</span>
<span id="2450">2450</span>
<span id="2451">2451</span>
<span id="2452">2452</span>
<span id="2453">2453</span>
<span id="2454">2454</span>
<span id="2455">2455</span>
<span id="2456">2456</span>
<span id="2457">2457</span>
<span id="2458">2458</span>
<span id="2459">2459</span>
<span id="2460">2460</span>
<span id="2461">2461</span>
<span id="2462">2462</span>
<span id="2463">2463</span>
<span id="2464">2464</span>
<span id="2465">2465</span>
<span id="2466">2466</span>
<span id="2467">2467</span>
<span id="2468">2468</span>
<span id="2469">2469</span>
<span id="2470">2470</span>
<span id="2471">2471</span>
<span id="2472">2472</span>
<span id="2473">2473</span>
<span id="2474">2474</span>
<span id="2475">2475</span>
<span id="2476">2476</span>
<span id="2477">2477</span>
<span id="2478">2478</span>
<span id="2479">2479</span>
<span id="2480">2480</span>
<span id="2481">2481</span>
<span id="2482">2482</span>
<span id="2483">2483</span>
<span id="2484">2484</span>
<span id="2485">2485</span>
<span id="2486">2486</span>
<span id="2487">2487</span>
<span id="2488">2488</span>
<span id="2489">2489</span>
<span id="2490">2490</span>
<span id="2491">2491</span>
<span id="2492">2492</span>
<span id="2493">2493</span>
<span id="2494">2494</span>
<span id="2495">2495</span>
<span id="2496">2496</span>
<span id="2497">2497</span>
<span id="2498">2498</span>
<span id="2499">2499</span>
<span id="2500">2500</span>
<span id="2501">2501</span>
<span id="2502">2502</span>
<span id="2503">2503</span>
<span id="2504">2504</span>
<span id="2505">2505</span>
<span id="2506">2506</span>
<span id="2507">2507</span>
<span id="2508">2508</span>
<span id="2509">2509</span>
<span id="2510">2510</span>
<span id="2511">2511</span>
<span id="2512">2512</span>
<span id="2513">2513</span>
<span id="2514">2514</span>
<span id="2515">2515</span>
<span id="2516">2516</span>
<span id="2517">2517</span>
<span id="2518">2518</span>
<span id="2519">2519</span>
<span id="2520">2520</span>
<span id="2521">2521</span>
<span id="2522">2522</span>
<span id="2523">2523</span>
<span id="2524">2524</span>
<span id="2525">2525</span>
<span id="2526">2526</span>
<span id="2527">2527</span>
<span id="2528">2528</span>
<span id="2529">2529</span>
<span id="2530">2530</span>
<span id="2531">2531</span>
<span id="2532">2532</span>
<span id="2533">2533</span>
<span id="2534">2534</span>
<span id="2535">2535</span>
<span id="2536">2536</span>
<span id="2537">2537</span>
<span id="2538">2538</span>
<span id="2539">2539</span>
<span id="2540">2540</span>
<span id="2541">2541</span>
<span id="2542">2542</span>
<span id="2543">2543</span>
<span id="2544">2544</span>
<span id="2545">2545</span>
<span id="2546">2546</span>
<span id="2547">2547</span>
<span id="2548">2548</span>
<span id="2549">2549</span>
<span id="2550">2550</span>
<span id="2551">2551</span>
<span id="2552">2552</span>
<span id="2553">2553</span>
<span id="2554">2554</span>
<span id="2555">2555</span>
<span id="2556">2556</span>
<span id="2557">2557</span>
<span id="2558">2558</span>
<span id="2559">2559</span>
<span id="2560">2560</span>
<span id="2561">2561</span>
<span id="2562">2562</span>
<span id="2563">2563</span>
<span id="2564">2564</span>
<span id="2565">2565</span>
<span id="2566">2566</span>
<span id="2567">2567</span>
<span id="2568">2568</span>
<span id="2569">2569</span>
<span id="2570">2570</span>
<span id="2571">2571</span>
<span id="2572">2572</span>
<span id="2573">2573</span>
<span id="2574">2574</span>
<span id="2575">2575</span>
<span id="2576">2576</span>
<span id="2577">2577</span>
<span id="2578">2578</span>
<span id="2579">2579</span>
<span id="2580">2580</span>
<span id="2581">2581</span>
<span id="2582">2582</span>
<span id="2583">2583</span>
<span id="2584">2584</span>
<span id="2585">2585</span>
<span id="2586">2586</span>
<span id="2587">2587</span>
<span id="2588">2588</span>
<span id="2589">2589</span>
<span id="2590">2590</span>
<span id="2591">2591</span>
<span id="2592">2592</span>
<span id="2593">2593</span>
<span id="2594">2594</span>
<span id="2595">2595</span>
<span id="2596">2596</span>
<span id="2597">2597</span>
<span id="2598">2598</span>
<span id="2599">2599</span>
<span id="2600">2600</span>
<span id="2601">2601</span>
<span id="2602">2602</span>
<span id="2603">2603</span>
<span id="2604">2604</span>
<span id="2605">2605</span>
<span id="2606">2606</span>
<span id="2607">2607</span>
<span id="2608">2608</span>
<span id="2609">2609</span>
<span id="2610">2610</span>
<span id="2611">2611</span>
<span id="2612">2612</span>
<span id="2613">2613</span>
<span id="2614">2614</span>
<span id="2615">2615</span>
<span id="2616">2616</span>
<span id="2617">2617</span>
<span id="2618">2618</span>
<span id="2619">2619</span>
<span id="2620">2620</span>
<span id="2621">2621</span>
<span id="2622">2622</span>
<span id="2623">2623</span>
<span id="2624">2624</span>
<span id="2625">2625</span>
<span id="2626">2626</span>
<span id="2627">2627</span>
<span id="2628">2628</span>
<span id="2629">2629</span>
<span id="2630">2630</span>
<span id="2631">2631</span>
<span id="2632">2632</span>
<span id="2633">2633</span>
<span id="2634">2634</span>
<span id="2635">2635</span>
<span id="2636">2636</span>
<span id="2637">2637</span>
<span id="2638">2638</span>
<span id="2639">2639</span>
<span id="2640">2640</span>
<span id="2641">2641</span>
<span id="2642">2642</span>
<span id="2643">2643</span>
<span id="2644">2644</span>
<span id="2645">2645</span>
<span id="2646">2646</span>
<span id="2647">2647</span>
<span id="2648">2648</span>
<span id="2649">2649</span>
<span id="2650">2650</span>
<span id="2651">2651</span>
<span id="2652">2652</span>
<span id="2653">2653</span>
<span id="2654">2654</span>
<span id="2655">2655</span>
<span id="2656">2656</span>
<span id="2657">2657</span>
<span id="2658">2658</span>
<span id="2659">2659</span>
<span id="2660">2660</span>
<span id="2661">2661</span>
<span id="2662">2662</span>
<span id="2663">2663</span>
<span id="2664">2664</span>
<span id="2665">2665</span>
<span id="2666">2666</span>
<span id="2667">2667</span>
<span id="2668">2668</span>
<span id="2669">2669</span>
<span id="2670">2670</span>
<span id="2671">2671</span>
<span id="2672">2672</span>
<span id="2673">2673</span>
<span id="2674">2674</span>
<span id="2675">2675</span>
<span id="2676">2676</span>
<span id="2677">2677</span>
<span id="2678">2678</span>
<span id="2679">2679</span>
<span id="2680">2680</span>
<span id="2681">2681</span>
<span id="2682">2682</span>
<span id="2683">2683</span>
<span id="2684">2684</span>
<span id="2685">2685</span>
<span id="2686">2686</span>
<span id="2687">2687</span>
<span id="2688">2688</span>
<span id="2689">2689</span>
<span id="2690">2690</span>
<span id="2691">2691</span>
<span id="2692">2692</span>
<span id="2693">2693</span>
<span id="2694">2694</span>
<span id="2695">2695</span>
<span id="2696">2696</span>
<span id="2697">2697</span>
<span id="2698">2698</span>
<span id="2699">2699</span>
<span id="2700">2700</span>
<span id="2701">2701</span>
<span id="2702">2702</span>
<span id="2703">2703</span>
<span id="2704">2704</span>
<span id="2705">2705</span>
<span id="2706">2706</span>
<span id="2707">2707</span>
<span id="2708">2708</span>
<span id="2709">2709</span>
<span id="2710">2710</span>
<span id="2711">2711</span>
<span id="2712">2712</span>
<span id="2713">2713</span>
<span id="2714">2714</span>
<span id="2715">2715</span>
<span id="2716">2716</span>
<span id="2717">2717</span>
<span id="2718">2718</span>
<span id="2719">2719</span>
<span id="2720">2720</span>
<span id="2721">2721</span>
<span id="2722">2722</span>
<span id="2723">2723</span>
<span id="2724">2724</span>
<span id="2725">2725</span>
<span id="2726">2726</span>
<span id="2727">2727</span>
<span id="2728">2728</span>
<span id="2729">2729</span>
<span id="2730">2730</span>
<span id="2731">2731</span>
<span id="2732">2732</span>
<span id="2733">2733</span>
<span id="2734">2734</span>
<span id="2735">2735</span>
<span id="2736">2736</span>
<span id="2737">2737</span>
<span id="2738">2738</span>
<span id="2739">2739</span>
<span id="2740">2740</span>
<span id="2741">2741</span>
<span id="2742">2742</span>
<span id="2743">2743</span>
<span id="2744">2744</span>
<span id="2745">2745</span>
<span id="2746">2746</span>
<span id="2747">2747</span>
<span id="2748">2748</span>
<span id="2749">2749</span>
<span id="2750">2750</span>
<span id="2751">2751</span>
<span id="2752">2752</span>
<span id="2753">2753</span>
<span id="2754">2754</span>
<span id="2755">2755</span>
<span id="2756">2756</span>
<span id="2757">2757</span>
<span id="2758">2758</span>
<span id="2759">2759</span>
<span id="2760">2760</span>
<span id="2761">2761</span>
<span id="2762">2762</span>
<span id="2763">2763</span>
<span id="2764">2764</span>
<span id="2765">2765</span>
<span id="2766">2766</span>
<span id="2767">2767</span>
<span id="2768">2768</span>
<span id="2769">2769</span>
<span id="2770">2770</span>
<span id="2771">2771</span>
<span id="2772">2772</span>
<span id="2773">2773</span>
<span id="2774">2774</span>
<span id="2775">2775</span>
<span id="2776">2776</span>
<span id="2777">2777</span>
<span id="2778">2778</span>
<span id="2779">2779</span>
<span id="2780">2780</span>
<span id="2781">2781</span>
<span id="2782">2782</span>
<span id="2783">2783</span>
<span id="2784">2784</span>
<span id="2785">2785</span>
<span id="2786">2786</span>
<span id="2787">2787</span>
<span id="2788">2788</span>
<span id="2789">2789</span>
<span id="2790">2790</span>
<span id="2791">2791</span>
<span id="2792">2792</span>
<span id="2793">2793</span>
<span id="2794">2794</span>
<span id="2795">2795</span>
<span id="2796">2796</span>
<span id="2797">2797</span>
<span id="2798">2798</span>
<span id="2799">2799</span>
<span id="2800">2800</span>
<span id="2801">2801</span>
<span id="2802">2802</span>
<span id="2803">2803</span>
<span id="2804">2804</span>
<span id="2805">2805</span>
<span id="2806">2806</span>
<span id="2807">2807</span>
<span id="2808">2808</span>
<span id="2809">2809</span>
<span id="2810">2810</span>
<span id="2811">2811</span>
<span id="2812">2812</span>
<span id="2813">2813</span>
<span id="2814">2814</span>
<span id="2815">2815</span>
<span id="2816">2816</span>
<span id="2817">2817</span>
<span id="2818">2818</span>
<span id="2819">2819</span>
<span id="2820">2820</span>
<span id="2821">2821</span>
<span id="2822">2822</span>
<span id="2823">2823</span>
<span id="2824">2824</span>
<span id="2825">2825</span>
<span id="2826">2826</span>
<span id="2827">2827</span>
<span id="2828">2828</span>
<span id="2829">2829</span>
<span id="2830">2830</span>
<span id="2831">2831</span>
<span id="2832">2832</span>
<span id="2833">2833</span>
<span id="2834">2834</span>
<span id="2835">2835</span>
<span id="2836">2836</span>
<span id="2837">2837</span>
<span id="2838">2838</span>
<span id="2839">2839</span>
<span id="2840">2840</span>
<span id="2841">2841</span>
<span id="2842">2842</span>
<span id="2843">2843</span>
<span id="2844">2844</span>
<span id="2845">2845</span>
<span id="2846">2846</span>
<span id="2847">2847</span>
<span id="2848">2848</span>
<span id="2849">2849</span>
<span id="2850">2850</span>
<span id="2851">2851</span>
<span id="2852">2852</span>
<span id="2853">2853</span>
<span id="2854">2854</span>
<span id="2855">2855</span>
<span id="2856">2856</span>
<span id="2857">2857</span>
<span id="2858">2858</span>
<span id="2859">2859</span>
<span id="2860">2860</span>
<span id="2861">2861</span>
<span id="2862">2862</span>
<span id="2863">2863</span>
<span id="2864">2864</span>
<span id="2865">2865</span>
<span id="2866">2866</span>
<span id="2867">2867</span>
<span id="2868">2868</span>
<span id="2869">2869</span>
<span id="2870">2870</span>
<span id="2871">2871</span>
<span id="2872">2872</span>
<span id="2873">2873</span>
<span id="2874">2874</span>
<span id="2875">2875</span>
<span id="2876">2876</span>
<span id="2877">2877</span>
<span id="2878">2878</span>
<span id="2879">2879</span>
<span id="2880">2880</span>
<span id="2881">2881</span>
<span id="2882">2882</span>
<span id="2883">2883</span>
<span id="2884">2884</span>
<span id="2885">2885</span>
<span id="2886">2886</span>
<span id="2887">2887</span>
<span id="2888">2888</span>
<span id="2889">2889</span>
<span id="2890">2890</span>
<span id="2891">2891</span>
<span id="2892">2892</span>
<span id="2893">2893</span>
<span id="2894">2894</span>
<span id="2895">2895</span>
<span id="2896">2896</span>
<span id="2897">2897</span>
<span id="2898">2898</span>
<span id="2899">2899</span>
<span id="2900">2900</span>
<span id="2901">2901</span>
<span id="2902">2902</span>
<span id="2903">2903</span>
<span id="2904">2904</span>
<span id="2905">2905</span>
<span id="2906">2906</span>
<span id="2907">2907</span>
<span id="2908">2908</span>
<span id="2909">2909</span>
<span id="2910">2910</span>
<span id="2911">2911</span>
<span id="2912">2912</span>
<span id="2913">2913</span>
<span id="2914">2914</span>
<span id="2915">2915</span>
<span id="2916">2916</span>
<span id="2917">2917</span>
<span id="2918">2918</span>
<span id="2919">2919</span>
<span id="2920">2920</span>
<span id="2921">2921</span>
<span id="2922">2922</span>
<span id="2923">2923</span>
<span id="2924">2924</span>
<span id="2925">2925</span>
<span id="2926">2926</span>
<span id="2927">2927</span>
<span id="2928">2928</span>
<span id="2929">2929</span>
<span id="2930">2930</span>
<span id="2931">2931</span>
<span id="2932">2932</span>
<span id="2933">2933</span>
<span id="2934">2934</span>
<span id="2935">2935</span>
<span id="2936">2936</span>
<span id="2937">2937</span>
<span id="2938">2938</span>
<span id="2939">2939</span>
<span id="2940">2940</span>
<span id="2941">2941</span>
<span id="2942">2942</span>
<span id="2943">2943</span>
<span id="2944">2944</span>
<span id="2945">2945</span>
<span id="2946">2946</span>
<span id="2947">2947</span>
<span id="2948">2948</span>
<span id="2949">2949</span>
<span id="2950">2950</span>
<span id="2951">2951</span>
<span id="2952">2952</span>
<span id="2953">2953</span>
<span id="2954">2954</span>
<span id="2955">2955</span>
<span id="2956">2956</span>
<span id="2957">2957</span>
<span id="2958">2958</span>
<span id="2959">2959</span>
<span id="2960">2960</span>
<span id="2961">2961</span>
<span id="2962">2962</span>
<span id="2963">2963</span>
<span id="2964">2964</span>
<span id="2965">2965</span>
<span id="2966">2966</span>
<span id="2967">2967</span>
<span id="2968">2968</span>
<span id="2969">2969</span>
<span id="2970">2970</span>
<span id="2971">2971</span>
<span id="2972">2972</span>
<span id="2973">2973</span>
<span id="2974">2974</span>
<span id="2975">2975</span>
<span id="2976">2976</span>
<span id="2977">2977</span>
<span id="2978">2978</span>
<span id="2979">2979</span>
<span id="2980">2980</span>
<span id="2981">2981</span>
<span id="2982">2982</span>
<span id="2983">2983</span>
<span id="2984">2984</span>
<span id="2985">2985</span>
<span id="2986">2986</span>
<span id="2987">2987</span>
<span id="2988">2988</span>
<span id="2989">2989</span>
<span id="2990">2990</span>
<span id="2991">2991</span>
<span id="2992">2992</span>
<span id="2993">2993</span>
<span id="2994">2994</span>
<span id="2995">2995</span>
<span id="2996">2996</span>
<span id="2997">2997</span>
<span id="2998">2998</span>
<span id="2999">2999</span>
<span id="3000">3000</span>
<span id="3001">3001</span>
<span id="3002">3002</span>
<span id="3003">3003</span>
<span id="3004">3004</span>
<span id="3005">3005</span>
<span id="3006">3006</span>
<span id="3007">3007</span>
<span id="3008">3008</span>
<span id="3009">3009</span>
<span id="3010">3010</span>
<span id="3011">3011</span>
<span id="3012">3012</span>
<span id="3013">3013</span>
<span id="3014">3014</span>
<span id="3015">3015</span>
<span id="3016">3016</span>
<span id="3017">3017</span>
<span id="3018">3018</span>
<span id="3019">3019</span>
<span id="3020">3020</span>
<span id="3021">3021</span>
<span id="3022">3022</span>
<span id="3023">3023</span>
<span id="3024">3024</span>
<span id="3025">3025</span>
<span id="3026">3026</span>
<span id="3027">3027</span>
<span id="3028">3028</span>
<span id="3029">3029</span>
<span id="3030">3030</span>
<span id="3031">3031</span>
<span id="3032">3032</span>
<span id="3033">3033</span>
<span id="3034">3034</span>
<span id="3035">3035</span>
<span id="3036">3036</span>
<span id="3037">3037</span>
<span id="3038">3038</span>
<span id="3039">3039</span>
<span id="3040">3040</span>
<span id="3041">3041</span>
<span id="3042">3042</span>
<span id="3043">3043</span>
<span id="3044">3044</span>
<span id="3045">3045</span>
<span id="3046">3046</span>
<span id="3047">3047</span>
<span id="3048">3048</span>
<span id="3049">3049</span>
<span id="3050">3050</span>
<span id="3051">3051</span>
<span id="3052">3052</span>
<span id="3053">3053</span>
<span id="3054">3054</span>
<span id="3055">3055</span>
<span id="3056">3056</span>
<span id="3057">3057</span>
<span id="3058">3058</span>
<span id="3059">3059</span>
<span id="3060">3060</span>
<span id="3061">3061</span>
<span id="3062">3062</span>
<span id="3063">3063</span>
<span id="3064">3064</span>
<span id="3065">3065</span>
<span id="3066">3066</span>
<span id="3067">3067</span>
<span id="3068">3068</span>
<span id="3069">3069</span>
<span id="3070">3070</span>
<span id="3071">3071</span>
<span id="3072">3072</span>
<span id="3073">3073</span>
<span id="3074">3074</span>
<span id="3075">3075</span>
<span id="3076">3076</span>
<span id="3077">3077</span>
<span id="3078">3078</span>
<span id="3079">3079</span>
<span id="3080">3080</span>
<span id="3081">3081</span>
<span id="3082">3082</span>
<span id="3083">3083</span>
<span id="3084">3084</span>
<span id="3085">3085</span>
<span id="3086">3086</span>
<span id="3087">3087</span>
<span id="3088">3088</span>
<span id="3089">3089</span>
<span id="3090">3090</span>
<span id="3091">3091</span>
<span id="3092">3092</span>
<span id="3093">3093</span>
<span id="3094">3094</span>
<span id="3095">3095</span>
<span id="3096">3096</span>
<span id="3097">3097</span>
<span id="3098">3098</span>
<span id="3099">3099</span>
<span id="3100">3100</span>
<span id="3101">3101</span>
<span id="3102">3102</span>
<span id="3103">3103</span>
<span id="3104">3104</span>
<span id="3105">3105</span>
<span id="3106">3106</span>
<span id="3107">3107</span>
<span id="3108">3108</span>
<span id="3109">3109</span>
<span id="3110">3110</span>
<span id="3111">3111</span>
<span id="3112">3112</span>
<span id="3113">3113</span>
<span id="3114">3114</span>
<span id="3115">3115</span>
<span id="3116">3116</span>
<span id="3117">3117</span>
<span id="3118">3118</span>
<span id="3119">3119</span>
<span id="3120">3120</span>
<span id="3121">3121</span>
<span id="3122">3122</span>
<span id="3123">3123</span>
<span id="3124">3124</span>
<span id="3125">3125</span>
<span id="3126">3126</span>
<span id="3127">3127</span>
<span id="3128">3128</span>
<span id="3129">3129</span>
<span id="3130">3130</span>
<span id="3131">3131</span>
<span id="3132">3132</span>
<span id="3133">3133</span>
<span id="3134">3134</span>
<span id="3135">3135</span>
<span id="3136">3136</span>
<span id="3137">3137</span>
<span id="3138">3138</span>
<span id="3139">3139</span>
<span id="3140">3140</span>
<span id="3141">3141</span>
<span id="3142">3142</span>
<span id="3143">3143</span>
<span id="3144">3144</span>
<span id="3145">3145</span>
<span id="3146">3146</span>
<span id="3147">3147</span>
<span id="3148">3148</span>
<span id="3149">3149</span>
<span id="3150">3150</span>
<span id="3151">3151</span>
<span id="3152">3152</span>
<span id="3153">3153</span>
<span id="3154">3154</span>
<span id="3155">3155</span>
<span id="3156">3156</span>
<span id="3157">3157</span>
<span id="3158">3158</span>
<span id="3159">3159</span>
<span id="3160">3160</span>
<span id="3161">3161</span>
<span id="3162">3162</span>
<span id="3163">3163</span>
<span id="3164">3164</span>
<span id="3165">3165</span>
<span id="3166">3166</span>
<span id="3167">3167</span>
<span id="3168">3168</span>
<span id="3169">3169</span>
<span id="3170">3170</span>
<span id="3171">3171</span>
<span id="3172">3172</span>
<span id="3173">3173</span>
<span id="3174">3174</span>
<span id="3175">3175</span>
<span id="3176">3176</span>
<span id="3177">3177</span>
<span id="3178">3178</span>
<span id="3179">3179</span>
<span id="3180">3180</span>
<span id="3181">3181</span>
<span id="3182">3182</span>
<span id="3183">3183</span>
<span id="3184">3184</span>
<span id="3185">3185</span>
<span id="3186">3186</span>
<span id="3187">3187</span>
<span id="3188">3188</span>
<span id="3189">3189</span>
<span id="3190">3190</span>
<span id="3191">3191</span>
<span id="3192">3192</span>
<span id="3193">3193</span>
<span id="3194">3194</span>
<span id="3195">3195</span>
<span id="3196">3196</span>
<span id="3197">3197</span>
<span id="3198">3198</span>
<span id="3199">3199</span>
<span id="3200">3200</span>
<span id="3201">3201</span>
<span id="3202">3202</span>
<span id="3203">3203</span>
<span id="3204">3204</span>
<span id="3205">3205</span>
<span id="3206">3206</span>
<span id="3207">3207</span>
<span id="3208">3208</span>
<span id="3209">3209</span>
<span id="3210">3210</span>
<span id="3211">3211</span>
<span id="3212">3212</span>
<span id="3213">3213</span>
<span id="3214">3214</span>
<span id="3215">3215</span>
<span id="3216">3216</span>
<span id="3217">3217</span>
<span id="3218">3218</span>
<span id="3219">3219</span>
<span id="3220">3220</span>
<span id="3221">3221</span>
<span id="3222">3222</span>
<span id="3223">3223</span>
<span id="3224">3224</span>
<span id="3225">3225</span>
<span id="3226">3226</span>
<span id="3227">3227</span>
<span id="3228">3228</span>
<span id="3229">3229</span>
<span id="3230">3230</span>
<span id="3231">3231</span>
<span id="3232">3232</span>
<span id="3233">3233</span>
<span id="3234">3234</span>
<span id="3235">3235</span>
<span id="3236">3236</span>
<span id="3237">3237</span>
<span id="3238">3238</span>
<span id="3239">3239</span>
<span id="3240">3240</span>
<span id="3241">3241</span>
<span id="3242">3242</span>
<span id="3243">3243</span>
<span id="3244">3244</span>
<span id="3245">3245</span>
<span id="3246">3246</span>
<span id="3247">3247</span>
<span id="3248">3248</span>
<span id="3249">3249</span>
<span id="3250">3250</span>
<span id="3251">3251</span>
<span id="3252">3252</span>
<span id="3253">3253</span>
<span id="3254">3254</span>
<span id="3255">3255</span>
<span id="3256">3256</span>
<span id="3257">3257</span>
<span id="3258">3258</span>
<span id="3259">3259</span>
<span id="3260">3260</span>
<span id="3261">3261</span>
<span id="3262">3262</span>
<span id="3263">3263</span>
<span id="3264">3264</span>
<span id="3265">3265</span>
<span id="3266">3266</span>
<span id="3267">3267</span>
<span id="3268">3268</span>
<span id="3269">3269</span>
<span id="3270">3270</span>
<span id="3271">3271</span>
<span id="3272">3272</span>
<span id="3273">3273</span>
<span id="3274">3274</span>
<span id="3275">3275</span>
<span id="3276">3276</span>
<span id="3277">3277</span>
<span id="3278">3278</span>
<span id="3279">3279</span>
<span id="3280">3280</span>
<span id="3281">3281</span>
<span id="3282">3282</span>
<span id="3283">3283</span>
<span id="3284">3284</span>
<span id="3285">3285</span>
<span id="3286">3286</span>
<span id="3287">3287</span>
<span id="3288">3288</span>
<span id="3289">3289</span>
<span id="3290">3290</span>
<span id="3291">3291</span>
<span id="3292">3292</span>
<span id="3293">3293</span>
<span id="3294">3294</span>
<span id="3295">3295</span>
<span id="3296">3296</span>
<span id="3297">3297</span>
<span id="3298">3298</span>
<span id="3299">3299</span>
<span id="3300">3300</span>
<span id="3301">3301</span>
<span id="3302">3302</span>
<span id="3303">3303</span>
<span id="3304">3304</span>
<span id="3305">3305</span>
<span id="3306">3306</span>
<span id="3307">3307</span>
<span id="3308">3308</span>
<span id="3309">3309</span>
<span id="3310">3310</span>
<span id="3311">3311</span>
<span id="3312">3312</span>
<span id="3313">3313</span>
<span id="3314">3314</span>
<span id="3315">3315</span>
<span id="3316">3316</span>
<span id="3317">3317</span>
<span id="3318">3318</span>
<span id="3319">3319</span>
<span id="3320">3320</span>
<span id="3321">3321</span>
<span id="3322">3322</span>
<span id="3323">3323</span>
<span id="3324">3324</span>
<span id="3325">3325</span>
<span id="3326">3326</span>
<span id="3327">3327</span>
<span id="3328">3328</span>
<span id="3329">3329</span>
<span id="3330">3330</span>
<span id="3331">3331</span>
<span id="3332">3332</span>
<span id="3333">3333</span>
<span id="3334">3334</span>
<span id="3335">3335</span>
<span id="3336">3336</span>
<span id="3337">3337</span>
<span id="3338">3338</span>
<span id="3339">3339</span>
<span id="3340">3340</span>
<span id="3341">3341</span>
<span id="3342">3342</span>
<span id="3343">3343</span>
<span id="3344">3344</span>
<span id="3345">3345</span>
<span id="3346">3346</span>
<span id="3347">3347</span>
<span id="3348">3348</span>
<span id="3349">3349</span>
<span id="3350">3350</span>
<span id="3351">3351</span>
<span id="3352">3352</span>
<span id="3353">3353</span>
<span id="3354">3354</span>
<span id="3355">3355</span>
<span id="3356">3356</span>
<span id="3357">3357</span>
<span id="3358">3358</span>
<span id="3359">3359</span>
<span id="3360">3360</span>
<span id="3361">3361</span>
<span id="3362">3362</span>
<span id="3363">3363</span>
<span id="3364">3364</span>
<span id="3365">3365</span>
<span id="3366">3366</span>
<span id="3367">3367</span>
<span id="3368">3368</span>
<span id="3369">3369</span>
<span id="3370">3370</span>
<span id="3371">3371</span>
<span id="3372">3372</span>
<span id="3373">3373</span>
<span id="3374">3374</span>
<span id="3375">3375</span>
<span id="3376">3376</span>
<span id="3377">3377</span>
<span id="3378">3378</span>
<span id="3379">3379</span>
<span id="3380">3380</span>
<span id="3381">3381</span>
<span id="3382">3382</span>
<span id="3383">3383</span>
<span id="3384">3384</span>
<span id="3385">3385</span>
<span id="3386">3386</span>
<span id="3387">3387</span>
<span id="3388">3388</span>
<span id="3389">3389</span>
<span id="3390">3390</span>
<span id="3391">3391</span>
<span id="3392">3392</span>
<span id="3393">3393</span>
<span id="3394">3394</span>
<span id="3395">3395</span>
<span id="3396">3396</span>
<span id="3397">3397</span>
<span id="3398">3398</span>
<span id="3399">3399</span>
<span id="3400">3400</span>
<span id="3401">3401</span>
<span id="3402">3402</span>
<span id="3403">3403</span>
<span id="3404">3404</span>
<span id="3405">3405</span>
<span id="3406">3406</span>
<span id="3407">3407</span>
<span id="3408">3408</span>
<span id="3409">3409</span>
<span id="3410">3410</span>
<span id="3411">3411</span>
<span id="3412">3412</span>
<span id="3413">3413</span>
<span id="3414">3414</span>
<span id="3415">3415</span>
<span id="3416">3416</span>
<span id="3417">3417</span>
<span id="3418">3418</span>
<span id="3419">3419</span>
<span id="3420">3420</span>
<span id="3421">3421</span>
<span id="3422">3422</span>
<span id="3423">3423</span>
<span id="3424">3424</span>
<span id="3425">3425</span>
<span id="3426">3426</span>
<span id="3427">3427</span>
<span id="3428">3428</span>
<span id="3429">3429</span>
<span id="3430">3430</span>
<span id="3431">3431</span>
<span id="3432">3432</span>
<span id="3433">3433</span>
<span id="3434">3434</span>
<span id="3435">3435</span>
<span id="3436">3436</span>
<span id="3437">3437</span>
<span id="3438">3438</span>
<span id="3439">3439</span>
<span id="3440">3440</span>
<span id="3441">3441</span>
<span id="3442">3442</span>
<span id="3443">3443</span>
<span id="3444">3444</span>
<span id="3445">3445</span>
<span id="3446">3446</span>
<span id="3447">3447</span>
<span id="3448">3448</span>
<span id="3449">3449</span>
<span id="3450">3450</span>
<span id="3451">3451</span>
<span id="3452">3452</span>
<span id="3453">3453</span>
<span id="3454">3454</span>
<span id="3455">3455</span>
<span id="3456">3456</span>
<span id="3457">3457</span>
<span id="3458">3458</span>
<span id="3459">3459</span>
<span id="3460">3460</span>
<span id="3461">3461</span>
<span id="3462">3462</span>
<span id="3463">3463</span>
<span id="3464">3464</span>
<span id="3465">3465</span>
<span id="3466">3466</span>
<span id="3467">3467</span>
<span id="3468">3468</span>
<span id="3469">3469</span>
<span id="3470">3470</span>
<span id="3471">3471</span>
<span id="3472">3472</span>
<span id="3473">3473</span>
<span id="3474">3474</span>
<span id="3475">3475</span>
<span id="3476">3476</span>
<span id="3477">3477</span>
<span id="3478">3478</span>
<span id="3479">3479</span>
<span id="3480">3480</span>
<span id="3481">3481</span>
<span id="3482">3482</span>
<span id="3483">3483</span>
<span id="3484">3484</span>
<span id="3485">3485</span>
<span id="3486">3486</span>
<span id="3487">3487</span>
<span id="3488">3488</span>
<span id="3489">3489</span>
<span id="3490">3490</span>
<span id="3491">3491</span>
<span id="3492">3492</span>
<span id="3493">3493</span>
<span id="3494">3494</span>
<span id="3495">3495</span>
<span id="3496">3496</span>
<span id="3497">3497</span>
<span id="3498">3498</span>
<span id="3499">3499</span>
<span id="3500">3500</span>
<span id="3501">3501</span>
<span id="3502">3502</span>
<span id="3503">3503</span>
<span id="3504">3504</span>
<span id="3505">3505</span>
<span id="3506">3506</span>
<span id="3507">3507</span>
<span id="3508">3508</span>
<span id="3509">3509</span>
<span id="3510">3510</span>
<span id="3511">3511</span>
<span id="3512">3512</span>
<span id="3513">3513</span>
<span id="3514">3514</span>
<span id="3515">3515</span>
<span id="3516">3516</span>
<span id="3517">3517</span>
<span id="3518">3518</span>
<span id="3519">3519</span>
<span id="3520">3520</span>
<span id="3521">3521</span>
<span id="3522">3522</span>
<span id="3523">3523</span>
<span id="3524">3524</span>
<span id="3525">3525</span>
<span id="3526">3526</span>
<span id="3527">3527</span>
<span id="3528">3528</span>
<span id="3529">3529</span>
<span id="3530">3530</span>
<span id="3531">3531</span>
<span id="3532">3532</span>
<span id="3533">3533</span>
<span id="3534">3534</span>
<span id="3535">3535</span>
<span id="3536">3536</span>
<span id="3537">3537</span>
<span id="3538">3538</span>
<span id="3539">3539</span>
<span id="3540">3540</span>
<span id="3541">3541</span>
<span id="3542">3542</span>
<span id="3543">3543</span>
<span id="3544">3544</span>
<span id="3545">3545</span>
<span id="3546">3546</span>
<span id="3547">3547</span>
<span id="3548">3548</span>
<span id="3549">3549</span>
<span id="3550">3550</span>
<span id="3551">3551</span>
<span id="3552">3552</span>
<span id="3553">3553</span>
<span id="3554">3554</span>
<span id="3555">3555</span>
<span id="3556">3556</span>
<span id="3557">3557</span>
<span id="3558">3558</span>
<span id="3559">3559</span>
<span id="3560">3560</span>
<span id="3561">3561</span>
<span id="3562">3562</span>
<span id="3563">3563</span>
<span id="3564">3564</span>
<span id="3565">3565</span>
<span id="3566">3566</span>
<span id="3567">3567</span>
<span id="3568">3568</span>
<span id="3569">3569</span>
<span id="3570">3570</span>
<span id="3571">3571</span>
<span id="3572">3572</span>
<span id="3573">3573</span>
<span id="3574">3574</span>
<span id="3575">3575</span>
<span id="3576">3576</span>
<span id="3577">3577</span>
<span id="3578">3578</span>
<span id="3579">3579</span>
<span id="3580">3580</span>
<span id="3581">3581</span>
<span id="3582">3582</span>
<span id="3583">3583</span>
<span id="3584">3584</span>
<span id="3585">3585</span>
<span id="3586">3586</span>
<span id="3587">3587</span>
<span id="3588">3588</span>
<span id="3589">3589</span>
<span id="3590">3590</span>
<span id="3591">3591</span>
<span id="3592">3592</span>
<span id="3593">3593</span>
<span id="3594">3594</span>
<span id="3595">3595</span>
<span id="3596">3596</span>
<span id="3597">3597</span>
<span id="3598">3598</span>
<span id="3599">3599</span>
<span id="3600">3600</span>
<span id="3601">3601</span>
<span id="3602">3602</span>
<span id="3603">3603</span>
<span id="3604">3604</span>
<span id="3605">3605</span>
<span id="3606">3606</span>
<span id="3607">3607</span>
<span id="3608">3608</span>
<span id="3609">3609</span>
<span id="3610">3610</span>
<span id="3611">3611</span>
<span id="3612">3612</span>
<span id="3613">3613</span>
<span id="3614">3614</span>
<span id="3615">3615</span>
<span id="3616">3616</span>
<span id="3617">3617</span>
<span id="3618">3618</span>
<span id="3619">3619</span>
<span id="3620">3620</span>
<span id="3621">3621</span>
<span id="3622">3622</span>
<span id="3623">3623</span>
<span id="3624">3624</span>
<span id="3625">3625</span>
<span id="3626">3626</span>
<span id="3627">3627</span>
<span id="3628">3628</span>
<span id="3629">3629</span>
<span id="3630">3630</span>
<span id="3631">3631</span>
<span id="3632">3632</span>
<span id="3633">3633</span>
<span id="3634">3634</span>
<span id="3635">3635</span>
<span id="3636">3636</span>
<span id="3637">3637</span>
<span id="3638">3638</span>
<span id="3639">3639</span>
<span id="3640">3640</span>
<span id="3641">3641</span>
<span id="3642">3642</span>
<span id="3643">3643</span>
<span id="3644">3644</span>
<span id="3645">3645</span>
<span id="3646">3646</span>
<span id="3647">3647</span>
<span id="3648">3648</span>
<span id="3649">3649</span>
<span id="3650">3650</span>
<span id="3651">3651</span>
<span id="3652">3652</span>
<span id="3653">3653</span>
<span id="3654">3654</span>
<span id="3655">3655</span>
<span id="3656">3656</span>
<span id="3657">3657</span>
<span id="3658">3658</span>
<span id="3659">3659</span>
<span id="3660">3660</span>
<span id="3661">3661</span>
<span id="3662">3662</span>
<span id="3663">3663</span>
<span id="3664">3664</span>
<span id="3665">3665</span>
<span id="3666">3666</span>
<span id="3667">3667</span>
<span id="3668">3668</span>
<span id="3669">3669</span>
<span id="3670">3670</span>
<span id="3671">3671</span>
<span id="3672">3672</span>
<span id="3673">3673</span>
<span id="3674">3674</span>
<span id="3675">3675</span>
<span id="3676">3676</span>
<span id="3677">3677</span>
<span id="3678">3678</span>
<span id="3679">3679</span>
<span id="3680">3680</span>
<span id="3681">3681</span>
<span id="3682">3682</span>
<span id="3683">3683</span>
<span id="3684">3684</span>
<span id="3685">3685</span>
<span id="3686">3686</span>
<span id="3687">3687</span>
<span id="3688">3688</span>
<span id="3689">3689</span>
<span id="3690">3690</span>
<span id="3691">3691</span>
<span id="3692">3692</span>
<span id="3693">3693</span>
<span id="3694">3694</span>
<span id="3695">3695</span>
<span id="3696">3696</span>
<span id="3697">3697</span>
<span id="3698">3698</span>
<span id="3699">3699</span>
<span id="3700">3700</span>
<span id="3701">3701</span>
<span id="3702">3702</span>
<span id="3703">3703</span>
<span id="3704">3704</span>
<span id="3705">3705</span>
<span id="3706">3706</span>
<span id="3707">3707</span>
<span id="3708">3708</span>
<span id="3709">3709</span>
<span id="3710">3710</span>
<span id="3711">3711</span>
<span id="3712">3712</span>
<span id="3713">3713</span>
<span id="3714">3714</span>
<span id="3715">3715</span>
<span id="3716">3716</span>
<span id="3717">3717</span>
<span id="3718">3718</span>
<span id="3719">3719</span>
<span id="3720">3720</span>
<span id="3721">3721</span>
<span id="3722">3722</span>
<span id="3723">3723</span>
<span id="3724">3724</span>
<span id="3725">3725</span>
<span id="3726">3726</span>
<span id="3727">3727</span>
<span id="3728">3728</span>
<span id="3729">3729</span>
<span id="3730">3730</span>
<span id="3731">3731</span>
<span id="3732">3732</span>
<span id="3733">3733</span>
<span id="3734">3734</span>
<span id="3735">3735</span>
<span id="3736">3736</span>
<span id="3737">3737</span>
<span id="3738">3738</span>
<span id="3739">3739</span>
<span id="3740">3740</span>
<span id="3741">3741</span>
<span id="3742">3742</span>
<span id="3743">3743</span>
<span id="3744">3744</span>
<span id="3745">3745</span>
<span id="3746">3746</span>
<span id="3747">3747</span>
<span id="3748">3748</span>
<span id="3749">3749</span>
<span id="3750">3750</span>
<span id="3751">3751</span>
<span id="3752">3752</span>
<span id="3753">3753</span>
<span id="3754">3754</span>
<span id="3755">3755</span>
<span id="3756">3756</span>
<span id="3757">3757</span>
<span id="3758">3758</span>
<span id="3759">3759</span>
<span id="3760">3760</span>
<span id="3761">3761</span>
<span id="3762">3762</span>
<span id="3763">3763</span>
<span id="3764">3764</span>
<span id="3765">3765</span>
<span id="3766">3766</span>
<span id="3767">3767</span>
<span id="3768">3768</span>
<span id="3769">3769</span>
<span id="3770">3770</span>
<span id="3771">3771</span>
<span id="3772">3772</span>
<span id="3773">3773</span>
<span id="3774">3774</span>
<span id="3775">3775</span>
<span id="3776">3776</span>
<span id="3777">3777</span>
<span id="3778">3778</span>
<span id="3779">3779</span>
<span id="3780">3780</span>
<span id="3781">3781</span>
<span id="3782">3782</span>
<span id="3783">3783</span>
<span id="3784">3784</span>
<span id="3785">3785</span>
<span id="3786">3786</span>
<span id="3787">3787</span>
<span id="3788">3788</span>
<span id="3789">3789</span>
<span id="3790">3790</span>
<span id="3791">3791</span>
<span id="3792">3792</span>
<span id="3793">3793</span>
<span id="3794">3794</span>
<span id="3795">3795</span>
<span id="3796">3796</span>
<span id="3797">3797</span>
<span id="3798">3798</span>
<span id="3799">3799</span>
<span id="3800">3800</span>
<span id="3801">3801</span>
<span id="3802">3802</span>
<span id="3803">3803</span>
<span id="3804">3804</span>
<span id="3805">3805</span>
<span id="3806">3806</span>
<span id="3807">3807</span>
<span id="3808">3808</span>
<span id="3809">3809</span>
<span id="3810">3810</span>
<span id="3811">3811</span>
<span id="3812">3812</span>
<span id="3813">3813</span>
<span id="3814">3814</span>
<span id="3815">3815</span>
<span id="3816">3816</span>
<span id="3817">3817</span>
<span id="3818">3818</span>
<span id="3819">3819</span>
<span id="3820">3820</span>
<span id="3821">3821</span>
<span id="3822">3822</span>
<span id="3823">3823</span>
<span id="3824">3824</span>
<span id="3825">3825</span>
<span id="3826">3826</span>
<span id="3827">3827</span>
<span id="3828">3828</span>
<span id="3829">3829</span>
<span id="3830">3830</span>
<span id="3831">3831</span>
<span id="3832">3832</span>
<span id="3833">3833</span>
<span id="3834">3834</span>
<span id="3835">3835</span>
<span id="3836">3836</span>
<span id="3837">3837</span>
<span id="3838">3838</span>
<span id="3839">3839</span>
<span id="3840">3840</span>
<span id="3841">3841</span>
<span id="3842">3842</span>
<span id="3843">3843</span>
<span id="3844">3844</span>
<span id="3845">3845</span>
<span id="3846">3846</span>
<span id="3847">3847</span>
<span id="3848">3848</span>
<span id="3849">3849</span>
<span id="3850">3850</span>
<span id="3851">3851</span>
<span id="3852">3852</span>
<span id="3853">3853</span>
<span id="3854">3854</span>
<span id="3855">3855</span>
<span id="3856">3856</span>
<span id="3857">3857</span>
<span id="3858">3858</span>
<span id="3859">3859</span>
<span id="3860">3860</span>
<span id="3861">3861</span>
<span id="3862">3862</span>
<span id="3863">3863</span>
<span id="3864">3864</span>
<span id="3865">3865</span>
<span id="3866">3866</span>
<span id="3867">3867</span>
<span id="3868">3868</span>
<span id="3869">3869</span>
<span id="3870">3870</span>
<span id="3871">3871</span>
<span id="3872">3872</span>
<span id="3873">3873</span>
<span id="3874">3874</span>
<span id="3875">3875</span>
<span id="3876">3876</span>
<span id="3877">3877</span>
<span id="3878">3878</span>
<span id="3879">3879</span>
<span id="3880">3880</span>
<span id="3881">3881</span>
<span id="3882">3882</span>
<span id="3883">3883</span>
<span id="3884">3884</span>
<span id="3885">3885</span>
<span id="3886">3886</span>
<span id="3887">3887</span>
<span id="3888">3888</span>
<span id="3889">3889</span>
<span id="3890">3890</span>
<span id="3891">3891</span>
<span id="3892">3892</span>
<span id="3893">3893</span>
<span id="3894">3894</span>
<span id="3895">3895</span>
<span id="3896">3896</span>
<span id="3897">3897</span>
<span id="3898">3898</span>
<span id="3899">3899</span>
<span id="3900">3900</span>
<span id="3901">3901</span>
<span id="3902">3902</span>
<span id="3903">3903</span>
<span id="3904">3904</span>
<span id="3905">3905</span>
<span id="3906">3906</span>
<span id="3907">3907</span>
<span id="3908">3908</span>
<span id="3909">3909</span>
<span id="3910">3910</span>
<span id="3911">3911</span>
<span id="3912">3912</span>
<span id="3913">3913</span>
<span id="3914">3914</span>
<span id="3915">3915</span>
<span id="3916">3916</span>
<span id="3917">3917</span>
<span id="3918">3918</span>
<span id="3919">3919</span>
<span id="3920">3920</span>
<span id="3921">3921</span>
<span id="3922">3922</span>
<span id="3923">3923</span>
<span id="3924">3924</span>
<span id="3925">3925</span>
<span id="3926">3926</span>
<span id="3927">3927</span>
<span id="3928">3928</span>
<span id="3929">3929</span>
<span id="3930">3930</span>
<span id="3931">3931</span>
<span id="3932">3932</span>
<span id="3933">3933</span>
<span id="3934">3934</span>
<span id="3935">3935</span>
<span id="3936">3936</span>
<span id="3937">3937</span>
<span id="3938">3938</span>
<span id="3939">3939</span>
<span id="3940">3940</span>
<span id="3941">3941</span>
<span id="3942">3942</span>
<span id="3943">3943</span>
<span id="3944">3944</span>
<span id="3945">3945</span>
<span id="3946">3946</span>
<span id="3947">3947</span>
<span id="3948">3948</span>
<span id="3949">3949</span>
<span id="3950">3950</span>
<span id="3951">3951</span>
<span id="3952">3952</span>
<span id="3953">3953</span>
<span id="3954">3954</span>
<span id="3955">3955</span>
<span id="3956">3956</span>
<span id="3957">3957</span>
<span id="3958">3958</span>
<span id="3959">3959</span>
<span id="3960">3960</span>
<span id="3961">3961</span>
<span id="3962">3962</span>
<span id="3963">3963</span>
<span id="3964">3964</span>
<span id="3965">3965</span>
<span id="3966">3966</span>
<span id="3967">3967</span>
<span id="3968">3968</span>
<span id="3969">3969</span>
<span id="3970">3970</span>
<span id="3971">3971</span>
<span id="3972">3972</span>
<span id="3973">3973</span>
<span id="3974">3974</span>
<span id="3975">3975</span>
<span id="3976">3976</span>
<span id="3977">3977</span>
<span id="3978">3978</span>
<span id="3979">3979</span>
<span id="3980">3980</span>
<span id="3981">3981</span>
<span id="3982">3982</span>
<span id="3983">3983</span>
<span id="3984">3984</span>
<span id="3985">3985</span>
<span id="3986">3986</span>
<span id="3987">3987</span>
<span id="3988">3988</span>
<span id="3989">3989</span>
<span id="3990">3990</span>
<span id="3991">3991</span>
<span id="3992">3992</span>
<span id="3993">3993</span>
<span id="3994">3994</span>
<span id="3995">3995</span>
<span id="3996">3996</span>
<span id="3997">3997</span>
<span id="3998">3998</span>
<span id="3999">3999</span>
<span id="4000">4000</span>
<span id="4001">4001</span>
<span id="4002">4002</span>
<span id="4003">4003</span>
<span id="4004">4004</span>
<span id="4005">4005</span>
<span id="4006">4006</span>
<span id="4007">4007</span>
<span id="4008">4008</span>
<span id="4009">4009</span>
<span id="4010">4010</span>
<span id="4011">4011</span>
<span id="4012">4012</span>
<span id="4013">4013</span>
<span id="4014">4014</span>
<span id="4015">4015</span>
<span id="4016">4016</span>
<span id="4017">4017</span>
<span id="4018">4018</span>
<span id="4019">4019</span>
<span id="4020">4020</span>
<span id="4021">4021</span>
<span id="4022">4022</span>
<span id="4023">4023</span>
<span id="4024">4024</span>
<span id="4025">4025</span>
<span id="4026">4026</span>
<span id="4027">4027</span>
<span id="4028">4028</span>
<span id="4029">4029</span>
<span id="4030">4030</span>
<span id="4031">4031</span>
<span id="4032">4032</span>
<span id="4033">4033</span>
<span id="4034">4034</span>
<span id="4035">4035</span>
<span id="4036">4036</span>
<span id="4037">4037</span>
<span id="4038">4038</span>
<span id="4039">4039</span>
<span id="4040">4040</span>
<span id="4041">4041</span>
<span id="4042">4042</span>
<span id="4043">4043</span>
<span id="4044">4044</span>
<span id="4045">4045</span>
<span id="4046">4046</span>
<span id="4047">4047</span>
<span id="4048">4048</span>
<span id="4049">4049</span>
<span id="4050">4050</span>
<span id="4051">4051</span>
<span id="4052">4052</span>
<span id="4053">4053</span>
<span id="4054">4054</span>
<span id="4055">4055</span>
<span id="4056">4056</span>
<span id="4057">4057</span>
<span id="4058">4058</span>
<span id="4059">4059</span>
<span id="4060">4060</span>
<span id="4061">4061</span>
<span id="4062">4062</span>
<span id="4063">4063</span>
<span id="4064">4064</span>
<span id="4065">4065</span>
<span id="4066">4066</span>
<span id="4067">4067</span>
<span id="4068">4068</span>
<span id="4069">4069</span>
<span id="4070">4070</span>
<span id="4071">4071</span>
<span id="4072">4072</span>
<span id="4073">4073</span>
<span id="4074">4074</span>
<span id="4075">4075</span>
<span id="4076">4076</span>
<span id="4077">4077</span>
<span id="4078">4078</span>
<span id="4079">4079</span>
<span id="4080">4080</span>
<span id="4081">4081</span>
<span id="4082">4082</span>
<span id="4083">4083</span>
<span id="4084">4084</span>
<span id="4085">4085</span>
<span id="4086">4086</span>
<span id="4087">4087</span>
<span id="4088">4088</span>
<span id="4089">4089</span>
<span id="4090">4090</span>
<span id="4091">4091</span>
<span id="4092">4092</span>
<span id="4093">4093</span>
<span id="4094">4094</span>
<span id="4095">4095</span>
<span id="4096">4096</span>
<span id="4097">4097</span>
<span id="4098">4098</span>
<span id="4099">4099</span>
<span id="4100">4100</span>
<span id="4101">4101</span>
<span id="4102">4102</span>
<span id="4103">4103</span>
<span id="4104">4104</span>
<span id="4105">4105</span>
<span id="4106">4106</span>
<span id="4107">4107</span>
<span id="4108">4108</span>
<span id="4109">4109</span>
<span id="4110">4110</span>
<span id="4111">4111</span>
<span id="4112">4112</span>
<span id="4113">4113</span>
<span id="4114">4114</span>
<span id="4115">4115</span>
<span id="4116">4116</span>
<span id="4117">4117</span>
<span id="4118">4118</span>
<span id="4119">4119</span>
<span id="4120">4120</span>
<span id="4121">4121</span>
<span id="4122">4122</span>
<span id="4123">4123</span>
<span id="4124">4124</span>
<span id="4125">4125</span>
<span id="4126">4126</span>
<span id="4127">4127</span>
<span id="4128">4128</span>
<span id="4129">4129</span>
<span id="4130">4130</span>
<span id="4131">4131</span>
<span id="4132">4132</span>
<span id="4133">4133</span>
<span id="4134">4134</span>
<span id="4135">4135</span>
<span id="4136">4136</span>
<span id="4137">4137</span>
<span id="4138">4138</span>
<span id="4139">4139</span>
<span id="4140">4140</span>
<span id="4141">4141</span>
<span id="4142">4142</span>
<span id="4143">4143</span>
<span id="4144">4144</span>
<span id="4145">4145</span>
<span id="4146">4146</span>
<span id="4147">4147</span>
<span id="4148">4148</span>
<span id="4149">4149</span>
<span id="4150">4150</span>
<span id="4151">4151</span>
<span id="4152">4152</span>
<span id="4153">4153</span>
<span id="4154">4154</span>
<span id="4155">4155</span>
<span id="4156">4156</span>
<span id="4157">4157</span>
<span id="4158">4158</span>
<span id="4159">4159</span>
<span id="4160">4160</span>
<span id="4161">4161</span>
<span id="4162">4162</span>
<span id="4163">4163</span>
<span id="4164">4164</span>
<span id="4165">4165</span>
<span id="4166">4166</span>
<span id="4167">4167</span>
<span id="4168">4168</span>
<span id="4169">4169</span>
<span id="4170">4170</span>
<span id="4171">4171</span>
<span id="4172">4172</span>
<span id="4173">4173</span>
<span id="4174">4174</span>
<span id="4175">4175</span>
<span id="4176">4176</span>
<span id="4177">4177</span>
<span id="4178">4178</span>
<span id="4179">4179</span>
<span id="4180">4180</span>
<span id="4181">4181</span>
<span id="4182">4182</span>
<span id="4183">4183</span>
<span id="4184">4184</span>
<span id="4185">4185</span>
<span id="4186">4186</span>
<span id="4187">4187</span>
<span id="4188">4188</span>
<span id="4189">4189</span>
<span id="4190">4190</span>
<span id="4191">4191</span>
<span id="4192">4192</span>
<span id="4193">4193</span>
<span id="4194">4194</span>
<span id="4195">4195</span>
<span id="4196">4196</span>
<span id="4197">4197</span>
<span id="4198">4198</span>
<span id="4199">4199</span>
<span id="4200">4200</span>
<span id="4201">4201</span>
<span id="4202">4202</span>
<span id="4203">4203</span>
<span id="4204">4204</span>
<span id="4205">4205</span>
<span id="4206">4206</span>
<span id="4207">4207</span>
<span id="4208">4208</span>
<span id="4209">4209</span>
<span id="4210">4210</span>
<span id="4211">4211</span>
<span id="4212">4212</span>
<span id="4213">4213</span>
<span id="4214">4214</span>
<span id="4215">4215</span>
<span id="4216">4216</span>
<span id="4217">4217</span>
<span id="4218">4218</span>
<span id="4219">4219</span>
<span id="4220">4220</span>
<span id="4221">4221</span>
<span id="4222">4222</span>
<span id="4223">4223</span>
<span id="4224">4224</span>
<span id="4225">4225</span>
<span id="4226">4226</span>
<span id="4227">4227</span>
<span id="4228">4228</span>
<span id="4229">4229</span>
<span id="4230">4230</span>
<span id="4231">4231</span>
<span id="4232">4232</span>
<span id="4233">4233</span>
<span id="4234">4234</span>
<span id="4235">4235</span>
<span id="4236">4236</span>
<span id="4237">4237</span>
<span id="4238">4238</span>
<span id="4239">4239</span>
<span id="4240">4240</span>
<span id="4241">4241</span>
<span id="4242">4242</span>
<span id="4243">4243</span>
<span id="4244">4244</span>
<span id="4245">4245</span>
<span id="4246">4246</span>
<span id="4247">4247</span>
<span id="4248">4248</span>
<span id="4249">4249</span>
<span id="4250">4250</span>
<span id="4251">4251</span>
<span id="4252">4252</span>
<span id="4253">4253</span>
<span id="4254">4254</span>
<span id="4255">4255</span>
<span id="4256">4256</span>
<span id="4257">4257</span>
<span id="4258">4258</span>
<span id="4259">4259</span>
<span id="4260">4260</span>
<span id="4261">4261</span>
<span id="4262">4262</span>
<span id="4263">4263</span>
<span id="4264">4264</span>
<span id="4265">4265</span>
<span id="4266">4266</span>
<span id="4267">4267</span>
<span id="4268">4268</span>
<span id="4269">4269</span>
<span id="4270">4270</span>
<span id="4271">4271</span>
<span id="4272">4272</span>
<span id="4273">4273</span>
<span id="4274">4274</span>
<span id="4275">4275</span>
<span id="4276">4276</span>
<span id="4277">4277</span>
<span id="4278">4278</span>
<span id="4279">4279</span>
<span id="4280">4280</span>
<span id="4281">4281</span>
<span id="4282">4282</span>
<span id="4283">4283</span>
<span id="4284">4284</span>
<span id="4285">4285</span>
<span id="4286">4286</span>
<span id="4287">4287</span>
<span id="4288">4288</span>
<span id="4289">4289</span>
<span id="4290">4290</span>
<span id="4291">4291</span>
<span id="4292">4292</span>
<span id="4293">4293</span>
<span id="4294">4294</span>
<span id="4295">4295</span>
<span id="4296">4296</span>
<span id="4297">4297</span>
<span id="4298">4298</span>
<span id="4299">4299</span>
<span id="4300">4300</span>
<span id="4301">4301</span>
<span id="4302">4302</span>
<span id="4303">4303</span>
<span id="4304">4304</span>
<span id="4305">4305</span>
<span id="4306">4306</span>
<span id="4307">4307</span>
<span id="4308">4308</span>
<span id="4309">4309</span>
<span id="4310">4310</span>
<span id="4311">4311</span>
<span id="4312">4312</span>
<span id="4313">4313</span>
<span id="4314">4314</span>
<span id="4315">4315</span>
<span id="4316">4316</span>
<span id="4317">4317</span>
<span id="4318">4318</span>
<span id="4319">4319</span>
<span id="4320">4320</span>
<span id="4321">4321</span>
<span id="4322">4322</span>
<span id="4323">4323</span>
<span id="4324">4324</span>
<span id="4325">4325</span>
<span id="4326">4326</span>
<span id="4327">4327</span>
<span id="4328">4328</span>
<span id="4329">4329</span>
<span id="4330">4330</span>
<span id="4331">4331</span>
<span id="4332">4332</span>
<span id="4333">4333</span>
<span id="4334">4334</span>
<span id="4335">4335</span>
<span id="4336">4336</span>
<span id="4337">4337</span>
<span id="4338">4338</span>
<span id="4339">4339</span>
<span id="4340">4340</span>
<span id="4341">4341</span>
<span id="4342">4342</span>
<span id="4343">4343</span>
<span id="4344">4344</span>
<span id="4345">4345</span>
<span id="4346">4346</span>
<span id="4347">4347</span>
<span id="4348">4348</span>
<span id="4349">4349</span>
<span id="4350">4350</span>
<span id="4351">4351</span>
<span id="4352">4352</span>
<span id="4353">4353</span>
<span id="4354">4354</span>
<span id="4355">4355</span>
<span id="4356">4356</span>
<span id="4357">4357</span>
<span id="4358">4358</span>
<span id="4359">4359</span>
<span id="4360">4360</span>
<span id="4361">4361</span>
<span id="4362">4362</span>
<span id="4363">4363</span>
<span id="4364">4364</span>
<span id="4365">4365</span>
<span id="4366">4366</span>
<span id="4367">4367</span>
<span id="4368">4368</span>
<span id="4369">4369</span>
<span id="4370">4370</span>
<span id="4371">4371</span>
<span id="4372">4372</span>
<span id="4373">4373</span>
<span id="4374">4374</span>
<span id="4375">4375</span>
<span id="4376">4376</span>
<span id="4377">4377</span>
<span id="4378">4378</span>
<span id="4379">4379</span>
<span id="4380">4380</span>
<span id="4381">4381</span>
<span id="4382">4382</span>
<span id="4383">4383</span>
<span id="4384">4384</span>
<span id="4385">4385</span>
<span id="4386">4386</span>
<span id="4387">4387</span>
<span id="4388">4388</span>
<span id="4389">4389</span>
<span id="4390">4390</span>
<span id="4391">4391</span>
<span id="4392">4392</span>
<span id="4393">4393</span>
<span id="4394">4394</span>
<span id="4395">4395</span>
<span id="4396">4396</span>
<span id="4397">4397</span>
<span id="4398">4398</span>
<span id="4399">4399</span>
<span id="4400">4400</span>
<span id="4401">4401</span>
<span id="4402">4402</span>
<span id="4403">4403</span>
<span id="4404">4404</span>
<span id="4405">4405</span>
<span id="4406">4406</span>
<span id="4407">4407</span>
<span id="4408">4408</span>
<span id="4409">4409</span>
<span id="4410">4410</span>
<span id="4411">4411</span>
<span id="4412">4412</span>
<span id="4413">4413</span>
<span id="4414">4414</span>
<span id="4415">4415</span>
<span id="4416">4416</span>
<span id="4417">4417</span>
<span id="4418">4418</span>
<span id="4419">4419</span>
<span id="4420">4420</span>
<span id="4421">4421</span>
<span id="4422">4422</span>
<span id="4423">4423</span>
<span id="4424">4424</span>
<span id="4425">4425</span>
<span id="4426">4426</span>
<span id="4427">4427</span>
<span id="4428">4428</span>
<span id="4429">4429</span>
<span id="4430">4430</span>
<span id="4431">4431</span>
<span id="4432">4432</span>
<span id="4433">4433</span>
<span id="4434">4434</span>
<span id="4435">4435</span>
<span id="4436">4436</span>
<span id="4437">4437</span>
<span id="4438">4438</span>
<span id="4439">4439</span>
<span id="4440">4440</span>
<span id="4441">4441</span>
<span id="4442">4442</span>
<span id="4443">4443</span>
<span id="4444">4444</span>
<span id="4445">4445</span>
<span id="4446">4446</span>
<span id="4447">4447</span>
<span id="4448">4448</span>
<span id="4449">4449</span>
<span id="4450">4450</span>
<span id="4451">4451</span>
<span id="4452">4452</span>
<span id="4453">4453</span>
<span id="4454">4454</span>
<span id="4455">4455</span>
<span id="4456">4456</span>
<span id="4457">4457</span>
<span id="4458">4458</span>
<span id="4459">4459</span>
<span id="4460">4460</span>
<span id="4461">4461</span>
<span id="4462">4462</span>
<span id="4463">4463</span>
<span id="4464">4464</span>
<span id="4465">4465</span>
<span id="4466">4466</span>
<span id="4467">4467</span>
<span id="4468">4468</span>
<span id="4469">4469</span>
<span id="4470">4470</span>
<span id="4471">4471</span>
<span id="4472">4472</span>
<span id="4473">4473</span>
<span id="4474">4474</span>
<span id="4475">4475</span>
<span id="4476">4476</span>
<span id="4477">4477</span>
<span id="4478">4478</span>
<span id="4479">4479</span>
<span id="4480">4480</span>
<span id="4481">4481</span>
<span id="4482">4482</span>
<span id="4483">4483</span>
<span id="4484">4484</span>
<span id="4485">4485</span>
<span id="4486">4486</span>
<span id="4487">4487</span>
<span id="4488">4488</span>
<span id="4489">4489</span>
<span id="4490">4490</span>
<span id="4491">4491</span>
<span id="4492">4492</span>
<span id="4493">4493</span>
<span id="4494">4494</span>
<span id="4495">4495</span>
<span id="4496">4496</span>
<span id="4497">4497</span>
<span id="4498">4498</span>
<span id="4499">4499</span>
<span id="4500">4500</span>
<span id="4501">4501</span>
<span id="4502">4502</span>
<span id="4503">4503</span>
<span id="4504">4504</span>
<span id="4505">4505</span>
<span id="4506">4506</span>
<span id="4507">4507</span>
<span id="4508">4508</span>
<span id="4509">4509</span>
<span id="4510">4510</span>
<span id="4511">4511</span>
<span id="4512">4512</span>
<span id="4513">4513</span>
<span id="4514">4514</span>
<span id="4515">4515</span>
<span id="4516">4516</span>
<span id="4517">4517</span>
<span id="4518">4518</span>
<span id="4519">4519</span>
<span id="4520">4520</span>
<span id="4521">4521</span>
<span id="4522">4522</span>
<span id="4523">4523</span>
<span id="4524">4524</span>
<span id="4525">4525</span>
<span id="4526">4526</span>
<span id="4527">4527</span>
<span id="4528">4528</span>
<span id="4529">4529</span>
<span id="4530">4530</span>
<span id="4531">4531</span>
<span id="4532">4532</span>
<span id="4533">4533</span>
<span id="4534">4534</span>
<span id="4535">4535</span>
<span id="4536">4536</span>
<span id="4537">4537</span>
<span id="4538">4538</span>
<span id="4539">4539</span>
<span id="4540">4540</span>
<span id="4541">4541</span>
<span id="4542">4542</span>
<span id="4543">4543</span>
<span id="4544">4544</span>
<span id="4545">4545</span>
<span id="4546">4546</span>
<span id="4547">4547</span>
<span id="4548">4548</span>
<span id="4549">4549</span>
<span id="4550">4550</span>
<span id="4551">4551</span>
<span id="4552">4552</span>
<span id="4553">4553</span>
<span id="4554">4554</span>
<span id="4555">4555</span>
<span id="4556">4556</span>
<span id="4557">4557</span>
<span id="4558">4558</span>
<span id="4559">4559</span>
<span id="4560">4560</span>
<span id="4561">4561</span>
<span id="4562">4562</span>
<span id="4563">4563</span>
<span id="4564">4564</span>
<span id="4565">4565</span>
<span id="4566">4566</span>
<span id="4567">4567</span>
<span id="4568">4568</span>
<span id="4569">4569</span>
<span id="4570">4570</span>
<span id="4571">4571</span>
<span id="4572">4572</span>
<span id="4573">4573</span>
<span id="4574">4574</span>
<span id="4575">4575</span>
<span id="4576">4576</span>
<span id="4577">4577</span>
<span id="4578">4578</span>
<span id="4579">4579</span>
<span id="4580">4580</span>
<span id="4581">4581</span>
<span id="4582">4582</span>
<span id="4583">4583</span>
<span id="4584">4584</span>
<span id="4585">4585</span>
<span id="4586">4586</span>
<span id="4587">4587</span>
<span id="4588">4588</span>
<span id="4589">4589</span>
<span id="4590">4590</span>
<span id="4591">4591</span>
<span id="4592">4592</span>
<span id="4593">4593</span>
<span id="4594">4594</span>
<span id="4595">4595</span>
<span id="4596">4596</span>
<span id="4597">4597</span>
<span id="4598">4598</span>
<span id="4599">4599</span>
<span id="4600">4600</span>
<span id="4601">4601</span>
<span id="4602">4602</span>
<span id="4603">4603</span>
<span id="4604">4604</span>
<span id="4605">4605</span>
<span id="4606">4606</span>
<span id="4607">4607</span>
<span id="4608">4608</span>
<span id="4609">4609</span>
<span id="4610">4610</span>
<span id="4611">4611</span>
<span id="4612">4612</span>
<span id="4613">4613</span>
<span id="4614">4614</span>
<span id="4615">4615</span>
<span id="4616">4616</span>
<span id="4617">4617</span>
<span id="4618">4618</span>
<span id="4619">4619</span>
<span id="4620">4620</span>
<span id="4621">4621</span>
<span id="4622">4622</span>
<span id="4623">4623</span>
<span id="4624">4624</span>
<span id="4625">4625</span>
<span id="4626">4626</span>
<span id="4627">4627</span>
<span id="4628">4628</span>
<span id="4629">4629</span>
<span id="4630">4630</span>
<span id="4631">4631</span>
<span id="4632">4632</span>
<span id="4633">4633</span>
<span id="4634">4634</span>
<span id="4635">4635</span>
<span id="4636">4636</span>
<span id="4637">4637</span>
<span id="4638">4638</span>
<span id="4639">4639</span>
<span id="4640">4640</span>
<span id="4641">4641</span>
<span id="4642">4642</span>
<span id="4643">4643</span>
<span id="4644">4644</span>
<span id="4645">4645</span>
<span id="4646">4646</span>
<span id="4647">4647</span>
<span id="4648">4648</span>
<span id="4649">4649</span>
<span id="4650">4650</span>
<span id="4651">4651</span>
<span id="4652">4652</span>
<span id="4653">4653</span>
<span id="4654">4654</span>
<span id="4655">4655</span>
<span id="4656">4656</span>
<span id="4657">4657</span>
<span id="4658">4658</span>
<span id="4659">4659</span>
<span id="4660">4660</span>
<span id="4661">4661</span>
<span id="4662">4662</span>
<span id="4663">4663</span>
<span id="4664">4664</span>
<span id="4665">4665</span>
<span id="4666">4666</span>
<span id="4667">4667</span>
<span id="4668">4668</span>
<span id="4669">4669</span>
<span id="4670">4670</span>
<span id="4671">4671</span>
<span id="4672">4672</span>
<span id="4673">4673</span>
<span id="4674">4674</span>
<span id="4675">4675</span>
<span id="4676">4676</span>
<span id="4677">4677</span>
<span id="4678">4678</span>
<span id="4679">4679</span>
<span id="4680">4680</span>
<span id="4681">4681</span>
<span id="4682">4682</span>
<span id="4683">4683</span>
<span id="4684">4684</span>
<span id="4685">4685</span>
<span id="4686">4686</span>
<span id="4687">4687</span>
<span id="4688">4688</span>
<span id="4689">4689</span>
<span id="4690">4690</span>
<span id="4691">4691</span>
<span id="4692">4692</span>
<span id="4693">4693</span>
<span id="4694">4694</span>
<span id="4695">4695</span>
<span id="4696">4696</span>
<span id="4697">4697</span>
<span id="4698">4698</span>
<span id="4699">4699</span>
<span id="4700">4700</span>
<span id="4701">4701</span>
<span id="4702">4702</span>
<span id="4703">4703</span>
<span id="4704">4704</span>
<span id="4705">4705</span>
<span id="4706">4706</span>
<span id="4707">4707</span>
<span id="4708">4708</span>
<span id="4709">4709</span>
<span id="4710">4710</span>
<span id="4711">4711</span>
<span id="4712">4712</span>
<span id="4713">4713</span>
<span id="4714">4714</span>
<span id="4715">4715</span>
<span id="4716">4716</span>
<span id="4717">4717</span>
<span id="4718">4718</span>
<span id="4719">4719</span>
<span id="4720">4720</span>
<span id="4721">4721</span>
<span id="4722">4722</span>
<span id="4723">4723</span>
<span id="4724">4724</span>
<span id="4725">4725</span>
<span id="4726">4726</span>
<span id="4727">4727</span>
<span id="4728">4728</span>
<span id="4729">4729</span>
<span id="4730">4730</span>
<span id="4731">4731</span>
<span id="4732">4732</span>
<span id="4733">4733</span>
<span id="4734">4734</span>
<span id="4735">4735</span>
<span id="4736">4736</span>
<span id="4737">4737</span>
<span id="4738">4738</span>
<span id="4739">4739</span>
<span id="4740">4740</span>
<span id="4741">4741</span>
<span id="4742">4742</span>
<span id="4743">4743</span>
<span id="4744">4744</span>
<span id="4745">4745</span>
<span id="4746">4746</span>
<span id="4747">4747</span>
<span id="4748">4748</span>
<span id="4749">4749</span>
<span id="4750">4750</span>
<span id="4751">4751</span>
<span id="4752">4752</span>
<span id="4753">4753</span>
<span id="4754">4754</span>
<span id="4755">4755</span>
<span id="4756">4756</span>
<span id="4757">4757</span>
<span id="4758">4758</span>
<span id="4759">4759</span>
<span id="4760">4760</span>
<span id="4761">4761</span>
<span id="4762">4762</span>
<span id="4763">4763</span>
<span id="4764">4764</span>
<span id="4765">4765</span>
<span id="4766">4766</span>
<span id="4767">4767</span>
<span id="4768">4768</span>
<span id="4769">4769</span>
<span id="4770">4770</span>
<span id="4771">4771</span>
<span id="4772">4772</span>
<span id="4773">4773</span>
<span id="4774">4774</span>
<span id="4775">4775</span>
<span id="4776">4776</span>
<span id="4777">4777</span>
<span id="4778">4778</span>
<span id="4779">4779</span>
<span id="4780">4780</span>
<span id="4781">4781</span>
<span id="4782">4782</span>
<span id="4783">4783</span>
<span id="4784">4784</span>
<span id="4785">4785</span>
<span id="4786">4786</span>
<span id="4787">4787</span>
<span id="4788">4788</span>
<span id="4789">4789</span>
<span id="4790">4790</span>
<span id="4791">4791</span>
<span id="4792">4792</span>
<span id="4793">4793</span>
<span id="4794">4794</span>
<span id="4795">4795</span>
<span id="4796">4796</span>
<span id="4797">4797</span>
<span id="4798">4798</span>
<span id="4799">4799</span>
<span id="4800">4800</span>
<span id="4801">4801</span>
<span id="4802">4802</span>
<span id="4803">4803</span>
<span id="4804">4804</span>
<span id="4805">4805</span>
<span id="4806">4806</span>
<span id="4807">4807</span>
<span id="4808">4808</span>
<span id="4809">4809</span>
<span id="4810">4810</span>
<span id="4811">4811</span>
<span id="4812">4812</span>
<span id="4813">4813</span>
<span id="4814">4814</span>
<span id="4815">4815</span>
<span id="4816">4816</span>
<span id="4817">4817</span>
<span id="4818">4818</span>
<span id="4819">4819</span>
<span id="4820">4820</span>
<span id="4821">4821</span>
<span id="4822">4822</span>
<span id="4823">4823</span>
<span id="4824">4824</span>
<span id="4825">4825</span>
<span id="4826">4826</span>
<span id="4827">4827</span>
<span id="4828">4828</span>
<span id="4829">4829</span>
<span id="4830">4830</span>
<span id="4831">4831</span>
<span id="4832">4832</span>
<span id="4833">4833</span>
<span id="4834">4834</span>
<span id="4835">4835</span>
<span id="4836">4836</span>
<span id="4837">4837</span>
<span id="4838">4838</span>
<span id="4839">4839</span>
<span id="4840">4840</span>
<span id="4841">4841</span>
<span id="4842">4842</span>
<span id="4843">4843</span>
<span id="4844">4844</span>
<span id="4845">4845</span>
<span id="4846">4846</span>
<span id="4847">4847</span>
<span id="4848">4848</span>
<span id="4849">4849</span>
<span id="4850">4850</span>
<span id="4851">4851</span>
<span id="4852">4852</span>
<span id="4853">4853</span>
<span id="4854">4854</span>
<span id="4855">4855</span>
<span id="4856">4856</span>
<span id="4857">4857</span>
<span id="4858">4858</span>
<span id="4859">4859</span>
<span id="4860">4860</span>
<span id="4861">4861</span>
<span id="4862">4862</span>
<span id="4863">4863</span>
<span id="4864">4864</span>
<span id="4865">4865</span>
<span id="4866">4866</span>
<span id="4867">4867</span>
<span id="4868">4868</span>
<span id="4869">4869</span>
<span id="4870">4870</span>
<span id="4871">4871</span>
<span id="4872">4872</span>
<span id="4873">4873</span>
<span id="4874">4874</span>
<span id="4875">4875</span>
<span id="4876">4876</span>
<span id="4877">4877</span>
<span id="4878">4878</span>
<span id="4879">4879</span>
<span id="4880">4880</span>
<span id="4881">4881</span>
<span id="4882">4882</span>
<span id="4883">4883</span>
<span id="4884">4884</span>
<span id="4885">4885</span>
<span id="4886">4886</span>
<span id="4887">4887</span>
<span id="4888">4888</span>
<span id="4889">4889</span>
<span id="4890">4890</span>
<span id="4891">4891</span>
<span id="4892">4892</span>
<span id="4893">4893</span>
<span id="4894">4894</span>
<span id="4895">4895</span>
<span id="4896">4896</span>
<span id="4897">4897</span>
<span id="4898">4898</span>
<span id="4899">4899</span>
<span id="4900">4900</span>
<span id="4901">4901</span>
<span id="4902">4902</span>
<span id="4903">4903</span>
<span id="4904">4904</span>
<span id="4905">4905</span>
<span id="4906">4906</span>
<span id="4907">4907</span>
<span id="4908">4908</span>
<span id="4909">4909</span>
<span id="4910">4910</span>
<span id="4911">4911</span>
<span id="4912">4912</span>
<span id="4913">4913</span>
<span id="4914">4914</span>
<span id="4915">4915</span>
<span id="4916">4916</span>
<span id="4917">4917</span>
<span id="4918">4918</span>
<span id="4919">4919</span>
<span id="4920">4920</span>
<span id="4921">4921</span>
<span id="4922">4922</span>
<span id="4923">4923</span>
<span id="4924">4924</span>
<span id="4925">4925</span>
<span id="4926">4926</span>
<span id="4927">4927</span>
<span id="4928">4928</span>
<span id="4929">4929</span>
<span id="4930">4930</span>
<span id="4931">4931</span>
<span id="4932">4932</span>
<span id="4933">4933</span>
<span id="4934">4934</span>
<span id="4935">4935</span>
<span id="4936">4936</span>
<span id="4937">4937</span>
<span id="4938">4938</span>
<span id="4939">4939</span>
<span id="4940">4940</span>
<span id="4941">4941</span>
<span id="4942">4942</span>
<span id="4943">4943</span>
<span id="4944">4944</span>
<span id="4945">4945</span>
<span id="4946">4946</span>
<span id="4947">4947</span>
<span id="4948">4948</span>
<span id="4949">4949</span>
<span id="4950">4950</span>
<span id="4951">4951</span>
<span id="4952">4952</span>
<span id="4953">4953</span>
<span id="4954">4954</span>
<span id="4955">4955</span>
<span id="4956">4956</span>
<span id="4957">4957</span>
<span id="4958">4958</span>
<span id="4959">4959</span>
<span id="4960">4960</span>
<span id="4961">4961</span>
<span id="4962">4962</span>
<span id="4963">4963</span>
<span id="4964">4964</span>
<span id="4965">4965</span>
<span id="4966">4966</span>
<span id="4967">4967</span>
<span id="4968">4968</span>
<span id="4969">4969</span>
<span id="4970">4970</span>
<span id="4971">4971</span>
<span id="4972">4972</span>
<span id="4973">4973</span>
<span id="4974">4974</span>
<span id="4975">4975</span>
<span id="4976">4976</span>
<span id="4977">4977</span>
<span id="4978">4978</span>
<span id="4979">4979</span>
<span id="4980">4980</span>
<span id="4981">4981</span>
<span id="4982">4982</span>
<span id="4983">4983</span>
<span id="4984">4984</span>
<span id="4985">4985</span>
<span id="4986">4986</span>
<span id="4987">4987</span>
<span id="4988">4988</span>
<span id="4989">4989</span>
<span id="4990">4990</span>
<span id="4991">4991</span>
<span id="4992">4992</span>
<span id="4993">4993</span>
<span id="4994">4994</span>
<span id="4995">4995</span>
<span id="4996">4996</span>
<span id="4997">4997</span>
<span id="4998">4998</span>
<span id="4999">4999</span>
<span id="5000">5000</span>
<span id="5001">5001</span>
<span id="5002">5002</span>
<span id="5003">5003</span>
<span id="5004">5004</span>
<span id="5005">5005</span>
<span id="5006">5006</span>
<span id="5007">5007</span>
<span id="5008">5008</span>
<span id="5009">5009</span>
<span id="5010">5010</span>
<span id="5011">5011</span>
<span id="5012">5012</span>
<span id="5013">5013</span>
<span id="5014">5014</span>
<span id="5015">5015</span>
<span id="5016">5016</span>
<span id="5017">5017</span>
<span id="5018">5018</span>
<span id="5019">5019</span>
<span id="5020">5020</span>
<span id="5021">5021</span>
<span id="5022">5022</span>
<span id="5023">5023</span>
<span id="5024">5024</span>
<span id="5025">5025</span>
<span id="5026">5026</span>
<span id="5027">5027</span>
<span id="5028">5028</span>
<span id="5029">5029</span>
<span id="5030">5030</span>
<span id="5031">5031</span>
<span id="5032">5032</span>
<span id="5033">5033</span>
<span id="5034">5034</span>
<span id="5035">5035</span>
<span id="5036">5036</span>
<span id="5037">5037</span>
<span id="5038">5038</span>
<span id="5039">5039</span>
<span id="5040">5040</span>
<span id="5041">5041</span>
<span id="5042">5042</span>
<span id="5043">5043</span>
<span id="5044">5044</span>
<span id="5045">5045</span>
<span id="5046">5046</span>
<span id="5047">5047</span>
<span id="5048">5048</span>
<span id="5049">5049</span>
<span id="5050">5050</span>
<span id="5051">5051</span>
<span id="5052">5052</span>
<span id="5053">5053</span>
<span id="5054">5054</span>
<span id="5055">5055</span>
<span id="5056">5056</span>
<span id="5057">5057</span>
<span id="5058">5058</span>
<span id="5059">5059</span>
<span id="5060">5060</span>
<span id="5061">5061</span>
<span id="5062">5062</span>
<span id="5063">5063</span>
<span id="5064">5064</span>
<span id="5065">5065</span>
<span id="5066">5066</span>
<span id="5067">5067</span>
<span id="5068">5068</span>
<span id="5069">5069</span>
<span id="5070">5070</span>
<span id="5071">5071</span>
<span id="5072">5072</span>
<span id="5073">5073</span>
<span id="5074">5074</span>
<span id="5075">5075</span>
<span id="5076">5076</span>
<span id="5077">5077</span>
<span id="5078">5078</span>
<span id="5079">5079</span>
<span id="5080">5080</span>
<span id="5081">5081</span>
<span id="5082">5082</span>
<span id="5083">5083</span>
<span id="5084">5084</span>
<span id="5085">5085</span>
<span id="5086">5086</span>
<span id="5087">5087</span>
<span id="5088">5088</span>
<span id="5089">5089</span>
<span id="5090">5090</span>
<span id="5091">5091</span>
<span id="5092">5092</span>
<span id="5093">5093</span>
<span id="5094">5094</span>
<span id="5095">5095</span>
<span id="5096">5096</span>
<span id="5097">5097</span>
<span id="5098">5098</span>
<span id="5099">5099</span>
<span id="5100">5100</span>
<span id="5101">5101</span>
<span id="5102">5102</span>
<span id="5103">5103</span>
<span id="5104">5104</span>
<span id="5105">5105</span>
<span id="5106">5106</span>
<span id="5107">5107</span>
<span id="5108">5108</span>
<span id="5109">5109</span>
<span id="5110">5110</span>
<span id="5111">5111</span>
<span id="5112">5112</span>
<span id="5113">5113</span>
<span id="5114">5114</span>
<span id="5115">5115</span>
<span id="5116">5116</span>
<span id="5117">5117</span>
<span id="5118">5118</span>
<span id="5119">5119</span>
<span id="5120">5120</span>
<span id="5121">5121</span>
<span id="5122">5122</span>
<span id="5123">5123</span>
<span id="5124">5124</span>
<span id="5125">5125</span>
<span id="5126">5126</span>
<span id="5127">5127</span>
<span id="5128">5128</span>
<span id="5129">5129</span>
<span id="5130">5130</span>
<span id="5131">5131</span>
<span id="5132">5132</span>
<span id="5133">5133</span>
<span id="5134">5134</span>
<span id="5135">5135</span>
<span id="5136">5136</span>
<span id="5137">5137</span>
<span id="5138">5138</span>
<span id="5139">5139</span>
<span id="5140">5140</span>
<span id="5141">5141</span>
<span id="5142">5142</span>
<span id="5143">5143</span>
<span id="5144">5144</span>
<span id="5145">5145</span>
<span id="5146">5146</span>
<span id="5147">5147</span>
<span id="5148">5148</span>
<span id="5149">5149</span>
<span id="5150">5150</span>
<span id="5151">5151</span>
<span id="5152">5152</span>
<span id="5153">5153</span>
<span id="5154">5154</span>
<span id="5155">5155</span>
<span id="5156">5156</span>
<span id="5157">5157</span>
<span id="5158">5158</span>
<span id="5159">5159</span>
<span id="5160">5160</span>
<span id="5161">5161</span>
<span id="5162">5162</span>
<span id="5163">5163</span>
<span id="5164">5164</span>
<span id="5165">5165</span>
<span id="5166">5166</span>
<span id="5167">5167</span>
<span id="5168">5168</span>
<span id="5169">5169</span>
<span id="5170">5170</span>
<span id="5171">5171</span>
<span id="5172">5172</span>
<span id="5173">5173</span>
<span id="5174">5174</span>
<span id="5175">5175</span>
<span id="5176">5176</span>
<span id="5177">5177</span>
<span id="5178">5178</span>
<span id="5179">5179</span>
<span id="5180">5180</span>
<span id="5181">5181</span>
<span id="5182">5182</span>
<span id="5183">5183</span>
<span id="5184">5184</span>
<span id="5185">5185</span>
<span id="5186">5186</span>
<span id="5187">5187</span>
<span id="5188">5188</span>
<span id="5189">5189</span>
<span id="5190">5190</span>
<span id="5191">5191</span>
<span id="5192">5192</span>
<span id="5193">5193</span>
<span id="5194">5194</span>
<span id="5195">5195</span>
<span id="5196">5196</span>
<span id="5197">5197</span>
<span id="5198">5198</span>
<span id="5199">5199</span>
<span id="5200">5200</span>
<span id="5201">5201</span>
<span id="5202">5202</span>
<span id="5203">5203</span>
<span id="5204">5204</span>
<span id="5205">5205</span>
<span id="5206">5206</span>
<span id="5207">5207</span>
<span id="5208">5208</span>
<span id="5209">5209</span>
<span id="5210">5210</span>
<span id="5211">5211</span>
<span id="5212">5212</span>
<span id="5213">5213</span>
<span id="5214">5214</span>
<span id="5215">5215</span>
<span id="5216">5216</span>
<span id="5217">5217</span>
<span id="5218">5218</span>
<span id="5219">5219</span>
<span id="5220">5220</span>
<span id="5221">5221</span>
<span id="5222">5222</span>
<span id="5223">5223</span>
<span id="5224">5224</span>
<span id="5225">5225</span>
<span id="5226">5226</span>
<span id="5227">5227</span>
<span id="5228">5228</span>
<span id="5229">5229</span>
<span id="5230">5230</span>
<span id="5231">5231</span>
<span id="5232">5232</span>
<span id="5233">5233</span>
<span id="5234">5234</span>
<span id="5235">5235</span>
<span id="5236">5236</span>
<span id="5237">5237</span>
<span id="5238">5238</span>
<span id="5239">5239</span>
<span id="5240">5240</span>
<span id="5241">5241</span>
<span id="5242">5242</span>
<span id="5243">5243</span>
<span id="5244">5244</span>
<span id="5245">5245</span>
<span id="5246">5246</span>
<span id="5247">5247</span>
<span id="5248">5248</span>
<span id="5249">5249</span>
<span id="5250">5250</span>
<span id="5251">5251</span>
<span id="5252">5252</span>
<span id="5253">5253</span>
<span id="5254">5254</span>
<span id="5255">5255</span>
<span id="5256">5256</span>
<span id="5257">5257</span>
<span id="5258">5258</span>
<span id="5259">5259</span>
<span id="5260">5260</span>
<span id="5261">5261</span>
<span id="5262">5262</span>
<span id="5263">5263</span>
<span id="5264">5264</span>
<span id="5265">5265</span>
<span id="5266">5266</span>
<span id="5267">5267</span>
<span id="5268">5268</span>
<span id="5269">5269</span>
<span id="5270">5270</span>
<span id="5271">5271</span>
<span id="5272">5272</span>
<span id="5273">5273</span>
<span id="5274">5274</span>
<span id="5275">5275</span>
<span id="5276">5276</span>
<span id="5277">5277</span>
<span id="5278">5278</span>
<span id="5279">5279</span>
<span id="5280">5280</span>
<span id="5281">5281</span>
<span id="5282">5282</span>
<span id="5283">5283</span>
<span id="5284">5284</span>
<span id="5285">5285</span>
<span id="5286">5286</span>
<span id="5287">5287</span>
<span id="5288">5288</span>
<span id="5289">5289</span>
<span id="5290">5290</span>
<span id="5291">5291</span>
<span id="5292">5292</span>
<span id="5293">5293</span>
<span id="5294">5294</span>
<span id="5295">5295</span>
<span id="5296">5296</span>
<span id="5297">5297</span>
<span id="5298">5298</span>
<span id="5299">5299</span>
<span id="5300">5300</span>
<span id="5301">5301</span>
<span id="5302">5302</span>
<span id="5303">5303</span>
<span id="5304">5304</span>
<span id="5305">5305</span>
<span id="5306">5306</span>
<span id="5307">5307</span>
<span id="5308">5308</span>
<span id="5309">5309</span>
<span id="5310">5310</span>
<span id="5311">5311</span>
<span id="5312">5312</span>
<span id="5313">5313</span>
<span id="5314">5314</span>
<span id="5315">5315</span>
<span id="5316">5316</span>
<span id="5317">5317</span>
<span id="5318">5318</span>
<span id="5319">5319</span>
<span id="5320">5320</span>
<span id="5321">5321</span>
<span id="5322">5322</span>
<span id="5323">5323</span>
<span id="5324">5324</span>
<span id="5325">5325</span>
<span id="5326">5326</span>
<span id="5327">5327</span>
<span id="5328">5328</span>
<span id="5329">5329</span>
<span id="5330">5330</span>
<span id="5331">5331</span>
<span id="5332">5332</span>
<span id="5333">5333</span>
<span id="5334">5334</span>
<span id="5335">5335</span>
<span id="5336">5336</span>
<span id="5337">5337</span>
<span id="5338">5338</span>
<span id="5339">5339</span>
<span id="5340">5340</span>
<span id="5341">5341</span>
<span id="5342">5342</span>
<span id="5343">5343</span>
<span id="5344">5344</span>
<span id="5345">5345</span>
<span id="5346">5346</span>
<span id="5347">5347</span>
<span id="5348">5348</span>
<span id="5349">5349</span>
<span id="5350">5350</span>
<span id="5351">5351</span>
<span id="5352">5352</span>
<span id="5353">5353</span>
<span id="5354">5354</span>
<span id="5355">5355</span>
<span id="5356">5356</span>
<span id="5357">5357</span>
<span id="5358">5358</span>
<span id="5359">5359</span>
<span id="5360">5360</span>
<span id="5361">5361</span>
<span id="5362">5362</span>
<span id="5363">5363</span>
<span id="5364">5364</span>
<span id="5365">5365</span>
<span id="5366">5366</span>
<span id="5367">5367</span>
<span id="5368">5368</span>
<span id="5369">5369</span>
<span id="5370">5370</span>
<span id="5371">5371</span>
<span id="5372">5372</span>
<span id="5373">5373</span>
<span id="5374">5374</span>
<span id="5375">5375</span>
<span id="5376">5376</span>
<span id="5377">5377</span>
<span id="5378">5378</span>
<span id="5379">5379</span>
<span id="5380">5380</span>
<span id="5381">5381</span>
<span id="5382">5382</span>
<span id="5383">5383</span>
<span id="5384">5384</span>
<span id="5385">5385</span>
<span id="5386">5386</span>
<span id="5387">5387</span>
<span id="5388">5388</span>
<span id="5389">5389</span>
<span id="5390">5390</span>
<span id="5391">5391</span>
<span id="5392">5392</span>
<span id="5393">5393</span>
<span id="5394">5394</span>
<span id="5395">5395</span>
<span id="5396">5396</span>
<span id="5397">5397</span>
<span id="5398">5398</span>
<span id="5399">5399</span>
<span id="5400">5400</span>
<span id="5401">5401</span>
<span id="5402">5402</span>
<span id="5403">5403</span>
<span id="5404">5404</span>
<span id="5405">5405</span>
<span id="5406">5406</span>
<span id="5407">5407</span>
<span id="5408">5408</span>
<span id="5409">5409</span>
<span id="5410">5410</span>
<span id="5411">5411</span>
<span id="5412">5412</span>
<span id="5413">5413</span>
<span id="5414">5414</span>
<span id="5415">5415</span>
<span id="5416">5416</span>
<span id="5417">5417</span>
<span id="5418">5418</span>
<span id="5419">5419</span>
<span id="5420">5420</span>
<span id="5421">5421</span>
<span id="5422">5422</span>
<span id="5423">5423</span>
<span id="5424">5424</span>
<span id="5425">5425</span>
<span id="5426">5426</span>
<span id="5427">5427</span>
<span id="5428">5428</span>
<span id="5429">5429</span>
<span id="5430">5430</span>
<span id="5431">5431</span>
<span id="5432">5432</span>
<span id="5433">5433</span>
<span id="5434">5434</span>
<span id="5435">5435</span>
<span id="5436">5436</span>
<span id="5437">5437</span>
<span id="5438">5438</span>
<span id="5439">5439</span>
<span id="5440">5440</span>
<span id="5441">5441</span>
<span id="5442">5442</span>
<span id="5443">5443</span>
<span id="5444">5444</span>
<span id="5445">5445</span>
<span id="5446">5446</span>
<span id="5447">5447</span>
<span id="5448">5448</span>
<span id="5449">5449</span>
<span id="5450">5450</span>
<span id="5451">5451</span>
<span id="5452">5452</span>
<span id="5453">5453</span>
<span id="5454">5454</span>
<span id="5455">5455</span>
<span id="5456">5456</span>
<span id="5457">5457</span>
<span id="5458">5458</span>
<span id="5459">5459</span>
<span id="5460">5460</span>
<span id="5461">5461</span>
<span id="5462">5462</span>
<span id="5463">5463</span>
<span id="5464">5464</span>
<span id="5465">5465</span>
<span id="5466">5466</span>
<span id="5467">5467</span>
<span id="5468">5468</span>
<span id="5469">5469</span>
<span id="5470">5470</span>
<span id="5471">5471</span>
<span id="5472">5472</span>
<span id="5473">5473</span>
<span id="5474">5474</span>
<span id="5475">5475</span>
<span id="5476">5476</span>
<span id="5477">5477</span>
<span id="5478">5478</span>
<span id="5479">5479</span>
<span id="5480">5480</span>
<span id="5481">5481</span>
<span id="5482">5482</span>
<span id="5483">5483</span>
<span id="5484">5484</span>
<span id="5485">5485</span>
<span id="5486">5486</span>
<span id="5487">5487</span>
<span id="5488">5488</span>
<span id="5489">5489</span>
<span id="5490">5490</span>
<span id="5491">5491</span>
<span id="5492">5492</span>
<span id="5493">5493</span>
<span id="5494">5494</span>
<span id="5495">5495</span>
<span id="5496">5496</span>
<span id="5497">5497</span>
<span id="5498">5498</span>
<span id="5499">5499</span>
<span id="5500">5500</span>
<span id="5501">5501</span>
<span id="5502">5502</span>
<span id="5503">5503</span>
<span id="5504">5504</span>
<span id="5505">5505</span>
<span id="5506">5506</span>
<span id="5507">5507</span>
<span id="5508">5508</span>
<span id="5509">5509</span>
<span id="5510">5510</span>
<span id="5511">5511</span>
<span id="5512">5512</span>
<span id="5513">5513</span>
<span id="5514">5514</span>
<span id="5515">5515</span>
<span id="5516">5516</span>
<span id="5517">5517</span>
<span id="5518">5518</span>
<span id="5519">5519</span>
<span id="5520">5520</span>
<span id="5521">5521</span>
<span id="5522">5522</span>
<span id="5523">5523</span>
<span id="5524">5524</span>
<span id="5525">5525</span>
<span id="5526">5526</span>
<span id="5527">5527</span>
<span id="5528">5528</span>
<span id="5529">5529</span>
<span id="5530">5530</span>
<span id="5531">5531</span>
<span id="5532">5532</span>
<span id="5533">5533</span>
<span id="5534">5534</span>
<span id="5535">5535</span>
<span id="5536">5536</span>
<span id="5537">5537</span>
<span id="5538">5538</span>
<span id="5539">5539</span>
<span id="5540">5540</span>
<span id="5541">5541</span>
<span id="5542">5542</span>
<span id="5543">5543</span>
<span id="5544">5544</span>
<span id="5545">5545</span>
<span id="5546">5546</span>
<span id="5547">5547</span>
<span id="5548">5548</span>
<span id="5549">5549</span>
<span id="5550">5550</span>
<span id="5551">5551</span>
<span id="5552">5552</span>
<span id="5553">5553</span>
<span id="5554">5554</span>
<span id="5555">5555</span>
<span id="5556">5556</span>
<span id="5557">5557</span>
<span id="5558">5558</span>
<span id="5559">5559</span>
<span id="5560">5560</span>
<span id="5561">5561</span>
<span id="5562">5562</span>
<span id="5563">5563</span>
<span id="5564">5564</span>
<span id="5565">5565</span>
<span id="5566">5566</span>
<span id="5567">5567</span>
<span id="5568">5568</span>
<span id="5569">5569</span>
<span id="5570">5570</span>
<span id="5571">5571</span>
<span id="5572">5572</span>
<span id="5573">5573</span>
<span id="5574">5574</span>
<span id="5575">5575</span>
<span id="5576">5576</span>
<span id="5577">5577</span>
<span id="5578">5578</span>
<span id="5579">5579</span>
<span id="5580">5580</span>
<span id="5581">5581</span>
<span id="5582">5582</span>
<span id="5583">5583</span>
<span id="5584">5584</span>
<span id="5585">5585</span>
<span id="5586">5586</span>
<span id="5587">5587</span>
<span id="5588">5588</span>
<span id="5589">5589</span>
<span id="5590">5590</span>
<span id="5591">5591</span>
<span id="5592">5592</span>
<span id="5593">5593</span>
<span id="5594">5594</span>
<span id="5595">5595</span>
<span id="5596">5596</span>
<span id="5597">5597</span>
<span id="5598">5598</span>
<span id="5599">5599</span>
<span id="5600">5600</span>
<span id="5601">5601</span>
<span id="5602">5602</span>
<span id="5603">5603</span>
<span id="5604">5604</span>
<span id="5605">5605</span>
<span id="5606">5606</span>
<span id="5607">5607</span>
<span id="5608">5608</span>
<span id="5609">5609</span>
<span id="5610">5610</span>
<span id="5611">5611</span>
<span id="5612">5612</span>
<span id="5613">5613</span>
<span id="5614">5614</span>
<span id="5615">5615</span>
<span id="5616">5616</span>
<span id="5617">5617</span>
<span id="5618">5618</span>
<span id="5619">5619</span>
<span id="5620">5620</span>
<span id="5621">5621</span>
<span id="5622">5622</span>
<span id="5623">5623</span>
<span id="5624">5624</span>
<span id="5625">5625</span>
<span id="5626">5626</span>
<span id="5627">5627</span>
<span id="5628">5628</span>
<span id="5629">5629</span>
<span id="5630">5630</span>
<span id="5631">5631</span>
<span id="5632">5632</span>
<span id="5633">5633</span>
<span id="5634">5634</span>
<span id="5635">5635</span>
<span id="5636">5636</span>
<span id="5637">5637</span>
<span id="5638">5638</span>
<span id="5639">5639</span>
<span id="5640">5640</span>
<span id="5641">5641</span>
<span id="5642">5642</span>
<span id="5643">5643</span>
<span id="5644">5644</span>
<span id="5645">5645</span>
<span id="5646">5646</span>
<span id="5647">5647</span>
<span id="5648">5648</span>
<span id="5649">5649</span>
<span id="5650">5650</span>
<span id="5651">5651</span>
<span id="5652">5652</span>
<span id="5653">5653</span>
<span id="5654">5654</span>
<span id="5655">5655</span>
<span id="5656">5656</span>
<span id="5657">5657</span>
<span id="5658">5658</span>
<span id="5659">5659</span>
<span id="5660">5660</span>
<span id="5661">5661</span>
<span id="5662">5662</span>
<span id="5663">5663</span>
<span id="5664">5664</span>
<span id="5665">5665</span>
<span id="5666">5666</span>
<span id="5667">5667</span>
<span id="5668">5668</span>
<span id="5669">5669</span>
<span id="5670">5670</span>
<span id="5671">5671</span>
<span id="5672">5672</span>
<span id="5673">5673</span>
<span id="5674">5674</span>
<span id="5675">5675</span>
<span id="5676">5676</span>
<span id="5677">5677</span>
<span id="5678">5678</span>
<span id="5679">5679</span>
<span id="5680">5680</span>
<span id="5681">5681</span>
<span id="5682">5682</span>
<span id="5683">5683</span>
<span id="5684">5684</span>
<span id="5685">5685</span>
<span id="5686">5686</span>
<span id="5687">5687</span>
<span id="5688">5688</span>
<span id="5689">5689</span>
<span id="5690">5690</span>
<span id="5691">5691</span>
<span id="5692">5692</span>
<span id="5693">5693</span>
<span id="5694">5694</span>
<span id="5695">5695</span>
<span id="5696">5696</span>
<span id="5697">5697</span>
<span id="5698">5698</span>
<span id="5699">5699</span>
<span id="5700">5700</span>
<span id="5701">5701</span>
<span id="5702">5702</span>
<span id="5703">5703</span>
<span id="5704">5704</span>
<span id="5705">5705</span>
<span id="5706">5706</span>
<span id="5707">5707</span>
<span id="5708">5708</span>
<span id="5709">5709</span>
<span id="5710">5710</span>
<span id="5711">5711</span>
<span id="5712">5712</span>
<span id="5713">5713</span>
<span id="5714">5714</span>
<span id="5715">5715</span>
<span id="5716">5716</span>
<span id="5717">5717</span>
<span id="5718">5718</span>
<span id="5719">5719</span>
<span id="5720">5720</span>
<span id="5721">5721</span>
<span id="5722">5722</span>
<span id="5723">5723</span>
<span id="5724">5724</span>
<span id="5725">5725</span>
<span id="5726">5726</span>
<span id="5727">5727</span>
<span id="5728">5728</span>
<span id="5729">5729</span>
<span id="5730">5730</span>
<span id="5731">5731</span>
<span id="5732">5732</span>
<span id="5733">5733</span>
<span id="5734">5734</span>
<span id="5735">5735</span>
<span id="5736">5736</span>
<span id="5737">5737</span>
<span id="5738">5738</span>
<span id="5739">5739</span>
<span id="5740">5740</span>
<span id="5741">5741</span>
<span id="5742">5742</span>
<span id="5743">5743</span>
<span id="5744">5744</span>
<span id="5745">5745</span>
<span id="5746">5746</span>
<span id="5747">5747</span>
<span id="5748">5748</span>
<span id="5749">5749</span>
<span id="5750">5750</span>
<span id="5751">5751</span>
<span id="5752">5752</span>
<span id="5753">5753</span>
<span id="5754">5754</span>
<span id="5755">5755</span>
<span id="5756">5756</span>
<span id="5757">5757</span>
<span id="5758">5758</span>
<span id="5759">5759</span>
<span id="5760">5760</span>
<span id="5761">5761</span>
<span id="5762">5762</span>
<span id="5763">5763</span>
<span id="5764">5764</span>
<span id="5765">5765</span>
<span id="5766">5766</span>
<span id="5767">5767</span>
<span id="5768">5768</span>
<span id="5769">5769</span>
<span id="5770">5770</span>
<span id="5771">5771</span>
<span id="5772">5772</span>
<span id="5773">5773</span>
<span id="5774">5774</span>
<span id="5775">5775</span>
<span id="5776">5776</span>
<span id="5777">5777</span>
<span id="5778">5778</span>
<span id="5779">5779</span>
<span id="5780">5780</span>
<span id="5781">5781</span>
<span id="5782">5782</span>
<span id="5783">5783</span>
<span id="5784">5784</span>
<span id="5785">5785</span>
<span id="5786">5786</span>
<span id="5787">5787</span>
<span id="5788">5788</span>
<span id="5789">5789</span>
<span id="5790">5790</span>
<span id="5791">5791</span>
<span id="5792">5792</span>
<span id="5793">5793</span>
<span id="5794">5794</span>
<span id="5795">5795</span>
<span id="5796">5796</span>
<span id="5797">5797</span>
<span id="5798">5798</span>
<span id="5799">5799</span>
<span id="5800">5800</span>
<span id="5801">5801</span>
<span id="5802">5802</span>
<span id="5803">5803</span>
<span id="5804">5804</span>
<span id="5805">5805</span>
<span id="5806">5806</span>
<span id="5807">5807</span>
<span id="5808">5808</span>
<span id="5809">5809</span>
<span id="5810">5810</span>
<span id="5811">5811</span>
<span id="5812">5812</span>
<span id="5813">5813</span>
<span id="5814">5814</span>
<span id="5815">5815</span>
<span id="5816">5816</span>
<span id="5817">5817</span>
<span id="5818">5818</span>
<span id="5819">5819</span>
<span id="5820">5820</span>
<span id="5821">5821</span>
<span id="5822">5822</span>
<span id="5823">5823</span>
<span id="5824">5824</span>
<span id="5825">5825</span>
<span id="5826">5826</span>
<span id="5827">5827</span>
<span id="5828">5828</span>
<span id="5829">5829</span>
<span id="5830">5830</span>
<span id="5831">5831</span>
<span id="5832">5832</span>
<span id="5833">5833</span>
<span id="5834">5834</span>
<span id="5835">5835</span>
<span id="5836">5836</span>
<span id="5837">5837</span>
<span id="5838">5838</span>
<span id="5839">5839</span>
<span id="5840">5840</span>
<span id="5841">5841</span>
<span id="5842">5842</span>
<span id="5843">5843</span>
<span id="5844">5844</span>
<span id="5845">5845</span>
<span id="5846">5846</span>
<span id="5847">5847</span>
<span id="5848">5848</span>
<span id="5849">5849</span>
<span id="5850">5850</span>
<span id="5851">5851</span>
<span id="5852">5852</span>
<span id="5853">5853</span>
<span id="5854">5854</span>
<span id="5855">5855</span>
<span id="5856">5856</span>
<span id="5857">5857</span>
<span id="5858">5858</span>
<span id="5859">5859</span>
<span id="5860">5860</span>
<span id="5861">5861</span>
<span id="5862">5862</span>
<span id="5863">5863</span>
<span id="5864">5864</span>
<span id="5865">5865</span>
<span id="5866">5866</span>
<span id="5867">5867</span>
<span id="5868">5868</span>
<span id="5869">5869</span>
<span id="5870">5870</span>
<span id="5871">5871</span>
<span id="5872">5872</span>
<span id="5873">5873</span>
<span id="5874">5874</span>
<span id="5875">5875</span>
<span id="5876">5876</span>
<span id="5877">5877</span>
<span id="5878">5878</span>
<span id="5879">5879</span>
<span id="5880">5880</span>
<span id="5881">5881</span>
<span id="5882">5882</span>
<span id="5883">5883</span>
<span id="5884">5884</span>
<span id="5885">5885</span>
<span id="5886">5886</span>
<span id="5887">5887</span>
<span id="5888">5888</span>
<span id="5889">5889</span>
<span id="5890">5890</span>
<span id="5891">5891</span>
<span id="5892">5892</span>
<span id="5893">5893</span>
<span id="5894">5894</span>
<span id="5895">5895</span>
<span id="5896">5896</span>
<span id="5897">5897</span>
<span id="5898">5898</span>
<span id="5899">5899</span>
<span id="5900">5900</span>
<span id="5901">5901</span>
<span id="5902">5902</span>
<span id="5903">5903</span>
<span id="5904">5904</span>
<span id="5905">5905</span>
<span id="5906">5906</span>
<span id="5907">5907</span>
<span id="5908">5908</span>
<span id="5909">5909</span>
<span id="5910">5910</span>
<span id="5911">5911</span>
<span id="5912">5912</span>
<span id="5913">5913</span>
<span id="5914">5914</span>
<span id="5915">5915</span>
<span id="5916">5916</span>
<span id="5917">5917</span>
<span id="5918">5918</span>
<span id="5919">5919</span>
<span id="5920">5920</span>
<span id="5921">5921</span>
<span id="5922">5922</span>
<span id="5923">5923</span>
<span id="5924">5924</span>
<span id="5925">5925</span>
<span id="5926">5926</span>
<span id="5927">5927</span>
<span id="5928">5928</span>
<span id="5929">5929</span>
<span id="5930">5930</span>
<span id="5931">5931</span>
<span id="5932">5932</span>
<span id="5933">5933</span>
<span id="5934">5934</span>
<span id="5935">5935</span>
<span id="5936">5936</span>
<span id="5937">5937</span>
<span id="5938">5938</span>
<span id="5939">5939</span>
<span id="5940">5940</span>
<span id="5941">5941</span>
<span id="5942">5942</span>
<span id="5943">5943</span>
<span id="5944">5944</span>
<span id="5945">5945</span>
<span id="5946">5946</span>
<span id="5947">5947</span>
<span id="5948">5948</span>
<span id="5949">5949</span>
<span id="5950">5950</span>
<span id="5951">5951</span>
<span id="5952">5952</span>
<span id="5953">5953</span>
<span id="5954">5954</span>
<span id="5955">5955</span>
<span id="5956">5956</span>
<span id="5957">5957</span>
<span id="5958">5958</span>
<span id="5959">5959</span>
<span id="5960">5960</span>
<span id="5961">5961</span>
<span id="5962">5962</span>
<span id="5963">5963</span>
<span id="5964">5964</span>
<span id="5965">5965</span>
<span id="5966">5966</span>
<span id="5967">5967</span>
<span id="5968">5968</span>
<span id="5969">5969</span>
<span id="5970">5970</span>
<span id="5971">5971</span>
<span id="5972">5972</span>
<span id="5973">5973</span>
<span id="5974">5974</span>
<span id="5975">5975</span>
<span id="5976">5976</span>
<span id="5977">5977</span>
<span id="5978">5978</span>
<span id="5979">5979</span>
<span id="5980">5980</span>
<span id="5981">5981</span>
<span id="5982">5982</span>
<span id="5983">5983</span>
<span id="5984">5984</span>
<span id="5985">5985</span>
<span id="5986">5986</span>
<span id="5987">5987</span>
<span id="5988">5988</span>
<span id="5989">5989</span>
<span id="5990">5990</span>
<span id="5991">5991</span>
<span id="5992">5992</span>
<span id="5993">5993</span>
<span id="5994">5994</span>
<span id="5995">5995</span>
<span id="5996">5996</span>
<span id="5997">5997</span>
<span id="5998">5998</span>
<span id="5999">5999</span>
<span id="6000">6000</span>
<span id="6001">6001</span>
<span id="6002">6002</span>
<span id="6003">6003</span>
<span id="6004">6004</span>
<span id="6005">6005</span>
<span id="6006">6006</span>
<span id="6007">6007</span>
<span id="6008">6008</span>
<span id="6009">6009</span>
<span id="6010">6010</span>
<span id="6011">6011</span>
<span id="6012">6012</span>
<span id="6013">6013</span>
<span id="6014">6014</span>
<span id="6015">6015</span>
<span id="6016">6016</span>
<span id="6017">6017</span>
<span id="6018">6018</span>
<span id="6019">6019</span>
<span id="6020">6020</span>
<span id="6021">6021</span>
<span id="6022">6022</span>
<span id="6023">6023</span>
<span id="6024">6024</span>
<span id="6025">6025</span>
<span id="6026">6026</span>
<span id="6027">6027</span>
<span id="6028">6028</span>
<span id="6029">6029</span>
<span id="6030">6030</span>
<span id="6031">6031</span>
<span id="6032">6032</span>
<span id="6033">6033</span>
<span id="6034">6034</span>
<span id="6035">6035</span>
<span id="6036">6036</span>
<span id="6037">6037</span>
<span id="6038">6038</span>
<span id="6039">6039</span>
<span id="6040">6040</span>
<span id="6041">6041</span>
<span id="6042">6042</span>
<span id="6043">6043</span>
<span id="6044">6044</span>
<span id="6045">6045</span>
<span id="6046">6046</span>
<span id="6047">6047</span>
<span id="6048">6048</span>
<span id="6049">6049</span>
<span id="6050">6050</span>
<span id="6051">6051</span>
<span id="6052">6052</span>
<span id="6053">6053</span>
<span id="6054">6054</span>
<span id="6055">6055</span>
<span id="6056">6056</span>
<span id="6057">6057</span>
<span id="6058">6058</span>
<span id="6059">6059</span>
<span id="6060">6060</span>
<span id="6061">6061</span>
<span id="6062">6062</span>
<span id="6063">6063</span>
<span id="6064">6064</span>
<span id="6065">6065</span>
<span id="6066">6066</span>
<span id="6067">6067</span>
<span id="6068">6068</span>
<span id="6069">6069</span>
<span id="6070">6070</span>
<span id="6071">6071</span>
<span id="6072">6072</span>
<span id="6073">6073</span>
<span id="6074">6074</span>
<span id="6075">6075</span>
<span id="6076">6076</span>
<span id="6077">6077</span>
<span id="6078">6078</span>
<span id="6079">6079</span>
<span id="6080">6080</span>
<span id="6081">6081</span>
<span id="6082">6082</span>
<span id="6083">6083</span>
<span id="6084">6084</span>
<span id="6085">6085</span>
<span id="6086">6086</span>
</pre><pre class="rust ">
<span class="comment">//</span>
<span class="comment">// This file was auto-generated, do not edit directly</span>
<span class="comment">//</span>

<span class="comment">/*
Copyright © 2008-2011 Kristian Høgsberg
    Copyright © 2010-2011 Intel Corporation
    Copyright © 2012-2013 Collabora, Ltd.

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation files
    (the &quot;Software&quot;), to deal in the Software without restriction,
    including without limitation the rights to use, copy, modify, merge,
    publish, distribute, sublicense, and/or sell copies of the Software,
    and to permit persons to whom the Software is furnished to do so,
    subject to the following conditions:

    The above copyright notice and this permission notice (including the
    next paragraph) shall be included in all copies or substantial
    portions of the Software.

    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
    BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
    ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
    CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.
*/</span>

<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_display</span> {
    <span class="doccomment">//! core global object</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The core global object.  This is a special singleton object.  It</span>
    <span class="doccomment">//! is used for internal Wayland protocol features.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlDisplay</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlDisplay</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlDisplay</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlDisplay</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDisplay</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlDisplay</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDisplay</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlDisplay</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlDisplay</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_display_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_display&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlDisplay</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlDisplay</span> {
            <span class="ident">WlDisplay</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="doccomment">/// global error values</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// These errors are global and can be emitted in response to any</span>
    <span class="doccomment">/// server request.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// server couldn&#39;t find object</span>
        <span class="ident">InvalidObject</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// method doesn&#39;t exist on the specified interface</span>
        <span class="ident">InvalidMethod</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// server is out of memory</span>
        <span class="ident">NoMemory</span> <span class="op">=</span> <span class="number">2</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidObject</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidMethod</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">NoMemory</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">const</span> <span class="ident">WL_DISPLAY_SYNC</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_DISPLAY_GET_REGISTRY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">impl</span> <span class="ident">WlDisplay</span> {
        <span class="doccomment">/// asynchronous roundtrip</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The sync request asks the server to emit the &#39;done&#39; event</span>
        <span class="doccomment">/// on the returned wl_callback object.  Since requests are</span>
        <span class="doccomment">/// handled in-order and events are delivered in-order, this can</span>
        <span class="doccomment">/// be used as a barrier to ensure all previous requests and the</span>
        <span class="doccomment">/// resulting events have been handled.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The object returned by this request will be destroyed by the</span>
        <span class="doccomment">/// compositor after the callback is fired and as such the client must not</span>
        <span class="doccomment">/// attempt to use it after that point.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The callback_data passed in the callback is the event serial.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">sync</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_callback</span>::<span class="ident">WlCallback</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DISPLAY_SYNC</span>, <span class="kw-2">&amp;</span><span class="ident">wl_callback_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
        <span class="doccomment">/// get global registry object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request creates a registry object that allows the client</span>
        <span class="doccomment">/// to list and bind the global objects available from the</span>
        <span class="doccomment">/// compositor.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_registry</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_registry</span>::<span class="ident">WlRegistry</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DISPLAY_GET_REGISTRY</span>, <span class="kw-2">&amp;</span><span class="ident">wl_registry_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_registry</span> {
    <span class="doccomment">//! global registry object</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The global registry object.  The server has a number of global</span>
    <span class="doccomment">//! objects that are available to all clients.  These objects</span>
    <span class="doccomment">//! typically represent an actual object in the server (for example,</span>
    <span class="doccomment">//! an input device) or they are singleton objects that provide</span>
    <span class="doccomment">//! extension functionality.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! When a client creates a registry object, the registry object</span>
    <span class="doccomment">//! will emit a global event for each global currently in the</span>
    <span class="doccomment">//! registry.  Globals come and go as a result of device or</span>
    <span class="doccomment">//! monitor hotplugs, reconfiguration or other events, and the</span>
    <span class="doccomment">//! registry will send out global and global_remove events to</span>
    <span class="doccomment">//! keep the client up to date with the changes.  To mark the end</span>
    <span class="doccomment">//! of the initial burst of events, the client can use the</span>
    <span class="doccomment">//! wl_display.sync request immediately after calling</span>
    <span class="doccomment">//! wl_display.get_registry.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! A client can bind to a global object by using the bind</span>
    <span class="doccomment">//! request.  This creates a client-side handle that lets the object</span>
    <span class="doccomment">//! emit events to the client and lets the client invoke requests on</span>
    <span class="doccomment">//! the object.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlRegistry</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlRegistry</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlRegistry</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlRegistry</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlRegistry</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlRegistry</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlRegistry</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlRegistry</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlRegistry</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_registry_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_registry&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlRegistry</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlRegistry</span> {
            <span class="ident">WlRegistry</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlRegistry</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">name</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">interface</span> <span class="op">=</span> {<span class="ident">String</span>::<span class="ident">from_utf8_lossy</span>(<span class="ident">CStr</span>::<span class="ident">from_ptr</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> _)).<span class="ident">to_bytes</span>()).<span class="ident">into_owned</span>()};
                    <span class="kw">let</span> <span class="ident">version</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">global</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">name</span>, <span class="ident">interface</span>, <span class="ident">version</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">name</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">global_remove</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">name</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// announce global object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notify the client of global objects.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The event notifies the client that a global object with</span>
        <span class="doccomment">/// the given name is now available, and it implements the</span>
        <span class="doccomment">/// given version of the given interface.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_registry, name, interface, version</span>
        <span class="kw">pub</span> <span class="ident">global</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_registry</span>: <span class="kw-2">&amp;</span><span class="ident">WlRegistry</span>, <span class="ident">name</span>: <span class="ident">u32</span>, <span class="ident">interface</span>: <span class="ident">String</span>, <span class="ident">version</span>: <span class="ident">u32</span>),
        <span class="doccomment">/// announce removal of global object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notify the client of removed global objects.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event notifies the client that the global identified</span>
        <span class="doccomment">/// by name is no longer available.  If the client bound to</span>
        <span class="doccomment">/// the global using the bind request, the client should now</span>
        <span class="doccomment">/// destroy that object.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The object remains valid and requests to the object will be</span>
        <span class="doccomment">/// ignored until the client destroys it, to avoid races between</span>
        <span class="doccomment">/// the global going away and a client sending a request to it.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_registry, name</span>
        <span class="kw">pub</span> <span class="ident">global_remove</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_registry</span>: <span class="kw-2">&amp;</span><span class="ident">WlRegistry</span>, <span class="ident">name</span>: <span class="ident">u32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">global</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">global</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">global_remove</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">global_remove</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_REGISTRY_BIND</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">WlRegistry</span> {
        <span class="doccomment">/// bind an object to the display</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Binds a new, client-created object to the server using the</span>
        <span class="doccomment">/// specified name as the identifier.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">bind</span><span class="op">&lt;</span><span class="ident">T</span>: <span class="ident">Proxy</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">version</span>: <span class="ident">u32</span>, <span class="ident">name</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">T</span> {
            <span class="kw">if</span> <span class="ident">version</span> <span class="op">&gt;</span> <span class="op">&lt;</span><span class="ident">T</span> <span class="kw">as</span> <span class="ident">Proxy</span><span class="op">&gt;</span>::<span class="ident">supported_version</span>() {
                <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Tried to bind interface {} with version {} while it is only supported up to {}.&quot;</span>, <span class="op">&lt;</span><span class="ident">T</span> <span class="kw">as</span> <span class="ident">Proxy</span><span class="op">&gt;</span>::<span class="ident">interface_name</span>(), <span class="ident">version</span>, <span class="op">&lt;</span><span class="ident">T</span> <span class="kw">as</span> <span class="ident">Proxy</span><span class="op">&gt;</span>::<span class="ident">supported_version</span>())
            }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor_versioned</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_REGISTRY_BIND</span>, <span class="op">&lt;</span><span class="ident">T</span> <span class="kw">as</span> <span class="ident">Proxy</span><span class="op">&gt;</span>::<span class="ident">interface_ptr</span>(), <span class="ident">version</span>, <span class="ident">name</span>, (<span class="kw-2">*</span><span class="op">&lt;</span><span class="ident">T</span> <span class="kw">as</span> <span class="ident">Proxy</span><span class="op">&gt;</span>::<span class="ident">interface_ptr</span>()).<span class="ident">name</span>, <span class="ident">version</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_callback</span> {
    <span class="doccomment">//! callback object</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! Clients can handle the &#39;done&#39; event to get notified when</span>
    <span class="doccomment">//! the related request is done.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlCallback</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlCallback</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlCallback</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlCallback</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlCallback</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlCallback</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlCallback</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlCallback</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlCallback</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_callback_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_callback&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlCallback</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlCallback</span> {
            <span class="ident">WlCallback</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlCallback</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">callback_data</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};

                (<span class="ident">data</span>.<span class="number">2</span>).<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
                <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">true</span>;
                <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>());
                    (<span class="ident">implementation</span>.<span class="ident">done</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">callback_data</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// done event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notify the client when the related request is done.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_callback, callback_data</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="ident">done</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_callback</span>: <span class="kw-2">&amp;</span><span class="ident">WlCallback</span>, <span class="ident">callback_data</span>: <span class="ident">u32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">done</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">done</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">impl</span> <span class="ident">WlCallback</span> {
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_compositor</span> {
    <span class="doccomment">//! the compositor singleton</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A compositor.  This object is a singleton global.  The</span>
    <span class="doccomment">//! compositor is in charge of combining the contents of multiple</span>
    <span class="doccomment">//! surfaces into one displayable output.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlCompositor</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlCompositor</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlCompositor</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlCompositor</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlCompositor</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlCompositor</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlCompositor</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlCompositor</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlCompositor</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_compositor_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_compositor&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">4</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlCompositor</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlCompositor</span> {
            <span class="ident">WlCompositor</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">const</span> <span class="ident">WL_COMPOSITOR_CREATE_SURFACE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_COMPOSITOR_CREATE_REGION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">impl</span> <span class="ident">WlCompositor</span> {
        <span class="doccomment">/// create new surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Ask the compositor to create a new surface.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">create_surface</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_COMPOSITOR_CREATE_SURFACE</span>, <span class="kw-2">&amp;</span><span class="ident">wl_surface_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
        <span class="doccomment">/// create new region</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Ask the compositor to create a new region.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">create_region</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_region</span>::<span class="ident">WlRegion</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_COMPOSITOR_CREATE_REGION</span>, <span class="kw-2">&amp;</span><span class="ident">wl_region_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_shm_pool</span> {
    <span class="doccomment">//! a shared memory pool</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The wl_shm_pool object encapsulates a piece of memory shared</span>
    <span class="doccomment">//! between the compositor and client.  Through the wl_shm_pool</span>
    <span class="doccomment">//! object, the client can allocate shared memory wl_buffer objects.</span>
    <span class="doccomment">//! All objects created through the same pool share the same</span>
    <span class="doccomment">//! underlying mapped memory. Reusing the mapped memory avoids the</span>
    <span class="doccomment">//! setup/teardown overhead and is useful when interactively resizing</span>
    <span class="doccomment">//! a surface or for many small buffers.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlShmPool</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlShmPool</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlShmPool</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlShmPool</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShmPool</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlShmPool</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShmPool</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlShmPool</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlShmPool</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_shm_pool_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_shm_pool&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlShmPool</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlShmPool</span> {
            <span class="ident">WlShmPool</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">const</span> <span class="ident">WL_SHM_POOL_CREATE_BUFFER</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_SHM_POOL_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_SHM_POOL_RESIZE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">impl</span> <span class="ident">WlShmPool</span> {
        <span class="doccomment">/// create a buffer from the pool</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Create a wl_buffer object from the pool.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The buffer is created offset bytes into the pool and has</span>
        <span class="doccomment">/// width and height as specified.  The stride argument specifies</span>
        <span class="doccomment">/// the number of bytes from the beginning of one row to the beginning</span>
        <span class="doccomment">/// of the next.  The format is the pixel format of the buffer and</span>
        <span class="doccomment">/// must be one of those advertised through the wl_shm.format event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A buffer will keep a reference to the pool it was created from</span>
        <span class="doccomment">/// so it is valid to destroy the pool immediately after creating</span>
        <span class="doccomment">/// a buffer from it.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">create_buffer</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">offset</span>: <span class="ident">i32</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>, <span class="ident">stride</span>: <span class="ident">i32</span>, <span class="ident">format</span>: <span class="kw">super</span>::<span class="ident">wl_shm</span>::<span class="ident">Format</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">wl_buffer</span>::<span class="ident">WlBuffer</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHM_POOL_CREATE_BUFFER</span>, <span class="kw-2">&amp;</span><span class="ident">wl_buffer_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>(), <span class="ident">offset</span>, <span class="ident">width</span>, <span class="ident">height</span>, <span class="ident">stride</span>, <span class="ident">format</span>) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
        <span class="doccomment">/// destroy the pool</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Destroy the shared memory pool.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The mmapped memory will be released when all</span>
        <span class="doccomment">/// buffers that have been created from this pool</span>
        <span class="doccomment">/// are gone.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHM_POOL_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// change the size of the pool mapping</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request will cause the server to remap the backing memory</span>
        <span class="doccomment">/// for the pool from the file descriptor passed when the pool was</span>
        <span class="doccomment">/// created, but using the new size.  This request can only be</span>
        <span class="doccomment">/// used to make the pool bigger.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">resize</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">size</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHM_POOL_RESIZE</span>, <span class="ident">size</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_shm</span> {
    <span class="doccomment">//! shared memory support</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A global singleton object that provides support for shared</span>
    <span class="doccomment">//! memory.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Clients can create wl_shm_pool objects using the create_pool</span>
    <span class="doccomment">//! request.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! At connection setup time, the wl_shm object emits one or more</span>
    <span class="doccomment">//! format events to inform clients about the valid pixel formats</span>
    <span class="doccomment">//! that can be used for buffers.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlShm</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlShm</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlShm</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlShm</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShm</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlShm</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShm</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlShm</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlShm</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_shm_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_shm&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlShm</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlShm</span> {
            <span class="ident">WlShm</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlShm</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">format</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Format</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    (<span class="ident">implementation</span>.<span class="ident">format</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">format</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="doccomment">/// wl_shm error values</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// These errors can be emitted in response to wl_shm requests.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// buffer format is not known</span>
        <span class="ident">InvalidFormat</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// invalid size or stride during pool or buffer creation</span>
        <span class="ident">InvalidStride</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// mmapping the file descriptor failed</span>
        <span class="ident">InvalidFd</span> <span class="op">=</span> <span class="number">2</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidFormat</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidStride</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidFd</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="doccomment">/// pixel formats</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This describes the memory layout of an individual pixel.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// All renderers should support argb8888 and xrgb8888 but any other</span>
    <span class="doccomment">/// formats are optional and may not be supported by the particular</span>
    <span class="doccomment">/// renderer in use.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// The drm format codes match the #defines in drm_fourcc.h.</span>
    <span class="doccomment">/// The formats actually supported by the compositor will be</span>
    <span class="doccomment">/// reported by the format event.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Format</span> {
        <span class="doccomment">/// 32-bit ARGB format, [31:0] A:R:G:B 8:8:8:8 little endian</span>
        <span class="ident">Argb8888</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// 32-bit RGB format, [31:0] x:R:G:B 8:8:8:8 little endian</span>
        <span class="ident">Xrgb8888</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// 8-bit color index format, [7:0] C</span>
        <span class="ident">C8</span> <span class="op">=</span> <span class="number">0x20203843</span>,
        <span class="doccomment">/// 8-bit RGB format, [7:0] R:G:B 3:3:2</span>
        <span class="ident">Rgb332</span> <span class="op">=</span> <span class="number">0x38424752</span>,
        <span class="doccomment">/// 8-bit BGR format, [7:0] B:G:R 2:3:3</span>
        <span class="ident">Bgr233</span> <span class="op">=</span> <span class="number">0x38524742</span>,
        <span class="doccomment">/// 16-bit xRGB format, [15:0] x:R:G:B 4:4:4:4 little endian</span>
        <span class="ident">Xrgb4444</span> <span class="op">=</span> <span class="number">0x32315258</span>,
        <span class="doccomment">/// 16-bit xBGR format, [15:0] x:B:G:R 4:4:4:4 little endian</span>
        <span class="ident">Xbgr4444</span> <span class="op">=</span> <span class="number">0x32314258</span>,
        <span class="doccomment">/// 16-bit RGBx format, [15:0] R:G:B:x 4:4:4:4 little endian</span>
        <span class="ident">Rgbx4444</span> <span class="op">=</span> <span class="number">0x32315852</span>,
        <span class="doccomment">/// 16-bit BGRx format, [15:0] B:G:R:x 4:4:4:4 little endian</span>
        <span class="ident">Bgrx4444</span> <span class="op">=</span> <span class="number">0x32315842</span>,
        <span class="doccomment">/// 16-bit ARGB format, [15:0] A:R:G:B 4:4:4:4 little endian</span>
        <span class="ident">Argb4444</span> <span class="op">=</span> <span class="number">0x32315241</span>,
        <span class="doccomment">/// 16-bit ABGR format, [15:0] A:B:G:R 4:4:4:4 little endian</span>
        <span class="ident">Abgr4444</span> <span class="op">=</span> <span class="number">0x32314241</span>,
        <span class="doccomment">/// 16-bit RBGA format, [15:0] R:G:B:A 4:4:4:4 little endian</span>
        <span class="ident">Rgba4444</span> <span class="op">=</span> <span class="number">0x32314152</span>,
        <span class="doccomment">/// 16-bit BGRA format, [15:0] B:G:R:A 4:4:4:4 little endian</span>
        <span class="ident">Bgra4444</span> <span class="op">=</span> <span class="number">0x32314142</span>,
        <span class="doccomment">/// 16-bit xRGB format, [15:0] x:R:G:B 1:5:5:5 little endian</span>
        <span class="ident">Xrgb1555</span> <span class="op">=</span> <span class="number">0x35315258</span>,
        <span class="doccomment">/// 16-bit xBGR 1555 format, [15:0] x:B:G:R 1:5:5:5 little endian</span>
        <span class="ident">Xbgr1555</span> <span class="op">=</span> <span class="number">0x35314258</span>,
        <span class="doccomment">/// 16-bit RGBx 5551 format, [15:0] R:G:B:x 5:5:5:1 little endian</span>
        <span class="ident">Rgbx5551</span> <span class="op">=</span> <span class="number">0x35315852</span>,
        <span class="doccomment">/// 16-bit BGRx 5551 format, [15:0] B:G:R:x 5:5:5:1 little endian</span>
        <span class="ident">Bgrx5551</span> <span class="op">=</span> <span class="number">0x35315842</span>,
        <span class="doccomment">/// 16-bit ARGB 1555 format, [15:0] A:R:G:B 1:5:5:5 little endian</span>
        <span class="ident">Argb1555</span> <span class="op">=</span> <span class="number">0x35315241</span>,
        <span class="doccomment">/// 16-bit ABGR 1555 format, [15:0] A:B:G:R 1:5:5:5 little endian</span>
        <span class="ident">Abgr1555</span> <span class="op">=</span> <span class="number">0x35314241</span>,
        <span class="doccomment">/// 16-bit RGBA 5551 format, [15:0] R:G:B:A 5:5:5:1 little endian</span>
        <span class="ident">Rgba5551</span> <span class="op">=</span> <span class="number">0x35314152</span>,
        <span class="doccomment">/// 16-bit BGRA 5551 format, [15:0] B:G:R:A 5:5:5:1 little endian</span>
        <span class="ident">Bgra5551</span> <span class="op">=</span> <span class="number">0x35314142</span>,
        <span class="doccomment">/// 16-bit RGB 565 format, [15:0] R:G:B 5:6:5 little endian</span>
        <span class="ident">Rgb565</span> <span class="op">=</span> <span class="number">0x36314752</span>,
        <span class="doccomment">/// 16-bit BGR 565 format, [15:0] B:G:R 5:6:5 little endian</span>
        <span class="ident">Bgr565</span> <span class="op">=</span> <span class="number">0x36314742</span>,
        <span class="doccomment">/// 24-bit RGB format, [23:0] R:G:B little endian</span>
        <span class="ident">Rgb888</span> <span class="op">=</span> <span class="number">0x34324752</span>,
        <span class="doccomment">/// 24-bit BGR format, [23:0] B:G:R little endian</span>
        <span class="ident">Bgr888</span> <span class="op">=</span> <span class="number">0x34324742</span>,
        <span class="doccomment">/// 32-bit xBGR format, [31:0] x:B:G:R 8:8:8:8 little endian</span>
        <span class="ident">Xbgr8888</span> <span class="op">=</span> <span class="number">0x34324258</span>,
        <span class="doccomment">/// 32-bit RGBx format, [31:0] R:G:B:x 8:8:8:8 little endian</span>
        <span class="ident">Rgbx8888</span> <span class="op">=</span> <span class="number">0x34325852</span>,
        <span class="doccomment">/// 32-bit BGRx format, [31:0] B:G:R:x 8:8:8:8 little endian</span>
        <span class="ident">Bgrx8888</span> <span class="op">=</span> <span class="number">0x34325842</span>,
        <span class="doccomment">/// 32-bit ABGR format, [31:0] A:B:G:R 8:8:8:8 little endian</span>
        <span class="ident">Abgr8888</span> <span class="op">=</span> <span class="number">0x34324241</span>,
        <span class="doccomment">/// 32-bit RGBA format, [31:0] R:G:B:A 8:8:8:8 little endian</span>
        <span class="ident">Rgba8888</span> <span class="op">=</span> <span class="number">0x34324152</span>,
        <span class="doccomment">/// 32-bit BGRA format, [31:0] B:G:R:A 8:8:8:8 little endian</span>
        <span class="ident">Bgra8888</span> <span class="op">=</span> <span class="number">0x34324142</span>,
        <span class="doccomment">/// 32-bit xRGB format, [31:0] x:R:G:B 2:10:10:10 little endian</span>
        <span class="ident">Xrgb2101010</span> <span class="op">=</span> <span class="number">0x30335258</span>,
        <span class="doccomment">/// 32-bit xBGR format, [31:0] x:B:G:R 2:10:10:10 little endian</span>
        <span class="ident">Xbgr2101010</span> <span class="op">=</span> <span class="number">0x30334258</span>,
        <span class="doccomment">/// 32-bit RGBx format, [31:0] R:G:B:x 10:10:10:2 little endian</span>
        <span class="ident">Rgbx1010102</span> <span class="op">=</span> <span class="number">0x30335852</span>,
        <span class="doccomment">/// 32-bit BGRx format, [31:0] B:G:R:x 10:10:10:2 little endian</span>
        <span class="ident">Bgrx1010102</span> <span class="op">=</span> <span class="number">0x30335842</span>,
        <span class="doccomment">/// 32-bit ARGB format, [31:0] A:R:G:B 2:10:10:10 little endian</span>
        <span class="ident">Argb2101010</span> <span class="op">=</span> <span class="number">0x30335241</span>,
        <span class="doccomment">/// 32-bit ABGR format, [31:0] A:B:G:R 2:10:10:10 little endian</span>
        <span class="ident">Abgr2101010</span> <span class="op">=</span> <span class="number">0x30334241</span>,
        <span class="doccomment">/// 32-bit RGBA format, [31:0] R:G:B:A 10:10:10:2 little endian</span>
        <span class="ident">Rgba1010102</span> <span class="op">=</span> <span class="number">0x30334152</span>,
        <span class="doccomment">/// 32-bit BGRA format, [31:0] B:G:R:A 10:10:10:2 little endian</span>
        <span class="ident">Bgra1010102</span> <span class="op">=</span> <span class="number">0x30334142</span>,
        <span class="doccomment">/// packed YCbCr format, [31:0] Cr0:Y1:Cb0:Y0 8:8:8:8 little endian</span>
        <span class="ident">Yuyv</span> <span class="op">=</span> <span class="number">0x56595559</span>,
        <span class="doccomment">/// packed YCbCr format, [31:0] Cb0:Y1:Cr0:Y0 8:8:8:8 little endian</span>
        <span class="ident">Yvyu</span> <span class="op">=</span> <span class="number">0x55595659</span>,
        <span class="doccomment">/// packed YCbCr format, [31:0] Y1:Cr0:Y0:Cb0 8:8:8:8 little endian</span>
        <span class="ident">Uyvy</span> <span class="op">=</span> <span class="number">0x59565955</span>,
        <span class="doccomment">/// packed YCbCr format, [31:0] Y1:Cb0:Y0:Cr0 8:8:8:8 little endian</span>
        <span class="ident">Vyuy</span> <span class="op">=</span> <span class="number">0x59555956</span>,
        <span class="doccomment">/// packed AYCbCr format, [31:0] A:Y:Cb:Cr 8:8:8:8 little endian</span>
        <span class="ident">Ayuv</span> <span class="op">=</span> <span class="number">0x56555941</span>,
        <span class="doccomment">/// 2 plane YCbCr Cr:Cb format, 2x2 subsampled Cr:Cb plane</span>
        <span class="ident">Nv12</span> <span class="op">=</span> <span class="number">0x3231564e</span>,
        <span class="doccomment">/// 2 plane YCbCr Cb:Cr format, 2x2 subsampled Cb:Cr plane</span>
        <span class="ident">Nv21</span> <span class="op">=</span> <span class="number">0x3132564e</span>,
        <span class="doccomment">/// 2 plane YCbCr Cr:Cb format, 2x1 subsampled Cr:Cb plane</span>
        <span class="ident">Nv16</span> <span class="op">=</span> <span class="number">0x3631564e</span>,
        <span class="doccomment">/// 2 plane YCbCr Cb:Cr format, 2x1 subsampled Cb:Cr plane</span>
        <span class="ident">Nv61</span> <span class="op">=</span> <span class="number">0x3136564e</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 4x4 subsampled Cb (1) and Cr (2) planes</span>
        <span class="ident">Yuv410</span> <span class="op">=</span> <span class="number">0x39565559</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 4x4 subsampled Cr (1) and Cb (2) planes</span>
        <span class="ident">Yvu410</span> <span class="op">=</span> <span class="number">0x39555659</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 4x1 subsampled Cb (1) and Cr (2) planes</span>
        <span class="ident">Yuv411</span> <span class="op">=</span> <span class="number">0x31315559</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 4x1 subsampled Cr (1) and Cb (2) planes</span>
        <span class="ident">Yvu411</span> <span class="op">=</span> <span class="number">0x31315659</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 2x2 subsampled Cb (1) and Cr (2) planes</span>
        <span class="ident">Yuv420</span> <span class="op">=</span> <span class="number">0x32315559</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 2x2 subsampled Cr (1) and Cb (2) planes</span>
        <span class="ident">Yvu420</span> <span class="op">=</span> <span class="number">0x32315659</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 2x1 subsampled Cb (1) and Cr (2) planes</span>
        <span class="ident">Yuv422</span> <span class="op">=</span> <span class="number">0x36315559</span>,
        <span class="doccomment">/// 3 plane YCbCr format, 2x1 subsampled Cr (1) and Cb (2) planes</span>
        <span class="ident">Yvu422</span> <span class="op">=</span> <span class="number">0x36315659</span>,
        <span class="doccomment">/// 3 plane YCbCr format, non-subsampled Cb (1) and Cr (2) planes</span>
        <span class="ident">Yuv444</span> <span class="op">=</span> <span class="number">0x34325559</span>,
        <span class="doccomment">/// 3 plane YCbCr format, non-subsampled Cr (1) and Cb (2) planes</span>
        <span class="ident">Yvu444</span> <span class="op">=</span> <span class="number">0x34325659</span>,
    }
    <span class="kw">impl</span> <span class="ident">Format</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Format</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Argb8888</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xrgb8888</span>),
                <span class="number">0x20203843</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">C8</span>),
                <span class="number">0x38424752</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgb332</span>),
                <span class="number">0x38524742</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgr233</span>),
                <span class="number">0x32315258</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xrgb4444</span>),
                <span class="number">0x32314258</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xbgr4444</span>),
                <span class="number">0x32315852</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgbx4444</span>),
                <span class="number">0x32315842</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgrx4444</span>),
                <span class="number">0x32315241</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Argb4444</span>),
                <span class="number">0x32314241</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Abgr4444</span>),
                <span class="number">0x32314152</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgba4444</span>),
                <span class="number">0x32314142</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgra4444</span>),
                <span class="number">0x35315258</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xrgb1555</span>),
                <span class="number">0x35314258</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xbgr1555</span>),
                <span class="number">0x35315852</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgbx5551</span>),
                <span class="number">0x35315842</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgrx5551</span>),
                <span class="number">0x35315241</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Argb1555</span>),
                <span class="number">0x35314241</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Abgr1555</span>),
                <span class="number">0x35314152</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgba5551</span>),
                <span class="number">0x35314142</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgra5551</span>),
                <span class="number">0x36314752</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgb565</span>),
                <span class="number">0x36314742</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgr565</span>),
                <span class="number">0x34324752</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgb888</span>),
                <span class="number">0x34324742</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgr888</span>),
                <span class="number">0x34324258</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xbgr8888</span>),
                <span class="number">0x34325852</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgbx8888</span>),
                <span class="number">0x34325842</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgrx8888</span>),
                <span class="number">0x34324241</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Abgr8888</span>),
                <span class="number">0x34324152</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgba8888</span>),
                <span class="number">0x34324142</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgra8888</span>),
                <span class="number">0x30335258</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xrgb2101010</span>),
                <span class="number">0x30334258</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Xbgr2101010</span>),
                <span class="number">0x30335852</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgbx1010102</span>),
                <span class="number">0x30335842</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgrx1010102</span>),
                <span class="number">0x30335241</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Argb2101010</span>),
                <span class="number">0x30334241</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Abgr2101010</span>),
                <span class="number">0x30334152</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Rgba1010102</span>),
                <span class="number">0x30334142</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Bgra1010102</span>),
                <span class="number">0x56595559</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yuyv</span>),
                <span class="number">0x55595659</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yvyu</span>),
                <span class="number">0x59565955</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Uyvy</span>),
                <span class="number">0x59555956</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Vyuy</span>),
                <span class="number">0x56555941</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Ayuv</span>),
                <span class="number">0x3231564e</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Nv12</span>),
                <span class="number">0x3132564e</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Nv21</span>),
                <span class="number">0x3631564e</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Nv16</span>),
                <span class="number">0x3136564e</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Nv61</span>),
                <span class="number">0x39565559</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yuv410</span>),
                <span class="number">0x39555659</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yvu410</span>),
                <span class="number">0x31315559</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yuv411</span>),
                <span class="number">0x31315659</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yvu411</span>),
                <span class="number">0x32315559</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yuv420</span>),
                <span class="number">0x32315659</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yvu420</span>),
                <span class="number">0x36315559</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yuv422</span>),
                <span class="number">0x36315659</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yvu422</span>),
                <span class="number">0x34325559</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yuv444</span>),
                <span class="number">0x34325659</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Format</span>::<span class="ident">Yvu444</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// pixel format description</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Informs the client about a valid pixel format that</span>
        <span class="doccomment">/// can be used for buffers. Known formats include</span>
        <span class="doccomment">/// argb8888 and xrgb8888.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_shm, format</span>
        <span class="kw">pub</span> <span class="ident">format</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_shm</span>: <span class="kw-2">&amp;</span><span class="ident">WlShm</span>, <span class="ident">format</span>: <span class="ident">Format</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">format</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">format</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_SHM_CREATE_POOL</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">WlShm</span> {
        <span class="doccomment">/// create a shm pool</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Create a new wl_shm_pool object.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The pool can be used to create shared memory based buffer</span>
        <span class="doccomment">/// objects.  The server will mmap size bytes of the passed file</span>
        <span class="doccomment">/// descriptor, to use as backing memory for the pool.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">create_pool</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">fd</span>: ::<span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">io</span>::<span class="ident">RawFd</span>, <span class="ident">size</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_shm_pool</span>::<span class="ident">WlShmPool</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHM_CREATE_POOL</span>, <span class="kw-2">&amp;</span><span class="ident">wl_shm_pool_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>(), <span class="ident">fd</span>, <span class="ident">size</span>) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_buffer</span> {
    <span class="doccomment">//! content for a wl_surface</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A buffer provides the content for a wl_surface. Buffers are</span>
    <span class="doccomment">//! created through factory interfaces such as wl_drm, wl_shm or</span>
    <span class="doccomment">//! similar. It has a width and a height and can be attached to a</span>
    <span class="doccomment">//! wl_surface, but the mechanism by which a client provides and</span>
    <span class="doccomment">//! updates the contents is defined by the buffer factory interface.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlBuffer</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlBuffer</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlBuffer</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlBuffer</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlBuffer</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlBuffer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlBuffer</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlBuffer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlBuffer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_buffer_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_buffer&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlBuffer</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlBuffer</span> {
            <span class="ident">WlBuffer</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlBuffer</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">release</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// compositor releases buffer</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Sent when this wl_buffer is no longer used by the compositor.</span>
        <span class="doccomment">/// The client is now free to reuse or destroy this buffer and its</span>
        <span class="doccomment">/// backing storage.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If a client receives a release event before the frame callback</span>
        <span class="doccomment">/// requested in the same wl_surface.commit that attaches this</span>
        <span class="doccomment">/// wl_buffer to a surface, then the client is immediately free to</span>
        <span class="doccomment">/// reuse the buffer and its backing storage, and does not need a</span>
        <span class="doccomment">/// second buffer for the next surface content update. Typically</span>
        <span class="doccomment">/// this is possible, when the compositor maintains a copy of the</span>
        <span class="doccomment">/// wl_surface contents, e.g. as a GL texture. This is an important</span>
        <span class="doccomment">/// optimization for GL(ES) compositors with wl_shm clients.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_buffer</span>
        <span class="kw">pub</span> <span class="ident">release</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_buffer</span>: <span class="kw-2">&amp;</span><span class="ident">WlBuffer</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">release</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">release</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_BUFFER_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">WlBuffer</span> {
        <span class="doccomment">/// destroy a buffer</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Destroy a buffer. If and how you need to release the backing</span>
        <span class="doccomment">/// storage is defined by the buffer factory interface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For possible side-effects to a surface, see wl_surface.attach.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_BUFFER_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_data_offer</span> {
    <span class="doccomment">//! offer to transfer data</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A wl_data_offer represents a piece of data offered for transfer</span>
    <span class="doccomment">//! by another client (the source client).  It is used by the</span>
    <span class="doccomment">//! copy-and-paste and drag-and-drop mechanisms.  The offer</span>
    <span class="doccomment">//! describes the different mime types that the data can be</span>
    <span class="doccomment">//! converted to and provides the mechanism for transferring the</span>
    <span class="doccomment">//! data directly from the source client.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlDataOffer</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlDataOffer</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlDataOffer</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlDataOffer</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataOffer</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlDataOffer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataOffer</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlDataOffer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlDataOffer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_data_offer_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_data_offer&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">3</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataOffer</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlDataOffer</span> {
            <span class="ident">WlDataOffer</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlDataOffer</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">mime_type</span> <span class="op">=</span> {<span class="ident">String</span>::<span class="ident">from_utf8_lossy</span>(<span class="ident">CStr</span>::<span class="ident">from_ptr</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> _)).<span class="ident">to_bytes</span>()).<span class="ident">into_owned</span>()};
                    (<span class="ident">implementation</span>.<span class="ident">offer</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">mime_type</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">source_actions</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">source_actions</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">source_actions</span>);
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">dnd_action</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">action</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">dnd_action</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// finish request was called untimely</span>
        <span class="ident">InvalidFinish</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// action mask contains invalid values</span>
        <span class="ident">InvalidActionMask</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// action argument has an invalid value</span>
        <span class="ident">InvalidAction</span> <span class="op">=</span> <span class="number">2</span>,
        <span class="doccomment">/// offer doesn&#39;t accept this request</span>
        <span class="ident">InvalidOffer</span> <span class="op">=</span> <span class="number">3</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidFinish</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidActionMask</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidAction</span>),
                <span class="number">3</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidOffer</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// advertise offered mime type</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Sent immediately after creating the wl_data_offer object.  One</span>
        <span class="doccomment">/// event per offered mime type.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_offer, mime_type</span>
        <span class="kw">pub</span> <span class="ident">offer</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_offer</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataOffer</span>, <span class="ident">mime_type</span>: <span class="ident">String</span>),
        <span class="doccomment">/// notify the source-side available actions</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event indicates the actions offered by the data source. It</span>
        <span class="doccomment">/// will be sent right after wl_data_device.enter, or anytime the source</span>
        <span class="doccomment">/// side changes its offered actions through wl_data_source.set_actions.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_offer, source_actions</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="ident">source_actions</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_offer</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataOffer</span>, <span class="ident">source_actions</span>: <span class="ident">u32</span>),
        <span class="doccomment">/// notify the selected action</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event indicates the action selected by the compositor after</span>
        <span class="doccomment">/// matching the source/destination side actions. Only one action (or</span>
        <span class="doccomment">/// none) will be offered here.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event can be emitted multiple times during the drag-and-drop</span>
        <span class="doccomment">/// operation in response to destination side action changes through</span>
        <span class="doccomment">/// wl_data_offer.set_actions.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event will no longer be emitted after wl_data_device.drop</span>
        <span class="doccomment">/// happened on the drag-and-drop destination, the client must</span>
        <span class="doccomment">/// honor the last action received, or the last preferred one set</span>
        <span class="doccomment">/// through wl_data_offer.set_actions when handling an &quot;ask&quot; action.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Compositors may also change the selected action on the fly, mainly</span>
        <span class="doccomment">/// in response to keyboard modifier changes during the drag-and-drop</span>
        <span class="doccomment">/// operation.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The most recent action received is always the valid one. Prior to</span>
        <span class="doccomment">/// receiving wl_data_device.drop, the chosen action may change (e.g.</span>
        <span class="doccomment">/// due to keyboard modifiers being pressed). At the time of receiving</span>
        <span class="doccomment">/// wl_data_device.drop the drag-and-drop destination must honor the</span>
        <span class="doccomment">/// last action received.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Action changes may still happen after wl_data_device.drop,</span>
        <span class="doccomment">/// especially on &quot;ask&quot; actions, where the drag-and-drop destination</span>
        <span class="doccomment">/// may choose another action afterwards. Action changes happening</span>
        <span class="doccomment">/// at this stage are always the result of inter-client negotiation, the</span>
        <span class="doccomment">/// compositor shall no longer be able to induce a different action.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Upon &quot;ask&quot; actions, it is expected that the drag-and-drop destination</span>
        <span class="doccomment">/// may potentially choose a different action and/or mime type,</span>
        <span class="doccomment">/// based on wl_data_offer.source_actions and finally chosen by the</span>
        <span class="doccomment">/// user (e.g. popping up a menu with the available options). The</span>
        <span class="doccomment">/// final wl_data_offer.set_actions and wl_data_offer.accept requests</span>
        <span class="doccomment">/// must happen before the call to wl_data_offer.finish.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_offer, dnd_action</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="ident">action</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_offer</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataOffer</span>, <span class="ident">dnd_action</span>: <span class="ident">u32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">offer</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">offer</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">source_actions</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">source_actions</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">action</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">action</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_DATA_OFFER_ACCEPT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_OFFER_RECEIVE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_OFFER_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_OFFER_FINISH</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_OFFER_SET_ACTIONS</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span>;
    <span class="kw">impl</span> <span class="ident">WlDataOffer</span> {
        <span class="doccomment">/// accept one of the offered mime types</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Indicate that the client can accept the given mime type, or</span>
        <span class="doccomment">/// NULL for not accepted.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For objects of version 2 or older, this request is used by the</span>
        <span class="doccomment">/// client to give feedback whether the client can receive the given</span>
        <span class="doccomment">/// mime type, or NULL if none is accepted; the feedback does not</span>
        <span class="doccomment">/// determine whether the drag-and-drop operation succeeds or not.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For objects of version 3 or newer, this request determines the</span>
        <span class="doccomment">/// final result of the drag-and-drop operation. If the end result</span>
        <span class="doccomment">/// is that no mime types were accepted, the drag-and-drop operation</span>
        <span class="doccomment">/// will be cancelled and the corresponding drag source will receive</span>
        <span class="doccomment">/// wl_data_source.cancelled. Clients may still use this event in</span>
        <span class="doccomment">/// conjunction with wl_data_source.action for feedback.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">accept</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">mime_type</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">mime_type</span> <span class="op">=</span> <span class="ident">mime_type</span>.<span class="ident">map</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> <span class="ident">CString</span>::<span class="ident">new</span>(<span class="ident">s</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span>_<span class="op">|</span> <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Got a String with interior null in wl_data_offer.accept:mime_type&quot;</span>)));
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_OFFER_ACCEPT</span>, <span class="ident">serial</span>, <span class="ident">mime_type</span>.<span class="ident">as_ref</span>().<span class="ident">map</span>(<span class="op">|</span><span class="ident">s</span><span class="op">|</span> <span class="ident">s</span>.<span class="ident">as_ptr</span>()).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null</span>())) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// request that the data is transferred</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// To transfer the offered data, the client issues this request</span>
        <span class="doccomment">/// and indicates the mime type it wants to receive.  The transfer</span>
        <span class="doccomment">/// happens through the passed file descriptor (typically created</span>
        <span class="doccomment">/// with the pipe system call).  The source client writes the data</span>
        <span class="doccomment">/// in the mime type representation requested and then closes the</span>
        <span class="doccomment">/// file descriptor.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The receiving client reads from the read end of the pipe until</span>
        <span class="doccomment">/// EOF and then closes its end, at which point the transfer is</span>
        <span class="doccomment">/// complete.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request may happen multiple times for different mime types,</span>
        <span class="doccomment">/// both before and after wl_data_device.drop. Drag-and-drop destination</span>
        <span class="doccomment">/// clients may preemptively fetch data or examine it more closely to</span>
        <span class="doccomment">/// determine acceptance.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">receive</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">mime_type</span>: <span class="ident">String</span>, <span class="ident">fd</span>: ::<span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">io</span>::<span class="ident">RawFd</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">mime_type</span> <span class="op">=</span> <span class="ident">CString</span>::<span class="ident">new</span>(<span class="ident">mime_type</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span>_<span class="op">|</span> <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Got a String with interior null in wl_data_offer.receive:mime_type&quot;</span>));
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_OFFER_RECEIVE</span>, <span class="ident">mime_type</span>.<span class="ident">as_ptr</span>(), <span class="ident">fd</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// destroy data offer</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Destroy the data offer.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_OFFER_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// the offer will no longer be used</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notifies the compositor that the drag destination successfully</span>
        <span class="doccomment">/// finished the drag-and-drop operation.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Upon receiving this request, the compositor will emit</span>
        <span class="doccomment">/// wl_data_source.dnd_finished on the drag source client.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// It is a client error to perform other requests than</span>
        <span class="doccomment">/// wl_data_offer.destroy after this one. It is also an error to perform</span>
        <span class="doccomment">/// this request after a NULL mime type has been set in</span>
        <span class="doccomment">/// wl_data_offer.accept or no action was received through</span>
        <span class="doccomment">/// wl_data_offer.action.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">finish</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_OFFER_FINISH</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set the available/preferred drag-and-drop actions</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Sets the actions that the destination side client supports for</span>
        <span class="doccomment">/// this operation. This request may trigger the emission of</span>
        <span class="doccomment">/// wl_data_source.action and wl_data_offer.action events if the compositor</span>
        <span class="doccomment">/// needs to change the selected action.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request can be called multiple times throughout the</span>
        <span class="doccomment">/// drag-and-drop operation, typically in response to wl_data_device.enter</span>
        <span class="doccomment">/// or wl_data_device.motion events.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request determines the final result of the drag-and-drop</span>
        <span class="doccomment">/// operation. If the end result is that no action is accepted,</span>
        <span class="doccomment">/// the drag source will receive wl_drag_source.cancelled.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The dnd_actions argument must contain only values expressed in the</span>
        <span class="doccomment">/// wl_data_device_manager.dnd_actions enum, and the preferred_action</span>
        <span class="doccomment">/// argument must only contain one of those values set, otherwise it</span>
        <span class="doccomment">/// will result in a protocol error.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// While managing an &quot;ask&quot; action, the destination drag-and-drop client</span>
        <span class="doccomment">/// may perform further wl_data_offer.receive requests, and is expected</span>
        <span class="doccomment">/// to perform one last wl_data_offer.set_actions request with a preferred</span>
        <span class="doccomment">/// action other than &quot;ask&quot; (and optionally wl_data_offer.accept) before</span>
        <span class="doccomment">/// requesting wl_data_offer.finish, in order to convey the action selected</span>
        <span class="doccomment">/// by the user. If the preferred action is not in the</span>
        <span class="doccomment">/// wl_data_offer.source_actions mask, an error will be raised.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the &quot;ask&quot; action is dismissed (e.g. user cancellation), the client</span>
        <span class="doccomment">/// is expected to perform wl_data_offer.destroy right away.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request can only be made on drag-and-drop offers, a protocol error</span>
        <span class="doccomment">/// will be raised otherwise.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_actions</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">dnd_actions</span>: <span class="ident">u32</span>, <span class="ident">preferred_action</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_OFFER_SET_ACTIONS</span>, <span class="ident">dnd_actions</span>, <span class="ident">preferred_action</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_data_source</span> {
    <span class="doccomment">//! offer to transfer data</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The wl_data_source object is the source side of a wl_data_offer.</span>
    <span class="doccomment">//! It is created by the source client in a data transfer and</span>
    <span class="doccomment">//! provides a way to describe the offered data and a way to respond</span>
    <span class="doccomment">//! to requests to transfer the data.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlDataSource</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlDataSource</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlDataSource</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlDataSource</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataSource</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlDataSource</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataSource</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlDataSource</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlDataSource</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_data_source_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_data_source&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">3</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataSource</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlDataSource</span> {
            <span class="ident">WlDataSource</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlDataSource</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">mime_type</span> <span class="op">=</span> {<span class="kw">if</span> (<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">c_void</span>)).<span class="ident">is_null</span>() { <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> } <span class="kw">else</span> { <span class="prelude-val">Some</span>({<span class="ident">String</span>::<span class="ident">from_utf8_lossy</span>(<span class="ident">CStr</span>::<span class="ident">from_ptr</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> _)).<span class="ident">to_bytes</span>()).<span class="ident">into_owned</span>()})}};
                    (<span class="ident">implementation</span>.<span class="ident">target</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">mime_type</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">mime_type</span> <span class="op">=</span> {<span class="ident">String</span>::<span class="ident">from_utf8_lossy</span>(<span class="ident">CStr</span>::<span class="ident">from_ptr</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> _)).<span class="ident">to_bytes</span>()).<span class="ident">into_owned</span>()};
                    <span class="kw">let</span> <span class="ident">fd</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">send</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">mime_type</span>, <span class="ident">fd</span>);
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">cancelled</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">3</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">dnd_drop_performed</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">4</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">dnd_finished</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">5</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">dnd_action</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">action</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">dnd_action</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// action mask contains invalid values</span>
        <span class="ident">InvalidActionMask</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// source doesn&#39;t accept this request</span>
        <span class="ident">InvalidSource</span> <span class="op">=</span> <span class="number">1</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidActionMask</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidSource</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// a target accepts an offered mime type</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Sent when a target accepts pointer_focus or motion events.  If</span>
        <span class="doccomment">/// a target does not accept any of the offered types, type is NULL.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Used for feedback during drag-and-drop.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_source, mime_type</span>
        <span class="kw">pub</span> <span class="ident">target</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_source</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataSource</span>, <span class="ident">mime_type</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">String</span><span class="op">&gt;</span>),
        <span class="doccomment">/// send the data</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Request for data from the client.  Send the data as the</span>
        <span class="doccomment">/// specified mime type over the passed file descriptor, then</span>
        <span class="doccomment">/// close it.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_source, mime_type, fd</span>
        <span class="kw">pub</span> <span class="ident">send</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_source</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataSource</span>, <span class="ident">mime_type</span>: <span class="ident">String</span>, <span class="ident">fd</span>: ::<span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">io</span>::<span class="ident">RawFd</span>),
        <span class="doccomment">/// selection was cancelled</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This data source is no longer valid. There are several reasons why</span>
        <span class="doccomment">/// this could happen:</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// - The data source has been replaced by another data source.</span>
        <span class="doccomment">/// - The drag-and-drop operation was performed, but the drop destination</span>
        <span class="doccomment">/// did not accept any of the mime types offered through</span>
        <span class="doccomment">/// wl_data_source.target.</span>
        <span class="doccomment">/// - The drag-and-drop operation was performed, but the drop destination</span>
        <span class="doccomment">/// did not select any of the actions present in the mask offered through</span>
        <span class="doccomment">/// wl_data_source.action.</span>
        <span class="doccomment">/// - The drag-and-drop operation was performed but didn&#39;t happen over a</span>
        <span class="doccomment">/// surface.</span>
        <span class="doccomment">/// - The compositor cancelled the drag-and-drop operation (e.g. compositor</span>
        <span class="doccomment">/// dependent timeouts to avoid stale drag-and-drop transfers).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The client should clean up and destroy this data source.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For objects of version 2 or older, wl_data_source.cancelled will</span>
        <span class="doccomment">/// only be emitted if the data source was replaced by another data</span>
        <span class="doccomment">/// source.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_source</span>
        <span class="kw">pub</span> <span class="ident">cancelled</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_source</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataSource</span>),
        <span class="doccomment">/// the drag-and-drop operation physically finished</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The user performed the drop action. This event does not indicate</span>
        <span class="doccomment">/// acceptance, wl_data_source.cancelled may still be emitted afterwards</span>
        <span class="doccomment">/// if the drop destination does not accept any mime type.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// However, this event might however not be received if the compositor</span>
        <span class="doccomment">/// cancelled the drag-and-drop operation before this event could happen.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Note that the data_source may still be used in the future and should</span>
        <span class="doccomment">/// not be destroyed here.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_source</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="ident">dnd_drop_performed</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_source</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataSource</span>),
        <span class="doccomment">/// the drag-and-drop operation concluded</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The drop destination finished interoperating with this data</span>
        <span class="doccomment">/// source, so the client is now free to destroy this data source and</span>
        <span class="doccomment">/// free all associated data.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the action used to perform the operation was &quot;move&quot;, the</span>
        <span class="doccomment">/// source can now delete the transferred data.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_source</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="ident">dnd_finished</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_source</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataSource</span>),
        <span class="doccomment">/// notify the selected action</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event indicates the action selected by the compositor after</span>
        <span class="doccomment">/// matching the source/destination side actions. Only one action (or</span>
        <span class="doccomment">/// none) will be offered here.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event can be emitted multiple times during the drag-and-drop</span>
        <span class="doccomment">/// operation, mainly in response to destination side changes through</span>
        <span class="doccomment">/// wl_data_offer.set_actions, and as the data device enters/leaves</span>
        <span class="doccomment">/// surfaces.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// It is only possible to receive this event after</span>
        <span class="doccomment">/// wl_data_source.dnd_drop_performed if the drag-and-drop operation</span>
        <span class="doccomment">/// ended in an &quot;ask&quot; action, in which case the final wl_data_source.action</span>
        <span class="doccomment">/// event will happen immediately before wl_data_source.dnd_finished.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Compositors may also change the selected action on the fly, mainly</span>
        <span class="doccomment">/// in response to keyboard modifier changes during the drag-and-drop</span>
        <span class="doccomment">/// operation.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The most recent action received is always the valid one. The chosen</span>
        <span class="doccomment">/// action may change alongside negotiation (e.g. an &quot;ask&quot; action can turn</span>
        <span class="doccomment">/// into a &quot;move&quot; operation), so the effects of the final action must</span>
        <span class="doccomment">/// always be applied in wl_data_offer.dnd_finished.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Clients can trigger cursor surface changes from this point, so</span>
        <span class="doccomment">/// they reflect the current action.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_source, dnd_action</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="ident">action</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_source</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataSource</span>, <span class="ident">dnd_action</span>: <span class="ident">u32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">target</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">target</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">send</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">send</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">cancelled</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">cancelled</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">dnd_drop_performed</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">dnd_drop_performed</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">dnd_finished</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">dnd_finished</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">action</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">action</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_DATA_SOURCE_OFFER</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_SOURCE_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_SOURCE_SET_ACTIONS</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">impl</span> <span class="ident">WlDataSource</span> {
        <span class="doccomment">/// add an offered mime type</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request adds a mime type to the set of mime types</span>
        <span class="doccomment">/// advertised to targets.  Can be called several times to offer</span>
        <span class="doccomment">/// multiple types.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">offer</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">mime_type</span>: <span class="ident">String</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">mime_type</span> <span class="op">=</span> <span class="ident">CString</span>::<span class="ident">new</span>(<span class="ident">mime_type</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span>_<span class="op">|</span> <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Got a String with interior null in wl_data_source.offer:mime_type&quot;</span>));
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_SOURCE_OFFER</span>, <span class="ident">mime_type</span>.<span class="ident">as_ptr</span>()) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// destroy the data source</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Destroy the data source.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_SOURCE_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set the available drag-and-drop actions</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Sets the actions that the source side client supports for this</span>
        <span class="doccomment">/// operation. This request may trigger wl_data_source.action and</span>
        <span class="doccomment">/// wl_data_offer.action events if the compositor needs to change the</span>
        <span class="doccomment">/// selected action.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The dnd_actions argument must contain only values expressed in the</span>
        <span class="doccomment">/// wl_data_device_manager.dnd_actions enum, otherwise it will result</span>
        <span class="doccomment">/// in a protocol error.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request must be made once only, and can only be made on sources</span>
        <span class="doccomment">/// used in drag-and-drop, so it must be performed before</span>
        <span class="doccomment">/// wl_data_device.start_drag. Attempting to use the source other than</span>
        <span class="doccomment">/// for drag-and-drop will raise a protocol error.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_actions</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">dnd_actions</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_SOURCE_SET_ACTIONS</span>, <span class="ident">dnd_actions</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_data_device</span> {
    <span class="doccomment">//! data transfer device</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! There is one wl_data_device per seat which can be obtained</span>
    <span class="doccomment">//! from the global wl_data_device_manager singleton.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! A wl_data_device provides access to inter-client data transfer</span>
    <span class="doccomment">//! mechanisms such as copy-and-paste and drag-and-drop.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlDataDevice</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlDataDevice</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlDataDevice</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlDataDevice</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataDevice</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlDataDevice</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataDevice</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlDataDevice</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlDataDevice</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_data_device_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_data_device&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">3</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDevice</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlDataDevice</span> {
            <span class="ident">WlDataDevice</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlDataDevice</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">data_offer</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">id</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">surface</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    <span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    <span class="kw">let</span> <span class="ident">y</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> {<span class="kw">if</span> (<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">4</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">c_void</span>)).<span class="ident">is_null</span>() { <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> } <span class="kw">else</span> { <span class="prelude-val">Some</span>({<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">4</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))})}};
                    (<span class="ident">implementation</span>.<span class="ident">enter</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="kw-2">&amp;</span><span class="ident">surface</span>, <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">id</span>.<span class="ident">as_ref</span>());
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">leave</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">3</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    <span class="kw">let</span> <span class="ident">y</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">motion</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">time</span>, <span class="ident">x</span>, <span class="ident">y</span>);
                },
                <span class="number">4</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">drop</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">5</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> {<span class="kw">if</span> (<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">c_void</span>)).<span class="ident">is_null</span>() { <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> } <span class="kw">else</span> { <span class="prelude-val">Some</span>({<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))})}};
                    (<span class="ident">implementation</span>.<span class="ident">selection</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">id</span>.<span class="ident">as_ref</span>());
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// given wl_surface has another role</span>
        <span class="ident">Role</span> <span class="op">=</span> <span class="number">0</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">Role</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// introduce a new wl_data_offer</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The data_offer event introduces a new wl_data_offer object,</span>
        <span class="doccomment">/// which will subsequently be used in either the</span>
        <span class="doccomment">/// data_device.enter event (for drag-and-drop) or the</span>
        <span class="doccomment">/// data_device.selection event (for selections).  Immediately</span>
        <span class="doccomment">/// following the data_device_data_offer event, the new data_offer</span>
        <span class="doccomment">/// object will send out data_offer.offer events to describe the</span>
        <span class="doccomment">/// mime types it offers.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_device, id</span>
        <span class="kw">pub</span> <span class="ident">data_offer</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_device</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDevice</span>, <span class="ident">id</span>: <span class="kw">super</span>::<span class="ident">wl_data_offer</span>::<span class="ident">WlDataOffer</span>),
        <span class="doccomment">/// initiate drag-and-drop session</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event is sent when an active drag-and-drop pointer enters</span>
        <span class="doccomment">/// a surface owned by the client.  The position of the pointer at</span>
        <span class="doccomment">/// enter time is provided by the x and y arguments, in surface-local</span>
        <span class="doccomment">/// coordinates.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_device, serial, surface, x, y, id</span>
        <span class="kw">pub</span> <span class="ident">enter</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_device</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDevice</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">x</span>: <span class="ident">f64</span>, <span class="ident">y</span>: <span class="ident">f64</span>, <span class="ident">id</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_data_offer</span>::<span class="ident">WlDataOffer</span><span class="op">&gt;</span>),
        <span class="doccomment">/// end drag-and-drop session</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event is sent when the drag-and-drop pointer leaves the</span>
        <span class="doccomment">/// surface and the session ends.  The client must destroy the</span>
        <span class="doccomment">/// wl_data_offer introduced at enter time at this point.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_device</span>
        <span class="kw">pub</span> <span class="ident">leave</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_device</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDevice</span>),
        <span class="doccomment">/// drag-and-drop session motion</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event is sent when the drag-and-drop pointer moves within</span>
        <span class="doccomment">/// the currently focused surface. The new position of the pointer</span>
        <span class="doccomment">/// is provided by the x and y arguments, in surface-local</span>
        <span class="doccomment">/// coordinates.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_device, time, x, y</span>
        <span class="kw">pub</span> <span class="ident">motion</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_device</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDevice</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">x</span>: <span class="ident">f64</span>, <span class="ident">y</span>: <span class="ident">f64</span>),
        <span class="doccomment">/// end drag-and-drop session successfully</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The event is sent when a drag-and-drop operation is ended</span>
        <span class="doccomment">/// because the implicit grab is removed.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The drag-and-drop destination is expected to honor the last action</span>
        <span class="doccomment">/// received through wl_data_offer.action, if the resulting action is</span>
        <span class="doccomment">/// &quot;copy&quot; or &quot;move&quot;, the destination can still perform</span>
        <span class="doccomment">/// wl_data_offer.receive requests, and is expected to end all</span>
        <span class="doccomment">/// transfers with a wl_data_offer.finish request.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the resulting action is &quot;ask&quot;, the action will not be considered</span>
        <span class="doccomment">/// final. The drag-and-drop destination is expected to perform one last</span>
        <span class="doccomment">/// wl_data_offer.set_actions request, or wl_data_offer.destroy in order</span>
        <span class="doccomment">/// to cancel the operation.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_device</span>
        <span class="kw">pub</span> <span class="ident">drop</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_device</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDevice</span>),
        <span class="doccomment">/// advertise new selection</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The selection event is sent out to notify the client of a new</span>
        <span class="doccomment">/// wl_data_offer for the selection for this device.  The</span>
        <span class="doccomment">/// data_device.data_offer and the data_offer.offer events are</span>
        <span class="doccomment">/// sent out immediately before this event to introduce the data</span>
        <span class="doccomment">/// offer object.  The selection event is sent to a client</span>
        <span class="doccomment">/// immediately before receiving keyboard focus and when a new</span>
        <span class="doccomment">/// selection is set while the client has keyboard focus.  The</span>
        <span class="doccomment">/// data_offer is valid until a new data_offer or NULL is received</span>
        <span class="doccomment">/// or until the client loses keyboard focus.  The client must</span>
        <span class="doccomment">/// destroy the previous selection data_offer, if any, upon receiving</span>
        <span class="doccomment">/// this event.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_data_device, id</span>
        <span class="kw">pub</span> <span class="ident">selection</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_data_device</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDevice</span>, <span class="ident">id</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_data_offer</span>::<span class="ident">WlDataOffer</span><span class="op">&gt;</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">data_offer</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">data_offer</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">motion</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">motion</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">drop</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">drop</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">selection</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">selection</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_DATA_DEVICE_START_DRAG</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_DEVICE_SET_SELECTION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_DEVICE_RELEASE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">impl</span> <span class="ident">WlDataDevice</span> {
        <span class="doccomment">/// start drag-and-drop operation</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request asks the compositor to start a drag-and-drop</span>
        <span class="doccomment">/// operation on behalf of the client.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The source argument is the data source that provides the data</span>
        <span class="doccomment">/// for the eventual data transfer. If source is NULL, enter, leave</span>
        <span class="doccomment">/// and motion events are sent only to the client that initiated the</span>
        <span class="doccomment">/// drag and the client is expected to handle the data passing</span>
        <span class="doccomment">/// internally.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The origin surface is the surface where the drag originates and</span>
        <span class="doccomment">/// the client must have an active implicit grab that matches the</span>
        <span class="doccomment">/// serial.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The icon surface is an optional (can be NULL) surface that</span>
        <span class="doccomment">/// provides an icon to be moved around with the cursor.  Initially,</span>
        <span class="doccomment">/// the top-left corner of the icon surface is placed at the cursor</span>
        <span class="doccomment">/// hotspot, but subsequent wl_surface.attach request can move the</span>
        <span class="doccomment">/// relative position. Attach requests must be confirmed with</span>
        <span class="doccomment">/// wl_surface.commit as usual. The icon surface is given the role of</span>
        <span class="doccomment">/// a drag-and-drop icon. If the icon surface already has another role,</span>
        <span class="doccomment">/// it raises a protocol error.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The current and pending input regions of the icon wl_surface are</span>
        <span class="doccomment">/// cleared, and wl_surface.set_input_region is ignored until the</span>
        <span class="doccomment">/// wl_surface is no longer used as the icon surface. When the use</span>
        <span class="doccomment">/// as an icon ends, the current and pending input regions become</span>
        <span class="doccomment">/// undefined, and the wl_surface is unmapped.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">start_drag</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">source</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_data_source</span>::<span class="ident">WlDataSource</span><span class="op">&gt;</span>, <span class="ident">origin</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">icon</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span><span class="op">&gt;</span>, <span class="ident">serial</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_DEVICE_START_DRAG</span>, <span class="ident">source</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()), <span class="ident">origin</span>.<span class="ident">ptr</span>(), <span class="ident">icon</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()), <span class="ident">serial</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// copy data to the selection</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request asks the compositor to set the selection</span>
        <span class="doccomment">/// to the data from the source on behalf of the client.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// To unset the selection, set the source to NULL.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_selection</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">source</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_data_source</span>::<span class="ident">WlDataSource</span><span class="op">&gt;</span>, <span class="ident">serial</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_DEVICE_SET_SELECTION</span>, <span class="ident">source</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()), <span class="ident">serial</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// destroy data device</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request destroys the data device.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 2 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">release</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_DEVICE_RELEASE</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_data_device_manager</span> {
    <span class="doccomment">//! data transfer interface</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The wl_data_device_manager is a singleton global object that</span>
    <span class="doccomment">//! provides access to inter-client data transfer mechanisms such as</span>
    <span class="doccomment">//! copy-and-paste and drag-and-drop.  These mechanisms are tied to</span>
    <span class="doccomment">//! a wl_seat and this interface lets a client get a wl_data_device</span>
    <span class="doccomment">//! corresponding to a wl_seat.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Depending on the version bound, the objects created from the bound</span>
    <span class="doccomment">//! wl_data_device_manager object will have different requirements for</span>
    <span class="doccomment">//! functioning properly. See wl_data_source.set_actions,</span>
    <span class="doccomment">//! wl_data_offer.accept and wl_data_offer.finish for details.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlDataDeviceManager</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlDataDeviceManager</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlDataDeviceManager</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlDataDeviceManager</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataDeviceManager</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlDataDeviceManager</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlDataDeviceManager</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlDataDeviceManager</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlDataDeviceManager</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_data_device_manager_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_data_device_manager&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">3</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlDataDeviceManager</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlDataDeviceManager</span> {
            <span class="ident">WlDataDeviceManager</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="macro">bitflags</span><span class="macro">!</span> {
        <span class="doccomment">/// drag and drop actions</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a bitmask of the available/preferred actions in a</span>
        <span class="doccomment">/// drag-and-drop operation.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// In the compositor, the selected action is a result of matching the</span>
        <span class="doccomment">/// actions offered by the source and destination sides.  &quot;action&quot; events</span>
        <span class="doccomment">/// with a &quot;none&quot; action will be sent to both source and destination if</span>
        <span class="doccomment">/// there is no match. All further checks will effectively happen on</span>
        <span class="doccomment">/// (source actions ∩ destination actions).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// In addition, compositors may also pick different actions in</span>
        <span class="doccomment">/// reaction to key modifiers being pressed. One common design that</span>
        <span class="doccomment">/// is used in major toolkits (and the behavior recommended for</span>
        <span class="doccomment">/// compositors) is:</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// - If no modifiers are pressed, the first match (in bit order)</span>
        <span class="doccomment">/// will be used.</span>
        <span class="doccomment">/// - Pressing Shift selects &quot;move&quot;, if enabled in the mask.</span>
        <span class="doccomment">/// - Pressing Control selects &quot;copy&quot;, if enabled in the mask.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Behavior beyond that is considered implementation-dependent.</span>
        <span class="doccomment">/// Compositors may for example bind other modifiers (like Alt/Meta)</span>
        <span class="doccomment">/// or drags initiated with other buttons than BTN_LEFT to specific</span>
        <span class="doccomment">/// actions (e.g. &quot;ask&quot;).</span>
        <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">DndAction</span>: <span class="ident">u32</span> {
            <span class="doccomment">/// no action</span>
            <span class="kw">const</span> <span class="prelude-val">None</span> <span class="op">=</span> <span class="number">0</span>;
            <span class="doccomment">/// copy action</span>
            <span class="kw">const</span> <span class="ident">Copy</span> <span class="op">=</span> <span class="number">1</span>;
            <span class="doccomment">/// move action</span>
            <span class="kw">const</span> <span class="ident">Move</span> <span class="op">=</span> <span class="number">2</span>;
            <span class="doccomment">/// ask action</span>
            <span class="kw">const</span> <span class="ident">Ask</span> <span class="op">=</span> <span class="number">4</span>;
        }
    }
    <span class="kw">impl</span> <span class="ident">DndAction</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">DndAction</span><span class="op">&gt;</span> {
            <span class="prelude-val">Some</span>(<span class="ident">DndAction</span>::<span class="ident">from_bits_truncate</span>(<span class="ident">n</span>))
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="self">self</span>.<span class="ident">bits</span>()
        }
    }
    <span class="kw">const</span> <span class="ident">WL_DATA_DEVICE_MANAGER_CREATE_DATA_SOURCE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_DATA_DEVICE_MANAGER_GET_DATA_DEVICE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">impl</span> <span class="ident">WlDataDeviceManager</span> {
        <span class="doccomment">/// create a new data source</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Create a new data source.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">create_data_source</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_data_source</span>::<span class="ident">WlDataSource</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_DEVICE_MANAGER_CREATE_DATA_SOURCE</span>, <span class="kw-2">&amp;</span><span class="ident">wl_data_source_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
        <span class="doccomment">/// create a new data device</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Create a new data device for a given seat.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_data_device</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_data_device</span>::<span class="ident">WlDataDevice</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_DATA_DEVICE_MANAGER_GET_DATA_DEVICE</span>, <span class="kw-2">&amp;</span><span class="ident">wl_data_device_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>(), <span class="ident">seat</span>.<span class="ident">ptr</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_shell</span> {
    <span class="doccomment">//! create desktop-style surfaces</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! This interface is implemented by servers that provide</span>
    <span class="doccomment">//! desktop-style user interfaces.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! It allows clients to associate a wl_shell_surface with</span>
    <span class="doccomment">//! a basic surface.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlShell</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlShell</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlShell</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlShell</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShell</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlShell</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShell</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlShell</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlShell</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_shell_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_shell&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlShell</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlShell</span> {
            <span class="ident">WlShell</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// given wl_surface has another role</span>
        <span class="ident">Role</span> <span class="op">=</span> <span class="number">0</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">Role</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">const</span> <span class="ident">WL_SHELL_GET_SHELL_SURFACE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">WlShell</span> {
        <span class="doccomment">/// create a shell surface from a surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Create a shell surface for an existing surface. This gives</span>
        <span class="doccomment">/// the wl_surface the role of a shell surface. If the wl_surface</span>
        <span class="doccomment">/// already has another role, it raises a protocol error.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Only one shell surface can be associated with a given surface.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_shell_surface</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>) <span class="op">-&gt;</span><span class="kw">super</span>::<span class="ident">wl_shell_surface</span>::<span class="ident">WlShellSurface</span> {
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_GET_SHELL_SURFACE</span>, <span class="kw-2">&amp;</span><span class="ident">wl_shell_surface_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>(), <span class="ident">surface</span>.<span class="ident">ptr</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">proxy</span>
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_shell_surface</span> {
    <span class="doccomment">//! desktop-style metadata interface</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! An interface that may be implemented by a wl_surface, for</span>
    <span class="doccomment">//! implementations that provide a desktop-style user interface.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! It provides requests to treat surfaces like toplevel, fullscreen</span>
    <span class="doccomment">//! or popup windows, move, resize or maximize them, associate</span>
    <span class="doccomment">//! metadata like title and class, etc.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! On the server side the object is automatically destroyed when</span>
    <span class="doccomment">//! the related wl_surface is destroyed. On the client side,</span>
    <span class="doccomment">//! wl_shell_surface_destroy() must be called before destroying</span>
    <span class="doccomment">//! the wl_surface object.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlShellSurface</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlShellSurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlShellSurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlShellSurface</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShellSurface</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlShellSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlShellSurface</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlShellSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlShellSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_shell_surface_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_shell_surface&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlShellSurface</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlShellSurface</span> {
            <span class="ident">WlShellSurface</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlShellSurface</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">ping</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">edges</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Resize</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    <span class="kw">let</span> <span class="ident">width</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">height</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">configure</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">edges</span>, <span class="ident">width</span>, <span class="ident">height</span>);
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">popup_done</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="macro">bitflags</span><span class="macro">!</span> {
        <span class="doccomment">/// edge values for resizing</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// These values are used to indicate which edge of a surface</span>
        <span class="doccomment">/// is being dragged in a resize operation. The server may</span>
        <span class="doccomment">/// use this information to adapt its behavior, e.g. choose</span>
        <span class="doccomment">/// an appropriate cursor image.</span>
        <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Resize</span>: <span class="ident">u32</span> {
            <span class="doccomment">/// no edge</span>
            <span class="kw">const</span> <span class="prelude-val">None</span> <span class="op">=</span> <span class="number">0</span>;
            <span class="doccomment">/// top edge</span>
            <span class="kw">const</span> <span class="ident">Top</span> <span class="op">=</span> <span class="number">1</span>;
            <span class="doccomment">/// bottom edge</span>
            <span class="kw">const</span> <span class="ident">Bottom</span> <span class="op">=</span> <span class="number">2</span>;
            <span class="doccomment">/// left edge</span>
            <span class="kw">const</span> <span class="ident">Left</span> <span class="op">=</span> <span class="number">4</span>;
            <span class="doccomment">/// top and left edges</span>
            <span class="kw">const</span> <span class="ident">TopLeft</span> <span class="op">=</span> <span class="number">5</span>;
            <span class="doccomment">/// bottom and left edges</span>
            <span class="kw">const</span> <span class="ident">BottomLeft</span> <span class="op">=</span> <span class="number">6</span>;
            <span class="doccomment">/// right edge</span>
            <span class="kw">const</span> <span class="ident">Right</span> <span class="op">=</span> <span class="number">8</span>;
            <span class="doccomment">/// top and right edges</span>
            <span class="kw">const</span> <span class="ident">TopRight</span> <span class="op">=</span> <span class="number">9</span>;
            <span class="doccomment">/// bottom and right edges</span>
            <span class="kw">const</span> <span class="ident">BottomRight</span> <span class="op">=</span> <span class="number">10</span>;
        }
    }
    <span class="kw">impl</span> <span class="ident">Resize</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Resize</span><span class="op">&gt;</span> {
            <span class="prelude-val">Some</span>(<span class="ident">Resize</span>::<span class="ident">from_bits_truncate</span>(<span class="ident">n</span>))
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="self">self</span>.<span class="ident">bits</span>()
        }
    }
    <span class="macro">bitflags</span><span class="macro">!</span> {
        <span class="doccomment">/// details of transient behaviour</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// These flags specify details of the expected behaviour</span>
        <span class="doccomment">/// of transient surfaces. Used in the set_transient request.</span>
        <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Transient</span>: <span class="ident">u32</span> {
            <span class="doccomment">/// do not set keyboard focus</span>
            <span class="kw">const</span> <span class="ident">Inactive</span> <span class="op">=</span> <span class="number">0x1</span>;
        }
    }
    <span class="kw">impl</span> <span class="ident">Transient</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Transient</span><span class="op">&gt;</span> {
            <span class="prelude-val">Some</span>(<span class="ident">Transient</span>::<span class="ident">from_bits_truncate</span>(<span class="ident">n</span>))
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="self">self</span>.<span class="ident">bits</span>()
        }
    }
    <span class="doccomment">/// different method to set the surface fullscreen</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Hints to indicate to the compositor how to deal with a conflict</span>
    <span class="doccomment">/// between the dimensions of the surface and the dimensions of the</span>
    <span class="doccomment">/// output. The compositor is free to ignore this parameter.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">FullscreenMethod</span> {
        <span class="doccomment">/// no preference, apply default policy</span>
        <span class="ident">Default</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// scale, preserve the surface&#39;s aspect ratio and center on output</span>
        <span class="ident">Scale</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// switch output mode to the smallest mode that can fit the surface, add black borders to compensate size mismatch</span>
        <span class="ident">Driver</span> <span class="op">=</span> <span class="number">2</span>,
        <span class="doccomment">/// no upscaling, center on output and add black borders to compensate size mismatch</span>
        <span class="ident">Fill</span> <span class="op">=</span> <span class="number">3</span>,
    }
    <span class="kw">impl</span> <span class="ident">FullscreenMethod</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">FullscreenMethod</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">FullscreenMethod</span>::<span class="ident">Default</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">FullscreenMethod</span>::<span class="ident">Scale</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">FullscreenMethod</span>::<span class="ident">Driver</span>),
                <span class="number">3</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">FullscreenMethod</span>::<span class="ident">Fill</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// ping client</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Ping a client to check if it is receiving events and sending</span>
        <span class="doccomment">/// requests. A client is expected to reply with a pong request.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_shell_surface, serial</span>
        <span class="kw">pub</span> <span class="ident">ping</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_shell_surface</span>: <span class="kw-2">&amp;</span><span class="ident">WlShellSurface</span>, <span class="ident">serial</span>: <span class="ident">u32</span>),
        <span class="doccomment">/// suggest resize</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The configure event asks the client to resize its surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The size is a hint, in the sense that the client is free to</span>
        <span class="doccomment">/// ignore it if it doesn&#39;t resize, pick a smaller size (to</span>
        <span class="doccomment">/// satisfy aspect ratio or resize in steps of NxM pixels).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The edges parameter provides a hint about how the surface</span>
        <span class="doccomment">/// was resized. The client may use this information to decide</span>
        <span class="doccomment">/// how to adjust its content to the new size (e.g. a scrolling</span>
        <span class="doccomment">/// area might adjust its content position to leave the viewable</span>
        <span class="doccomment">/// content unmoved).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The client is free to dismiss all but the last configure</span>
        <span class="doccomment">/// event it received.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The width and height arguments specify the size of the window</span>
        <span class="doccomment">/// in surface-local coordinates.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_shell_surface, edges, width, height</span>
        <span class="kw">pub</span> <span class="ident">configure</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_shell_surface</span>: <span class="kw-2">&amp;</span><span class="ident">WlShellSurface</span>, <span class="ident">edges</span>: <span class="ident">Resize</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>),
        <span class="doccomment">/// popup interaction is done</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The popup_done event is sent out when a popup grab is broken,</span>
        <span class="doccomment">/// that is, when the user clicks a surface that doesn&#39;t belong</span>
        <span class="doccomment">/// to the client owning the popup surface.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_shell_surface</span>
        <span class="kw">pub</span> <span class="ident">popup_done</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_shell_surface</span>: <span class="kw-2">&amp;</span><span class="ident">WlShellSurface</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">ping</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ping</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">configure</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">configure</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">popup_done</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">popup_done</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_PONG</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_MOVE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_RESIZE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_SET_TOPLEVEL</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_SET_TRANSIENT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_SET_FULLSCREEN</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">5</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_SET_POPUP</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">6</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_SET_MAXIMIZED</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">7</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_SET_TITLE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">8</span>;
    <span class="kw">const</span> <span class="ident">WL_SHELL_SURFACE_SET_CLASS</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">9</span>;
    <span class="kw">impl</span> <span class="ident">WlShellSurface</span> {
        <span class="doccomment">/// respond to a ping event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// A client must respond to a ping event with a pong request or</span>
        <span class="doccomment">/// the client may be deemed unresponsive.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pong</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">serial</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_PONG</span>, <span class="ident">serial</span>) };
        }
        <span class="doccomment">/// start an interactive move</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Start a pointer-driven move of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request must be used in response to a button press event.</span>
        <span class="doccomment">/// The server may ignore move requests depending on the state of</span>
        <span class="doccomment">/// the surface (e.g. fullscreen or maximized).</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">_move</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>, <span class="ident">serial</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_MOVE</span>, <span class="ident">seat</span>.<span class="ident">ptr</span>(), <span class="ident">serial</span>) };
        }
        <span class="doccomment">/// start an interactive resize</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Start a pointer-driven resizing of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request must be used in response to a button press event.</span>
        <span class="doccomment">/// The server may ignore resize requests depending on the state of</span>
        <span class="doccomment">/// the surface (e.g. fullscreen or maximized).</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">resize</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">edges</span>: <span class="ident">Resize</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_RESIZE</span>, <span class="ident">seat</span>.<span class="ident">ptr</span>(), <span class="ident">serial</span>, <span class="ident">edges</span>) };
        }
        <span class="doccomment">/// make the surface a toplevel surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Map the surface as a toplevel surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A toplevel surface is not fullscreen, maximized or transient.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_toplevel</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_SET_TOPLEVEL</span>) };
        }
        <span class="doccomment">/// make the surface a transient surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Map the surface relative to an existing surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The x and y arguments specify the location of the upper left</span>
        <span class="doccomment">/// corner of the surface relative to the upper left corner of the</span>
        <span class="doccomment">/// parent surface, in surface-local coordinates.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The flags argument controls details of the transient behaviour.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_transient</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">parent</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">flags</span>: <span class="ident">Transient</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_SET_TRANSIENT</span>, <span class="ident">parent</span>.<span class="ident">ptr</span>(), <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">flags</span>) };
        }
        <span class="doccomment">/// make the surface a fullscreen surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Map the surface as a fullscreen surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If an output parameter is given then the surface will be made</span>
        <span class="doccomment">/// fullscreen on that output. If the client does not specify the</span>
        <span class="doccomment">/// output then the compositor will apply its policy - usually</span>
        <span class="doccomment">/// choosing the output on which the surface has the biggest surface</span>
        <span class="doccomment">/// area.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The client may specify a method to resolve a size conflict</span>
        <span class="doccomment">/// between the output size and the surface size - this is provided</span>
        <span class="doccomment">/// through the method parameter.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The framerate parameter is used only when the method is set</span>
        <span class="doccomment">/// to &quot;driver&quot;, to indicate the preferred framerate. A value of 0</span>
        <span class="doccomment">/// indicates that the client does not care about framerate.  The</span>
        <span class="doccomment">/// framerate is specified in mHz, that is framerate of 60000 is 60Hz.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A method of &quot;scale&quot; or &quot;driver&quot; implies a scaling operation of</span>
        <span class="doccomment">/// the surface, either via a direct scaling operation or a change of</span>
        <span class="doccomment">/// the output mode. This will override any kind of output scaling, so</span>
        <span class="doccomment">/// that mapping a surface with a buffer size equal to the mode can</span>
        <span class="doccomment">/// fill the screen independent of buffer_scale.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A method of &quot;fill&quot; means we don&#39;t scale up the buffer, however</span>
        <span class="doccomment">/// any output scale is applied. This means that you may run into</span>
        <span class="doccomment">/// an edge case where the application maps a buffer with the same</span>
        <span class="doccomment">/// size of the output mode but buffer_scale 1 (thus making a</span>
        <span class="doccomment">/// surface larger than the output). In this case it is allowed to</span>
        <span class="doccomment">/// downscale the results to fit the screen.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The compositor must reply to this request with a configure event</span>
        <span class="doccomment">/// with the dimensions for the output on which the surface will</span>
        <span class="doccomment">/// be made fullscreen.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_fullscreen</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">method</span>: <span class="ident">FullscreenMethod</span>, <span class="ident">framerate</span>: <span class="ident">u32</span>, <span class="ident">output</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_output</span>::<span class="ident">WlOutput</span><span class="op">&gt;</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_SET_FULLSCREEN</span>, <span class="ident">method</span>, <span class="ident">framerate</span>, <span class="ident">output</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>())) };
        }
        <span class="doccomment">/// make the surface a popup surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Map the surface as a popup.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A popup surface is a transient surface with an added pointer</span>
        <span class="doccomment">/// grab.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// An existing implicit grab will be changed to owner-events mode,</span>
        <span class="doccomment">/// and the popup grab will continue after the implicit grab ends</span>
        <span class="doccomment">/// (i.e. releasing the mouse button does not cause the popup to</span>
        <span class="doccomment">/// be unmapped).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The popup grab continues until the window is destroyed or a</span>
        <span class="doccomment">/// mouse button is pressed in any other client&#39;s window. A click</span>
        <span class="doccomment">/// in any of the client&#39;s surfaces is reported as normal, however,</span>
        <span class="doccomment">/// clicks in other clients&#39; surfaces will be discarded and trigger</span>
        <span class="doccomment">/// the callback.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The x and y arguments specify the location of the upper left</span>
        <span class="doccomment">/// corner of the surface relative to the upper left corner of the</span>
        <span class="doccomment">/// parent surface, in surface-local coordinates.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_popup</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">parent</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">flags</span>: <span class="ident">Transient</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_SET_POPUP</span>, <span class="ident">seat</span>.<span class="ident">ptr</span>(), <span class="ident">serial</span>, <span class="ident">parent</span>.<span class="ident">ptr</span>(), <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">flags</span>) };
        }
        <span class="doccomment">/// make the surface a maximized surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Map the surface as a maximized surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If an output parameter is given then the surface will be</span>
        <span class="doccomment">/// maximized on that output. If the client does not specify the</span>
        <span class="doccomment">/// output then the compositor will apply its policy - usually</span>
        <span class="doccomment">/// choosing the output on which the surface has the biggest surface</span>
        <span class="doccomment">/// area.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The compositor will reply with a configure event telling</span>
        <span class="doccomment">/// the expected new surface size. The operation is completed</span>
        <span class="doccomment">/// on the next buffer attach to this surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A maximized surface typically fills the entire output it is</span>
        <span class="doccomment">/// bound to, except for desktop elements such as panels. This is</span>
        <span class="doccomment">/// the main difference between a maximized shell surface and a</span>
        <span class="doccomment">/// fullscreen shell surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The details depend on the compositor implementation.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_maximized</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">output</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_output</span>::<span class="ident">WlOutput</span><span class="op">&gt;</span>) <span class="op">-&gt;</span>() {
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_SET_MAXIMIZED</span>, <span class="ident">output</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>())) };
        }
        <span class="doccomment">/// set surface title</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Set a short title for the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This string may be used to identify the surface in a task bar,</span>
        <span class="doccomment">/// window list, or other user interface elements provided by the</span>
        <span class="doccomment">/// compositor.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The string must be encoded in UTF-8.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_title</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">title</span>: <span class="ident">String</span>) <span class="op">-&gt;</span>() {
            <span class="kw">let</span> <span class="ident">title</span> <span class="op">=</span> <span class="ident">CString</span>::<span class="ident">new</span>(<span class="ident">title</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span>_<span class="op">|</span> <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Got a String with interior null in wl_shell_surface.set_title:title&quot;</span>));
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_SET_TITLE</span>, <span class="ident">title</span>.<span class="ident">as_ptr</span>()) };
        }
        <span class="doccomment">/// set surface class</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Set a class for the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The surface class identifies the general class of applications</span>
        <span class="doccomment">/// to which the surface belongs. A common convention is to use the</span>
        <span class="doccomment">/// file name (or the full path if it is a non-standard location) of</span>
        <span class="doccomment">/// the application&#39;s .desktop file as the class.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_class</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">class_</span>: <span class="ident">String</span>) <span class="op">-&gt;</span>() {
            <span class="kw">let</span> <span class="ident">class_</span> <span class="op">=</span> <span class="ident">CString</span>::<span class="ident">new</span>(<span class="ident">class_</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span>_<span class="op">|</span> <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Got a String with interior null in wl_shell_surface.set_class:class_&quot;</span>));
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SHELL_SURFACE_SET_CLASS</span>, <span class="ident">class_</span>.<span class="ident">as_ptr</span>()) };
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_surface</span> {
    <span class="doccomment">//! an onscreen surface</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A surface is a rectangular area that is displayed on the screen.</span>
    <span class="doccomment">//! It has a location, size and pixel contents.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The size of a surface (and relative positions on it) is described</span>
    <span class="doccomment">//! in surface-local coordinates, which may differ from the buffer</span>
    <span class="doccomment">//! coordinates of the pixel content, in case a buffer_transform</span>
    <span class="doccomment">//! or a buffer_scale is used.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! A surface without a &quot;role&quot; is fairly useless: a compositor does</span>
    <span class="doccomment">//! not know where, when or how to present it. The role is the</span>
    <span class="doccomment">//! purpose of a wl_surface. Examples of roles are a cursor for a</span>
    <span class="doccomment">//! pointer (as set by wl_pointer.set_cursor), a drag icon</span>
    <span class="doccomment">//! (wl_data_device.start_drag), a sub-surface</span>
    <span class="doccomment">//! (wl_subcompositor.get_subsurface), and a window as defined by a</span>
    <span class="doccomment">//! shell protocol (e.g. wl_shell.get_shell_surface).</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! A surface can have only one role at a time. Initially a</span>
    <span class="doccomment">//! wl_surface does not have a role. Once a wl_surface is given a</span>
    <span class="doccomment">//! role, it is set permanently for the whole lifetime of the</span>
    <span class="doccomment">//! wl_surface object. Giving the current role again is allowed,</span>
    <span class="doccomment">//! unless explicitly forbidden by the relevant interface</span>
    <span class="doccomment">//! specification.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Surface roles are given by requests in other interfaces such as</span>
    <span class="doccomment">//! wl_pointer.set_cursor. The request should explicitly mention</span>
    <span class="doccomment">//! that this request gives a role to a wl_surface. Often, this</span>
    <span class="doccomment">//! request also creates a new protocol object that represents the</span>
    <span class="doccomment">//! role and adds additional functionality to wl_surface. When a</span>
    <span class="doccomment">//! client wants to destroy a wl_surface, they must destroy this &#39;role</span>
    <span class="doccomment">//! object&#39; before the wl_surface.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Destroying the role object does not remove the role from the</span>
    <span class="doccomment">//! wl_surface, but it may stop the wl_surface from &quot;playing the role&quot;.</span>
    <span class="doccomment">//! For instance, if a wl_subsurface object is destroyed, the wl_surface</span>
    <span class="doccomment">//! it was created for will be unmapped and forget its position and</span>
    <span class="doccomment">//! z-order. It is allowed to create a wl_subsurface for the same</span>
    <span class="doccomment">//! wl_surface again, but it is not allowed to use the wl_surface as</span>
    <span class="doccomment">//! a cursor (cursor is a different role than sub-surface, and role</span>
    <span class="doccomment">//! switching is not allowed).</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlSurface</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlSurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlSurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlSurface</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSurface</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSurface</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_surface_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_surface&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">4</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlSurface</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlSurface</span> {
            <span class="ident">WlSurface</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlSurface</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">output</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">enter</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="kw-2">&amp;</span><span class="ident">output</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">output</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">leave</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="kw-2">&amp;</span><span class="ident">output</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="doccomment">/// wl_surface error values</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// These errors can be emitted in response to wl_surface requests.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// buffer scale value is invalid</span>
        <span class="ident">InvalidScale</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// buffer transform value is invalid</span>
        <span class="ident">InvalidTransform</span> <span class="op">=</span> <span class="number">1</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidScale</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidTransform</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// surface enters an output</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is emitted whenever a surface&#39;s creation, movement, or resizing</span>
        <span class="doccomment">/// results in some part of it being within the scanout region of an</span>
        <span class="doccomment">/// output.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Note that a surface may be overlapping with zero or more outputs.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_surface, output</span>
        <span class="kw">pub</span> <span class="ident">enter</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_surface</span>: <span class="kw-2">&amp;</span><span class="ident">WlSurface</span>, <span class="ident">output</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_output</span>::<span class="ident">WlOutput</span>),
        <span class="doccomment">/// surface leaves an output</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is emitted whenever a surface&#39;s creation, movement, or resizing</span>
        <span class="doccomment">/// results in it no longer having any part of it within the scanout region</span>
        <span class="doccomment">/// of an output.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_surface, output</span>
        <span class="kw">pub</span> <span class="ident">leave</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_surface</span>: <span class="kw-2">&amp;</span><span class="ident">WlSurface</span>, <span class="ident">output</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_output</span>::<span class="ident">WlOutput</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_SURFACE_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_ATTACH</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_DAMAGE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_FRAME</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_SET_OPAQUE_REGION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_SET_INPUT_REGION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">5</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_COMMIT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">6</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_SET_BUFFER_TRANSFORM</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">7</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_SET_BUFFER_SCALE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">8</span>;
    <span class="kw">const</span> <span class="ident">WL_SURFACE_DAMAGE_BUFFER</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">9</span>;
    <span class="kw">impl</span> <span class="ident">WlSurface</span> {
        <span class="doccomment">/// delete surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Deletes the surface and invalidates its object ID.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set the surface contents</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Set a buffer as the content of this surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The new size of the surface is calculated based on the buffer</span>
        <span class="doccomment">/// size transformed by the inverse buffer_transform and the</span>
        <span class="doccomment">/// inverse buffer_scale. This means that the supplied buffer</span>
        <span class="doccomment">/// must be an integer multiple of the buffer_scale.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The x and y arguments specify the location of the new pending</span>
        <span class="doccomment">/// buffer&#39;s upper left corner, relative to the current buffer&#39;s upper</span>
        <span class="doccomment">/// left corner, in surface-local coordinates. In other words, the</span>
        <span class="doccomment">/// x and y, combined with the new surface size define in which</span>
        <span class="doccomment">/// directions the surface&#39;s size changes.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Surface contents are double-buffered state, see wl_surface.commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The initial surface contents are void; there is no content.</span>
        <span class="doccomment">/// wl_surface.attach assigns the given wl_buffer as the pending</span>
        <span class="doccomment">/// wl_buffer. wl_surface.commit makes the pending wl_buffer the new</span>
        <span class="doccomment">/// surface contents, and the size of the surface becomes the size</span>
        <span class="doccomment">/// calculated from the wl_buffer, as described above. After commit,</span>
        <span class="doccomment">/// there is no pending buffer until the next attach.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Committing a pending wl_buffer allows the compositor to read the</span>
        <span class="doccomment">/// pixels in the wl_buffer. The compositor may access the pixels at</span>
        <span class="doccomment">/// any time after the wl_surface.commit request. When the compositor</span>
        <span class="doccomment">/// will not access the pixels anymore, it will send the</span>
        <span class="doccomment">/// wl_buffer.release event. Only after receiving wl_buffer.release,</span>
        <span class="doccomment">/// the client may reuse the wl_buffer. A wl_buffer that has been</span>
        <span class="doccomment">/// attached and then replaced by another attach instead of committed</span>
        <span class="doccomment">/// will not receive a release event, and is not used by the</span>
        <span class="doccomment">/// compositor.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Destroying the wl_buffer after wl_buffer.release does not change</span>
        <span class="doccomment">/// the surface contents. However, if the client destroys the</span>
        <span class="doccomment">/// wl_buffer before receiving the wl_buffer.release event, the surface</span>
        <span class="doccomment">/// contents become undefined immediately.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If wl_surface.attach is sent with a NULL wl_buffer, the</span>
        <span class="doccomment">/// following wl_surface.commit will remove the surface content.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">attach</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">buffer</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_buffer</span>::<span class="ident">WlBuffer</span><span class="op">&gt;</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_ATTACH</span>, <span class="ident">buffer</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()), <span class="ident">x</span>, <span class="ident">y</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// mark part of the surface damaged</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is used to describe the regions where the pending</span>
        <span class="doccomment">/// buffer is different from the current surface contents, and where</span>
        <span class="doccomment">/// the surface therefore needs to be repainted. The compositor</span>
        <span class="doccomment">/// ignores the parts of the damage that fall outside of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Damage is double-buffered state, see wl_surface.commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The damage rectangle is specified in surface-local coordinates,</span>
        <span class="doccomment">/// where x and y specify the upper left corner of the damage rectangle.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The initial value for pending damage is empty: no damage.</span>
        <span class="doccomment">/// wl_surface.damage adds pending damage: the new pending damage</span>
        <span class="doccomment">/// is the union of old pending damage and the given rectangle.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// wl_surface.commit assigns pending damage as the current damage,</span>
        <span class="doccomment">/// and clears pending damage. The server will clear the current</span>
        <span class="doccomment">/// damage as it repaints the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Alternatively, damage can be posted with wl_surface.damage_buffer</span>
        <span class="doccomment">/// which uses buffer coordinates instead of surface coordinates,</span>
        <span class="doccomment">/// and is probably the preferred and intuitive way of doing this.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">damage</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_DAMAGE</span>, <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">width</span>, <span class="ident">height</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// request a frame throttling hint</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Request a notification when it is a good time to start drawing a new</span>
        <span class="doccomment">/// frame, by creating a frame callback. This is useful for throttling</span>
        <span class="doccomment">/// redrawing operations, and driving animations.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// When a client is animating on a wl_surface, it can use the &#39;frame&#39;</span>
        <span class="doccomment">/// request to get notified when it is a good time to draw and commit the</span>
        <span class="doccomment">/// next frame of animation. If the client commits an update earlier than</span>
        <span class="doccomment">/// that, it is likely that some updates will not make it to the display,</span>
        <span class="doccomment">/// and the client is wasting resources by drawing too often.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The frame request will take effect on the next wl_surface.commit.</span>
        <span class="doccomment">/// The notification will only be posted for one frame unless</span>
        <span class="doccomment">/// requested again. For a wl_surface, the notifications are posted in</span>
        <span class="doccomment">/// the order the frame requests were committed.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The server must send the notifications so that a client</span>
        <span class="doccomment">/// will not send excessive updates, while still allowing</span>
        <span class="doccomment">/// the highest possible update rate for clients that wait for the reply</span>
        <span class="doccomment">/// before drawing again. The server should give some time for the client</span>
        <span class="doccomment">/// to draw and commit after sending the frame callback events to let it</span>
        <span class="doccomment">/// hit the next output refresh.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A server should avoid signaling the frame callbacks if the</span>
        <span class="doccomment">/// surface is not visible in any way, e.g. the surface is off-screen,</span>
        <span class="doccomment">/// or completely obscured by other opaque surfaces.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The object returned by this request will be destroyed by the</span>
        <span class="doccomment">/// compositor after the callback is fired and as such the client must not</span>
        <span class="doccomment">/// attempt to use it after that point.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The callback_data passed in the callback is the current time, in</span>
        <span class="doccomment">/// milliseconds, with an undefined base.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">frame</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">wl_callback</span>::<span class="ident">WlCallback</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_FRAME</span>, <span class="kw-2">&amp;</span><span class="ident">wl_callback_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
        <span class="doccomment">/// set opaque region</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request sets the region of the surface that contains</span>
        <span class="doccomment">/// opaque content.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The opaque region is an optimization hint for the compositor</span>
        <span class="doccomment">/// that lets it optimize the redrawing of content behind opaque</span>
        <span class="doccomment">/// regions.  Setting an opaque region is not required for correct</span>
        <span class="doccomment">/// behaviour, but marking transparent content as opaque will result</span>
        <span class="doccomment">/// in repaint artifacts.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The opaque region is specified in surface-local coordinates.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The compositor ignores the parts of the opaque region that fall</span>
        <span class="doccomment">/// outside of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Opaque region is double-buffered state, see wl_surface.commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// wl_surface.set_opaque_region changes the pending opaque region.</span>
        <span class="doccomment">/// wl_surface.commit copies the pending region to the current region.</span>
        <span class="doccomment">/// Otherwise, the pending and current regions are never changed.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The initial value for an opaque region is empty. Setting the pending</span>
        <span class="doccomment">/// opaque region has copy semantics, and the wl_region object can be</span>
        <span class="doccomment">/// destroyed immediately. A NULL wl_region causes the pending opaque</span>
        <span class="doccomment">/// region to be set to empty.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_opaque_region</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">region</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_region</span>::<span class="ident">WlRegion</span><span class="op">&gt;</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_SET_OPAQUE_REGION</span>, <span class="ident">region</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>())) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set input region</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request sets the region of the surface that can receive</span>
        <span class="doccomment">/// pointer and touch events.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Input events happening outside of this region will try the next</span>
        <span class="doccomment">/// surface in the server surface stack. The compositor ignores the</span>
        <span class="doccomment">/// parts of the input region that fall outside of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The input region is specified in surface-local coordinates.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Input region is double-buffered state, see wl_surface.commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// wl_surface.set_input_region changes the pending input region.</span>
        <span class="doccomment">/// wl_surface.commit copies the pending region to the current region.</span>
        <span class="doccomment">/// Otherwise the pending and current regions are never changed,</span>
        <span class="doccomment">/// except cursor and icon surfaces are special cases, see</span>
        <span class="doccomment">/// wl_pointer.set_cursor and wl_data_device.start_drag.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The initial value for an input region is infinite. That means the</span>
        <span class="doccomment">/// whole surface will accept input. Setting the pending input region</span>
        <span class="doccomment">/// has copy semantics, and the wl_region object can be destroyed</span>
        <span class="doccomment">/// immediately. A NULL wl_region causes the input region to be set</span>
        <span class="doccomment">/// to infinite.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_input_region</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">region</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_region</span>::<span class="ident">WlRegion</span><span class="op">&gt;</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_SET_INPUT_REGION</span>, <span class="ident">region</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>())) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// commit pending surface state</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Surface state (input, opaque, and damage regions, attached buffers,</span>
        <span class="doccomment">/// etc.) is double-buffered. Protocol requests modify the pending state,</span>
        <span class="doccomment">/// as opposed to the current state in use by the compositor. A commit</span>
        <span class="doccomment">/// request atomically applies all pending state, replacing the current</span>
        <span class="doccomment">/// state. After commit, the new pending state is as documented for each</span>
        <span class="doccomment">/// related request.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// On commit, a pending wl_buffer is applied first, and all other state</span>
        <span class="doccomment">/// second. This means that all coordinates in double-buffered state are</span>
        <span class="doccomment">/// relative to the new wl_buffer coming into use, except for</span>
        <span class="doccomment">/// wl_surface.attach itself. If there is no pending wl_buffer, the</span>
        <span class="doccomment">/// coordinates are relative to the current surface contents.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// All requests that need a commit to become effective are documented</span>
        <span class="doccomment">/// to affect double-buffered state.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Other interfaces may add further double-buffered surface state.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">commit</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_COMMIT</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// sets the buffer transformation</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request sets an optional transformation on how the compositor</span>
        <span class="doccomment">/// interprets the contents of the buffer attached to the surface. The</span>
        <span class="doccomment">/// accepted values for the transform parameter are the values for</span>
        <span class="doccomment">/// wl_output.transform.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Buffer transform is double-buffered state, see wl_surface.commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A newly created surface has its buffer transformation set to normal.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// wl_surface.set_buffer_transform changes the pending buffer</span>
        <span class="doccomment">/// transformation. wl_surface.commit copies the pending buffer</span>
        <span class="doccomment">/// transformation to the current one. Otherwise, the pending and current</span>
        <span class="doccomment">/// values are never changed.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The purpose of this request is to allow clients to render content</span>
        <span class="doccomment">/// according to the output transform, thus permitting the compositor to</span>
        <span class="doccomment">/// use certain optimizations even if the display is rotated. Using</span>
        <span class="doccomment">/// hardware overlays and scanning out a client buffer for fullscreen</span>
        <span class="doccomment">/// surfaces are examples of such optimizations. Those optimizations are</span>
        <span class="doccomment">/// highly dependent on the compositor implementation, so the use of this</span>
        <span class="doccomment">/// request should be considered on a case-by-case basis.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Note that if the transform value includes 90 or 270 degree rotation,</span>
        <span class="doccomment">/// the width of the buffer will become the surface height and the height</span>
        <span class="doccomment">/// of the buffer will become the surface width.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If transform is not one of the values from the</span>
        <span class="doccomment">/// wl_output.transform enum the invalid_transform protocol error</span>
        <span class="doccomment">/// is raised.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 2 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_buffer_transform</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">transform</span>: <span class="kw">super</span>::<span class="ident">wl_output</span>::<span class="ident">Transform</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_SET_BUFFER_TRANSFORM</span>, <span class="ident">transform</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// sets the buffer scaling factor</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request sets an optional scaling factor on how the compositor</span>
        <span class="doccomment">/// interprets the contents of the buffer attached to the window.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Buffer scale is double-buffered state, see wl_surface.commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A newly created surface has its buffer scale set to 1.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// wl_surface.set_buffer_scale changes the pending buffer scale.</span>
        <span class="doccomment">/// wl_surface.commit copies the pending buffer scale to the current one.</span>
        <span class="doccomment">/// Otherwise, the pending and current values are never changed.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The purpose of this request is to allow clients to supply higher</span>
        <span class="doccomment">/// resolution buffer data for use on high resolution outputs. It is</span>
        <span class="doccomment">/// intended that you pick the same buffer scale as the scale of the</span>
        <span class="doccomment">/// output that the surface is displayed on. This means the compositor</span>
        <span class="doccomment">/// can avoid scaling when rendering the surface on that output.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Note that if the scale is larger than 1, then you have to attach</span>
        <span class="doccomment">/// a buffer that is larger (by a factor of scale in each dimension)</span>
        <span class="doccomment">/// than the desired surface size.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If scale is not positive the invalid_scale protocol error is</span>
        <span class="doccomment">/// raised.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_buffer_scale</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">scale</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_SET_BUFFER_SCALE</span>, <span class="ident">scale</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// mark part of the surface damaged using buffer coordinates</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is used to describe the regions where the pending</span>
        <span class="doccomment">/// buffer is different from the current surface contents, and where</span>
        <span class="doccomment">/// the surface therefore needs to be repainted. The compositor</span>
        <span class="doccomment">/// ignores the parts of the damage that fall outside of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Damage is double-buffered state, see wl_surface.commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The damage rectangle is specified in buffer coordinates,</span>
        <span class="doccomment">/// where x and y specify the upper left corner of the damage rectangle.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The initial value for pending damage is empty: no damage.</span>
        <span class="doccomment">/// wl_surface.damage_buffer adds pending damage: the new pending</span>
        <span class="doccomment">/// damage is the union of old pending damage and the given rectangle.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// wl_surface.commit assigns pending damage as the current damage,</span>
        <span class="doccomment">/// and clears pending damage. The server will clear the current</span>
        <span class="doccomment">/// damage as it repaints the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request differs from wl_surface.damage in only one way - it</span>
        <span class="doccomment">/// takes damage in buffer coordinates instead of surface-local</span>
        <span class="doccomment">/// coordinates. While this generally is more intuitive than surface</span>
        <span class="doccomment">/// coordinates, it is especially desirable when using wp_viewport</span>
        <span class="doccomment">/// or when a drawing library (like EGL) is unaware of buffer scale</span>
        <span class="doccomment">/// and buffer transform.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Note: Because buffer transformation changes and damage requests may</span>
        <span class="doccomment">/// be interleaved in the protocol stream, it is impossible to determine</span>
        <span class="doccomment">/// the actual mapping between surface and buffer damage until</span>
        <span class="doccomment">/// wl_surface.commit time. Therefore, compositors wishing to take both</span>
        <span class="doccomment">/// kinds of damage into account will have to accumulate damage from the</span>
        <span class="doccomment">/// two requests separately and only transform from one to the other</span>
        <span class="doccomment">/// after receiving the wl_surface.commit.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 4 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">damage_buffer</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SURFACE_DAMAGE_BUFFER</span>, <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">width</span>, <span class="ident">height</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_seat</span> {
    <span class="doccomment">//! group of input devices</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A seat is a group of keyboards, pointer and touch devices. This</span>
    <span class="doccomment">//! object is published as a global during start up, or when such a</span>
    <span class="doccomment">//! device is hot plugged.  A seat typically has a pointer and</span>
    <span class="doccomment">//! maintains a keyboard focus and a pointer focus.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlSeat</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlSeat</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlSeat</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlSeat</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSeat</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlSeat</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSeat</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlSeat</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlSeat</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_seat_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_seat&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">5</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlSeat</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlSeat</span> {
            <span class="ident">WlSeat</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlSeat</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">capabilities</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Capability</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    (<span class="ident">implementation</span>.<span class="ident">capabilities</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">capabilities</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">name</span> <span class="op">=</span> {<span class="ident">String</span>::<span class="ident">from_utf8_lossy</span>(<span class="ident">CStr</span>::<span class="ident">from_ptr</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> _)).<span class="ident">to_bytes</span>()).<span class="ident">into_owned</span>()};
                    (<span class="ident">implementation</span>.<span class="ident">name</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">name</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="macro">bitflags</span><span class="macro">!</span> {
        <span class="doccomment">/// seat capability bitmask</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a bitmask of capabilities this seat has; if a member is</span>
        <span class="doccomment">/// set, then it is present on the seat.</span>
        <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Capability</span>: <span class="ident">u32</span> {
            <span class="doccomment">/// the seat has pointer devices</span>
            <span class="kw">const</span> <span class="ident">Pointer</span> <span class="op">=</span> <span class="number">1</span>;
            <span class="doccomment">/// the seat has one or more keyboards</span>
            <span class="kw">const</span> <span class="ident">Keyboard</span> <span class="op">=</span> <span class="number">2</span>;
            <span class="doccomment">/// the seat has touch devices</span>
            <span class="kw">const</span> <span class="ident">Touch</span> <span class="op">=</span> <span class="number">4</span>;
        }
    }
    <span class="kw">impl</span> <span class="ident">Capability</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Capability</span><span class="op">&gt;</span> {
            <span class="prelude-val">Some</span>(<span class="ident">Capability</span>::<span class="ident">from_bits_truncate</span>(<span class="ident">n</span>))
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="self">self</span>.<span class="ident">bits</span>()
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// seat capabilities changed</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is emitted whenever a seat gains or loses the pointer,</span>
        <span class="doccomment">/// keyboard or touch capabilities.  The argument is a capability</span>
        <span class="doccomment">/// enum containing the complete set of capabilities this seat has.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// When the pointer capability is added, a client may create a</span>
        <span class="doccomment">/// wl_pointer object using the wl_seat.get_pointer request. This object</span>
        <span class="doccomment">/// will receive pointer events until the capability is removed in the</span>
        <span class="doccomment">/// future.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// When the pointer capability is removed, a client should destroy the</span>
        <span class="doccomment">/// wl_pointer objects associated with the seat where the capability was</span>
        <span class="doccomment">/// removed, using the wl_pointer.release request. No further pointer</span>
        <span class="doccomment">/// events will be received on these objects.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// In some compositors, if a seat regains the pointer capability and a</span>
        <span class="doccomment">/// client has a previously obtained wl_pointer object of version 4 or</span>
        <span class="doccomment">/// less, that object may start sending pointer events again. This</span>
        <span class="doccomment">/// behavior is considered a misinterpretation of the intended behavior</span>
        <span class="doccomment">/// and must not be relied upon by the client. wl_pointer objects of</span>
        <span class="doccomment">/// version 5 or later must not send events if created before the most</span>
        <span class="doccomment">/// recent event notifying the client of an added pointer capability.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The above behavior also applies to wl_keyboard and wl_touch with the</span>
        <span class="doccomment">/// keyboard and touch capabilities, respectively.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_seat, capabilities</span>
        <span class="kw">pub</span> <span class="ident">capabilities</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_seat</span>: <span class="kw-2">&amp;</span><span class="ident">WlSeat</span>, <span class="ident">capabilities</span>: <span class="ident">Capability</span>),
        <span class="doccomment">/// unique identifier for this seat</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// In a multiseat configuration this can be used by the client to help</span>
        <span class="doccomment">/// identify which physical devices the seat represents. Based on</span>
        <span class="doccomment">/// the seat configuration used by the compositor.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_seat, name</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 2 of the interface</span>
        <span class="kw">pub</span> <span class="ident">name</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_seat</span>: <span class="kw-2">&amp;</span><span class="ident">WlSeat</span>, <span class="ident">name</span>: <span class="ident">String</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">capabilities</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">capabilities</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">name</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">name</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_SEAT_GET_POINTER</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_SEAT_GET_KEYBOARD</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_SEAT_GET_TOUCH</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">const</span> <span class="ident">WL_SEAT_RELEASE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span>;
    <span class="kw">impl</span> <span class="ident">WlSeat</span> {
        <span class="doccomment">/// return pointer object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The ID provided will be initialized to the wl_pointer interface</span>
        <span class="doccomment">/// for this seat.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request only takes effect if the seat has the pointer</span>
        <span class="doccomment">/// capability, or has had the pointer capability in the past.</span>
        <span class="doccomment">/// It is a protocol violation to issue this request on a seat that has</span>
        <span class="doccomment">/// never had the pointer capability.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_pointer</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">wl_pointer</span>::<span class="ident">WlPointer</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SEAT_GET_POINTER</span>, <span class="kw-2">&amp;</span><span class="ident">wl_pointer_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
        <span class="doccomment">/// return keyboard object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The ID provided will be initialized to the wl_keyboard interface</span>
        <span class="doccomment">/// for this seat.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request only takes effect if the seat has the keyboard</span>
        <span class="doccomment">/// capability, or has had the keyboard capability in the past.</span>
        <span class="doccomment">/// It is a protocol violation to issue this request on a seat that has</span>
        <span class="doccomment">/// never had the keyboard capability.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_keyboard</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">wl_keyboard</span>::<span class="ident">WlKeyboard</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SEAT_GET_KEYBOARD</span>, <span class="kw-2">&amp;</span><span class="ident">wl_keyboard_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
        <span class="doccomment">/// return touch object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The ID provided will be initialized to the wl_touch interface</span>
        <span class="doccomment">/// for this seat.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request only takes effect if the seat has the touch</span>
        <span class="doccomment">/// capability, or has had the touch capability in the past.</span>
        <span class="doccomment">/// It is a protocol violation to issue this request on a seat that has</span>
        <span class="doccomment">/// never had the touch capability.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_touch</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">wl_touch</span>::<span class="ident">WlTouch</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SEAT_GET_TOUCH</span>, <span class="kw-2">&amp;</span><span class="ident">wl_touch_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
        <span class="doccomment">/// release the seat object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Using this request a client can tell the server that it is not going to</span>
        <span class="doccomment">/// use the seat object anymore.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 5 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">release</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SEAT_RELEASE</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_pointer</span> {
    <span class="doccomment">//! pointer input device</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The wl_pointer interface represents one or more input devices,</span>
    <span class="doccomment">//! such as mice, which control the pointer location and pointer_focus</span>
    <span class="doccomment">//! of a seat.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The wl_pointer interface generates motion, enter and leave</span>
    <span class="doccomment">//! events for the surfaces that the pointer is located over,</span>
    <span class="doccomment">//! and button and axis events for button presses, button releases</span>
    <span class="doccomment">//! and scrolling.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlPointer</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlPointer</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlPointer</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlPointer</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlPointer</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlPointer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlPointer</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlPointer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlPointer</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_pointer_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_pointer&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">5</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlPointer</span> {
            <span class="ident">WlPointer</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlPointer</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">surface</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    <span class="kw">let</span> <span class="ident">surface_x</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    <span class="kw">let</span> <span class="ident">surface_y</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">enter</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="kw-2">&amp;</span><span class="ident">surface</span>, <span class="ident">surface_x</span>, <span class="ident">surface_y</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">surface</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">leave</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="kw-2">&amp;</span><span class="ident">surface</span>);
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">surface_x</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    <span class="kw">let</span> <span class="ident">surface_y</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">motion</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">time</span>, <span class="ident">surface_x</span>, <span class="ident">surface_y</span>);
                },
                <span class="number">3</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">button</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">state</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">ButtonState</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    (<span class="ident">implementation</span>.<span class="ident">button</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="ident">time</span>, <span class="ident">button</span>, <span class="ident">state</span>);
                },
                <span class="number">4</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">axis</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Axis</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    <span class="kw">let</span> <span class="ident">value</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">axis</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">time</span>, <span class="ident">axis</span>, <span class="ident">value</span>);
                },
                <span class="number">5</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">frame</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">6</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">axis_source</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">AxisSource</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    (<span class="ident">implementation</span>.<span class="ident">axis_source</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">axis_source</span>);
                },
                <span class="number">7</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">axis</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Axis</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    (<span class="ident">implementation</span>.<span class="ident">axis_stop</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">time</span>, <span class="ident">axis</span>);
                },
                <span class="number">8</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">axis</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Axis</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    <span class="kw">let</span> <span class="ident">discrete</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">axis_discrete</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">axis</span>, <span class="ident">discrete</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// given wl_surface has another role</span>
        <span class="ident">Role</span> <span class="op">=</span> <span class="number">0</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">Role</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="doccomment">/// physical button state</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Describes the physical state of a button that produced the button</span>
    <span class="doccomment">/// event.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">ButtonState</span> {
        <span class="doccomment">/// the button is not pressed</span>
        <span class="ident">Released</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// the button is pressed</span>
        <span class="ident">Pressed</span> <span class="op">=</span> <span class="number">1</span>,
    }
    <span class="kw">impl</span> <span class="ident">ButtonState</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">ButtonState</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ButtonState</span>::<span class="ident">Released</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ButtonState</span>::<span class="ident">Pressed</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="doccomment">/// axis types</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Describes the axis types of scroll events.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Axis</span> {
        <span class="doccomment">/// vertical axis</span>
        <span class="ident">VerticalScroll</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// horizontal axis</span>
        <span class="ident">HorizontalScroll</span> <span class="op">=</span> <span class="number">1</span>,
    }
    <span class="kw">impl</span> <span class="ident">Axis</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Axis</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Axis</span>::<span class="ident">VerticalScroll</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Axis</span>::<span class="ident">HorizontalScroll</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="doccomment">/// axis source types</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Describes the source types for axis events. This indicates to the</span>
    <span class="doccomment">/// client how an axis event was physically generated; a client may</span>
    <span class="doccomment">/// adjust the user interface accordingly. For example, scroll events</span>
    <span class="doccomment">/// from a &quot;finger&quot; source may be in a smooth coordinate space with</span>
    <span class="doccomment">/// kinetic scrolling whereas a &quot;wheel&quot; source may be in discrete steps</span>
    <span class="doccomment">/// of a number of lines.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// The &quot;continuous&quot; axis source is a device generating events in a</span>
    <span class="doccomment">/// continuous coordinate space, but using something other than a</span>
    <span class="doccomment">/// finger. One example for this source is button-based scrolling where</span>
    <span class="doccomment">/// the vertical motion of a device is converted to scroll events while</span>
    <span class="doccomment">/// a button is held down.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">AxisSource</span> {
        <span class="doccomment">/// a physical wheel</span>
        <span class="ident">Wheel</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// finger on a touch surface</span>
        <span class="ident">Finger</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// continuous coordinate space</span>
        <span class="ident">Continuous</span> <span class="op">=</span> <span class="number">2</span>,
    }
    <span class="kw">impl</span> <span class="ident">AxisSource</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">AxisSource</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">AxisSource</span>::<span class="ident">Wheel</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">AxisSource</span>::<span class="ident">Finger</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">AxisSource</span>::<span class="ident">Continuous</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// enter event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notification that this seat&#39;s pointer is focused on a certain</span>
        <span class="doccomment">/// surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// When a seat&#39;s focus enters a surface, the pointer image</span>
        <span class="doccomment">/// is undefined and a client should respond to this event by setting</span>
        <span class="doccomment">/// an appropriate pointer image with the set_cursor request.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, serial, surface, surface_x, surface_y</span>
        <span class="kw">pub</span> <span class="ident">enter</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">surface_x</span>: <span class="ident">f64</span>, <span class="ident">surface_y</span>: <span class="ident">f64</span>),
        <span class="doccomment">/// leave event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notification that this seat&#39;s pointer is no longer focused on</span>
        <span class="doccomment">/// a certain surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The leave notification is sent before the enter notification</span>
        <span class="doccomment">/// for the new focus.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, serial, surface</span>
        <span class="kw">pub</span> <span class="ident">leave</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>),
        <span class="doccomment">/// pointer motion event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notification of pointer location change. The arguments</span>
        <span class="doccomment">/// surface_x and surface_y are the location relative to the</span>
        <span class="doccomment">/// focused surface.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, time, surface_x, surface_y</span>
        <span class="kw">pub</span> <span class="ident">motion</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">surface_x</span>: <span class="ident">f64</span>, <span class="ident">surface_y</span>: <span class="ident">f64</span>),
        <span class="doccomment">/// pointer button event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Mouse button click and release notifications.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The location of the click is given by the last motion or</span>
        <span class="doccomment">/// enter event.</span>
        <span class="doccomment">/// The time argument is a timestamp with millisecond</span>
        <span class="doccomment">/// granularity, with an undefined base.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, serial, time, button, state</span>
        <span class="kw">pub</span> <span class="ident">button</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">button</span>: <span class="ident">u32</span>, <span class="ident">state</span>: <span class="ident">ButtonState</span>),
        <span class="doccomment">/// axis event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Scroll and other axis notifications.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For scroll events (vertical and horizontal scroll axes), the</span>
        <span class="doccomment">/// value parameter is the length of a vector along the specified</span>
        <span class="doccomment">/// axis in a coordinate space identical to those of motion events,</span>
        <span class="doccomment">/// representing a relative movement along the specified axis.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For devices that support movements non-parallel to axes multiple</span>
        <span class="doccomment">/// axis events will be emitted.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// When applicable, for example for touch pads, the server can</span>
        <span class="doccomment">/// choose to emit scroll events where the motion vector is</span>
        <span class="doccomment">/// equivalent to a motion event vector.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// When applicable, a client can transform its content relative to the</span>
        <span class="doccomment">/// scroll distance.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, time, axis, value</span>
        <span class="kw">pub</span> <span class="ident">axis</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">axis</span>: <span class="ident">Axis</span>, <span class="ident">value</span>: <span class="ident">f64</span>),
        <span class="doccomment">/// end of a pointer event sequence</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Indicates the end of a set of events that logically belong together.</span>
        <span class="doccomment">/// A client is expected to accumulate the data in all events within the</span>
        <span class="doccomment">/// frame before proceeding.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// All wl_pointer events before a wl_pointer.frame event belong</span>
        <span class="doccomment">/// logically together. For example, in a diagonal scroll motion the</span>
        <span class="doccomment">/// compositor will send an optional wl_pointer.axis_source event, two</span>
        <span class="doccomment">/// wl_pointer.axis events (horizontal and vertical) and finally a</span>
        <span class="doccomment">/// wl_pointer.frame event. The client may use this information to</span>
        <span class="doccomment">/// calculate a diagonal vector for scrolling.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// When multiple wl_pointer.axis events occur within the same frame,</span>
        <span class="doccomment">/// the motion vector is the combined motion of all events.</span>
        <span class="doccomment">/// When a wl_pointer.axis and a wl_pointer.axis_stop event occur within</span>
        <span class="doccomment">/// the same frame, this indicates that axis movement in one axis has</span>
        <span class="doccomment">/// stopped but continues in the other axis.</span>
        <span class="doccomment">/// When multiple wl_pointer.axis_stop events occur within the same</span>
        <span class="doccomment">/// frame, this indicates that these axes stopped in the same instance.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A wl_pointer.frame event is sent for every logical event group,</span>
        <span class="doccomment">/// even if the group only contains a single wl_pointer event.</span>
        <span class="doccomment">/// Specifically, a client may get a sequence: motion, frame, button,</span>
        <span class="doccomment">/// frame, axis, frame, axis_stop, frame.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The wl_pointer.enter and wl_pointer.leave events are logical events</span>
        <span class="doccomment">/// generated by the compositor and not the hardware. These events are</span>
        <span class="doccomment">/// also grouped by a wl_pointer.frame. When a pointer moves from one</span>
        <span class="doccomment">/// surface to another, a compositor should group the</span>
        <span class="doccomment">/// wl_pointer.leave event within the same wl_pointer.frame.</span>
        <span class="doccomment">/// However, a client must not rely on wl_pointer.leave and</span>
        <span class="doccomment">/// wl_pointer.enter being in the same wl_pointer.frame.</span>
        <span class="doccomment">/// Compositor-specific policies may require the wl_pointer.leave and</span>
        <span class="doccomment">/// wl_pointer.enter event being split across multiple wl_pointer.frame</span>
        <span class="doccomment">/// groups.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 5 of the interface</span>
        <span class="kw">pub</span> <span class="ident">frame</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>),
        <span class="doccomment">/// axis source event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Source information for scroll and other axes.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event does not occur on its own. It is sent before a</span>
        <span class="doccomment">/// wl_pointer.frame event and carries the source information for</span>
        <span class="doccomment">/// all events within that frame.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The source specifies how this event was generated. If the source is</span>
        <span class="doccomment">/// wl_pointer.axis_source.finger, a wl_pointer.axis_stop event will be</span>
        <span class="doccomment">/// sent when the user lifts the finger off the device.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the source is wl_pointer axis_source.wheel or</span>
        <span class="doccomment">/// wl_pointer.axis_source.continuous, a wl_pointer.axis_stop event may</span>
        <span class="doccomment">/// or may not be sent. Whether a compositor sends an axis_stop event</span>
        <span class="doccomment">/// for these sources is hardware-specific and implementation-dependent;</span>
        <span class="doccomment">/// clients must not rely on receiving an axis_stop event for these</span>
        <span class="doccomment">/// scroll sources and should treat scroll sequences from these scroll</span>
        <span class="doccomment">/// sources as unterminated by default.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event is optional. If the source is unknown for a particular</span>
        <span class="doccomment">/// axis event sequence, no event is sent.</span>
        <span class="doccomment">/// Only one wl_pointer.axis_source event is permitted per frame.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The order of wl_pointer.axis_discrete and wl_pointer.axis_source is</span>
        <span class="doccomment">/// not guaranteed.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, axis_source</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 5 of the interface</span>
        <span class="kw">pub</span> <span class="ident">axis_source</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">axis_source</span>: <span class="ident">AxisSource</span>),
        <span class="doccomment">/// axis stop event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Stop notification for scroll and other axes.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For some wl_pointer.axis_source types, a wl_pointer.axis_stop event</span>
        <span class="doccomment">/// is sent to notify a client that the axis sequence has terminated.</span>
        <span class="doccomment">/// This enables the client to implement kinetic scrolling.</span>
        <span class="doccomment">/// See the wl_pointer.axis_source documentation for information on when</span>
        <span class="doccomment">/// this event may be generated.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Any wl_pointer.axis events with the same axis_source after this</span>
        <span class="doccomment">/// event should be considered as the start of a new axis motion.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The timestamp is to be interpreted identical to the timestamp in the</span>
        <span class="doccomment">/// wl_pointer.axis event. The timestamp value may be the same as a</span>
        <span class="doccomment">/// preceding wl_pointer.axis event.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, time, axis</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 5 of the interface</span>
        <span class="kw">pub</span> <span class="ident">axis_stop</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">axis</span>: <span class="ident">Axis</span>),
        <span class="doccomment">/// axis click event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Discrete step information for scroll and other axes.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event carries the axis value of the wl_pointer.axis event in</span>
        <span class="doccomment">/// discrete steps (e.g. mouse wheel clicks).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event does not occur on its own, it is coupled with a</span>
        <span class="doccomment">/// wl_pointer.axis event that represents this axis value on a</span>
        <span class="doccomment">/// continuous scale. The protocol guarantees that each axis_discrete</span>
        <span class="doccomment">/// event is always followed by exactly one axis event with the same</span>
        <span class="doccomment">/// axis number within the same wl_pointer.frame. Note that the protocol</span>
        <span class="doccomment">/// allows for other events to occur between the axis_discrete and</span>
        <span class="doccomment">/// its coupled axis event, including other axis_discrete or axis</span>
        <span class="doccomment">/// events.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event is optional; continuous scrolling devices</span>
        <span class="doccomment">/// like two-finger scrolling on touchpads do not have discrete</span>
        <span class="doccomment">/// steps and do not generate this event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The discrete value carries the directional information. e.g. a value</span>
        <span class="doccomment">/// of -2 is two steps towards the negative direction of this axis.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The axis number is identical to the axis number in the associated</span>
        <span class="doccomment">/// axis event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The order of wl_pointer.axis_discrete and wl_pointer.axis_source is</span>
        <span class="doccomment">/// not guaranteed.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_pointer, axis, discrete</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 5 of the interface</span>
        <span class="kw">pub</span> <span class="ident">axis_discrete</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_pointer</span>: <span class="kw-2">&amp;</span><span class="ident">WlPointer</span>, <span class="ident">axis</span>: <span class="ident">Axis</span>, <span class="ident">discrete</span>: <span class="ident">i32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">motion</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">motion</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">button</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">button</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">axis</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">axis</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">frame</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">frame</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">axis_source</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">axis_source</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">axis_stop</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">axis_stop</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">axis_discrete</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">axis_discrete</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_POINTER_SET_CURSOR</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_POINTER_RELEASE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">impl</span> <span class="ident">WlPointer</span> {
        <span class="doccomment">/// set the pointer surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Set the pointer surface, i.e., the surface that contains the</span>
        <span class="doccomment">/// pointer image (cursor). This request gives the surface the role</span>
        <span class="doccomment">/// of a cursor. If the surface already has another role, it raises</span>
        <span class="doccomment">/// a protocol error.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The cursor actually changes only if the pointer</span>
        <span class="doccomment">/// focus for this device is one of the requesting client&#39;s surfaces</span>
        <span class="doccomment">/// or the surface parameter is the current pointer surface. If</span>
        <span class="doccomment">/// there was a previous surface set with this request it is</span>
        <span class="doccomment">/// replaced. If surface is NULL, the pointer image is hidden.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The parameters hotspot_x and hotspot_y define the position of</span>
        <span class="doccomment">/// the pointer surface relative to the pointer location. Its</span>
        <span class="doccomment">/// top-left corner is always at (x, y) - (hotspot_x, hotspot_y),</span>
        <span class="doccomment">/// where (x, y) are the coordinates of the pointer location, in</span>
        <span class="doccomment">/// surface-local coordinates.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// On surface.attach requests to the pointer surface, hotspot_x</span>
        <span class="doccomment">/// and hotspot_y are decremented by the x and y parameters</span>
        <span class="doccomment">/// passed to the request. Attach must be confirmed by</span>
        <span class="doccomment">/// wl_surface.commit as usual.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The hotspot can also be updated by passing the currently set</span>
        <span class="doccomment">/// pointer surface to this request with new values for hotspot_x</span>
        <span class="doccomment">/// and hotspot_y.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The current and pending input regions of the wl_surface are</span>
        <span class="doccomment">/// cleared, and wl_surface.set_input_region is ignored until the</span>
        <span class="doccomment">/// wl_surface is no longer used as the cursor. When the use as a</span>
        <span class="doccomment">/// cursor ends, the current and pending input regions become</span>
        <span class="doccomment">/// undefined, and the wl_surface is unmapped.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_cursor</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">surface</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span><span class="op">&gt;</span>, <span class="ident">hotspot_x</span>: <span class="ident">i32</span>, <span class="ident">hotspot_y</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_POINTER_SET_CURSOR</span>, <span class="ident">serial</span>, <span class="ident">surface</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()), <span class="ident">hotspot_x</span>, <span class="ident">hotspot_y</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// release the pointer object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Using this request a client can tell the server that it is not going to</span>
        <span class="doccomment">/// use the pointer object anymore.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request destroys the pointer proxy object, so clients must not call</span>
        <span class="doccomment">/// wl_pointer_destroy() after using this request.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">release</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_POINTER_RELEASE</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_keyboard</span> {
    <span class="doccomment">//! keyboard input device</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The wl_keyboard interface represents one or more keyboards</span>
    <span class="doccomment">//! associated with a seat.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlKeyboard</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlKeyboard</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlKeyboard</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlKeyboard</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlKeyboard</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlKeyboard</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlKeyboard</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlKeyboard</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlKeyboard</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_keyboard_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_keyboard&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">5</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlKeyboard</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlKeyboard</span> {
            <span class="ident">WlKeyboard</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlKeyboard</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">format</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">KeymapFormat</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    <span class="kw">let</span> <span class="ident">fd</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">size</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">keymap</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">format</span>, <span class="ident">fd</span>, <span class="ident">size</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">surface</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    <span class="kw">let</span> <span class="ident">keys</span> <span class="op">=</span> {<span class="kw">let</span> <span class="ident">array</span> <span class="op">=</span> <span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_array</span>); ::<span class="ident">std</span>::<span class="ident">slice</span>::<span class="ident">from_raw_parts</span>((<span class="kw-2">*</span><span class="ident">array</span>).<span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u8</span>, (<span class="kw-2">*</span><span class="ident">array</span>).<span class="ident">size</span> <span class="kw">as</span> <span class="ident">usize</span>).<span class="ident">to_owned</span>()};
                    (<span class="ident">implementation</span>.<span class="ident">enter</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="kw-2">&amp;</span><span class="ident">surface</span>, <span class="ident">keys</span>);
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">surface</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">leave</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="kw-2">&amp;</span><span class="ident">surface</span>);
                },
                <span class="number">3</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">key</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">state</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">KeyState</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    (<span class="ident">implementation</span>.<span class="ident">key</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="ident">time</span>, <span class="ident">key</span>, <span class="ident">state</span>);
                },
                <span class="number">4</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">mods_depressed</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">mods_latched</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">mods_locked</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">group</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">4</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">modifiers</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="ident">mods_depressed</span>, <span class="ident">mods_latched</span>, <span class="ident">mods_locked</span>, <span class="ident">group</span>);
                },
                <span class="number">5</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">rate</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">delay</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">repeat_info</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">rate</span>, <span class="ident">delay</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="doccomment">/// keyboard mapping format</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This specifies the format of the keymap provided to the</span>
    <span class="doccomment">/// client with the wl_keyboard.keymap event.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">KeymapFormat</span> {
        <span class="doccomment">/// no keymap; client must understand how to interpret the raw keycode</span>
        <span class="ident">NoKeymap</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// libxkbcommon compatible; to determine the xkb keycode, clients must add 8 to the key event keycode</span>
        <span class="ident">XkbV1</span> <span class="op">=</span> <span class="number">1</span>,
    }
    <span class="kw">impl</span> <span class="ident">KeymapFormat</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">KeymapFormat</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">KeymapFormat</span>::<span class="ident">NoKeymap</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">KeymapFormat</span>::<span class="ident">XkbV1</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="doccomment">/// physical key state</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// Describes the physical state of a key that produced the key event.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">KeyState</span> {
        <span class="doccomment">/// key is not pressed</span>
        <span class="ident">Released</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// key is pressed</span>
        <span class="ident">Pressed</span> <span class="op">=</span> <span class="number">1</span>,
    }
    <span class="kw">impl</span> <span class="ident">KeyState</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">KeyState</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">KeyState</span>::<span class="ident">Released</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">KeyState</span>::<span class="ident">Pressed</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// keyboard mapping</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event provides a file descriptor to the client which can be</span>
        <span class="doccomment">/// memory-mapped to provide a keyboard mapping description.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_keyboard, format, fd, size</span>
        <span class="kw">pub</span> <span class="ident">keymap</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_keyboard</span>: <span class="kw-2">&amp;</span><span class="ident">WlKeyboard</span>, <span class="ident">format</span>: <span class="ident">KeymapFormat</span>, <span class="ident">fd</span>: ::<span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">unix</span>::<span class="ident">io</span>::<span class="ident">RawFd</span>, <span class="ident">size</span>: <span class="ident">u32</span>),
        <span class="doccomment">/// enter event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notification that this seat&#39;s keyboard focus is on a certain</span>
        <span class="doccomment">/// surface.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_keyboard, serial, surface, keys</span>
        <span class="kw">pub</span> <span class="ident">enter</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_keyboard</span>: <span class="kw-2">&amp;</span><span class="ident">WlKeyboard</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">keys</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>),
        <span class="doccomment">/// leave event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notification that this seat&#39;s keyboard focus is no longer on</span>
        <span class="doccomment">/// a certain surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The leave notification is sent before the enter notification</span>
        <span class="doccomment">/// for the new focus.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_keyboard, serial, surface</span>
        <span class="kw">pub</span> <span class="ident">leave</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_keyboard</span>: <span class="kw-2">&amp;</span><span class="ident">WlKeyboard</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>),
        <span class="doccomment">/// key event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// A key was pressed or released.</span>
        <span class="doccomment">/// The time argument is a timestamp with millisecond</span>
        <span class="doccomment">/// granularity, with an undefined base.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_keyboard, serial, time, key, state</span>
        <span class="kw">pub</span> <span class="ident">key</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_keyboard</span>: <span class="kw-2">&amp;</span><span class="ident">WlKeyboard</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">key</span>: <span class="ident">u32</span>, <span class="ident">state</span>: <span class="ident">KeyState</span>),
        <span class="doccomment">/// modifier and group state</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Notifies clients that the modifier and/or group state has</span>
        <span class="doccomment">/// changed, and it should update its local state.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_keyboard, serial, mods_depressed, mods_latched, mods_locked, group</span>
        <span class="kw">pub</span> <span class="ident">modifiers</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_keyboard</span>: <span class="kw-2">&amp;</span><span class="ident">WlKeyboard</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">mods_depressed</span>: <span class="ident">u32</span>, <span class="ident">mods_latched</span>: <span class="ident">u32</span>, <span class="ident">mods_locked</span>: <span class="ident">u32</span>, <span class="ident">group</span>: <span class="ident">u32</span>),
        <span class="doccomment">/// repeat rate and delay</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Informs the client about the keyboard&#39;s repeat rate and delay.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event is sent as soon as the wl_keyboard object has been created,</span>
        <span class="doccomment">/// and is guaranteed to be received by the client before any key press</span>
        <span class="doccomment">/// event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Negative values for either rate or delay are illegal. A rate of zero</span>
        <span class="doccomment">/// will disable any repeating (regardless of the value of delay).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This event can be sent later on as well with a new value if necessary,</span>
        <span class="doccomment">/// so clients should continue listening for the event past the creation</span>
        <span class="doccomment">/// of wl_keyboard.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_keyboard, rate, delay</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 4 of the interface</span>
        <span class="kw">pub</span> <span class="ident">repeat_info</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_keyboard</span>: <span class="kw-2">&amp;</span><span class="ident">WlKeyboard</span>, <span class="ident">rate</span>: <span class="ident">i32</span>, <span class="ident">delay</span>: <span class="ident">i32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">keymap</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">keymap</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">enter</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">leave</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">key</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">key</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">modifiers</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">modifiers</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">repeat_info</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">repeat_info</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_KEYBOARD_RELEASE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">WlKeyboard</span> {
        <span class="doccomment">/// release the keyboard object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">release</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_KEYBOARD_RELEASE</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_touch</span> {
    <span class="doccomment">//! touchscreen input device</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The wl_touch interface represents a touchscreen</span>
    <span class="doccomment">//! associated with a seat.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Touch interactions can consist of one or more contacts.</span>
    <span class="doccomment">//! For each contact, a series of events is generated, starting</span>
    <span class="doccomment">//! with a down event, followed by zero or more motion events,</span>
    <span class="doccomment">//! and ending with an up event. Events relating to the same</span>
    <span class="doccomment">//! contact point can be identified by the ID of the sequence.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlTouch</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlTouch</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlTouch</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlTouch</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlTouch</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlTouch</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlTouch</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlTouch</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlTouch</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_touch_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_touch&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">5</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlTouch</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlTouch</span> {
            <span class="ident">WlTouch</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlTouch</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">surface</span> <span class="op">=</span> {<span class="ident">Proxy</span>::<span class="ident">from_ptr_initialized</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>))};
                    <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">4</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    <span class="kw">let</span> <span class="ident">y</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">5</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">down</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="ident">time</span>, <span class="kw-2">&amp;</span><span class="ident">surface</span>, <span class="ident">id</span>, <span class="ident">x</span>, <span class="ident">y</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">up</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>, <span class="ident">time</span>, <span class="ident">id</span>);
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">time</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    <span class="kw">let</span> <span class="ident">y</span> <span class="op">=</span> {<span class="ident">wl_fixed_to_double</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>))};
                    (<span class="ident">implementation</span>.<span class="ident">motion</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">time</span>, <span class="ident">id</span>, <span class="ident">x</span>, <span class="ident">y</span>);
                },
                <span class="number">3</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">frame</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">4</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">cancel</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// touch down event and beginning of a touch sequence</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// A new touch point has appeared on the surface. This touch point is</span>
        <span class="doccomment">/// assigned a unique ID. Future events from this touch point reference</span>
        <span class="doccomment">/// this ID. The ID ceases to be valid after a touch up event and may be</span>
        <span class="doccomment">/// reused in the future.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_touch, serial, time, surface, id, x, y</span>
        <span class="kw">pub</span> <span class="ident">down</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_touch</span>: <span class="kw-2">&amp;</span><span class="ident">WlTouch</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">id</span>: <span class="ident">i32</span>, <span class="ident">x</span>: <span class="ident">f64</span>, <span class="ident">y</span>: <span class="ident">f64</span>),
        <span class="doccomment">/// end of a touch event sequence</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The touch point has disappeared. No further events will be sent for</span>
        <span class="doccomment">/// this touch point and the touch point&#39;s ID is released and may be</span>
        <span class="doccomment">/// reused in a future touch down event.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_touch, serial, time, id</span>
        <span class="kw">pub</span> <span class="ident">up</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_touch</span>: <span class="kw-2">&amp;</span><span class="ident">WlTouch</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">id</span>: <span class="ident">i32</span>),
        <span class="doccomment">/// update of touch point coordinates</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// A touch point has changed coordinates.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_touch, time, id, x, y</span>
        <span class="kw">pub</span> <span class="ident">motion</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_touch</span>: <span class="kw-2">&amp;</span><span class="ident">WlTouch</span>, <span class="ident">time</span>: <span class="ident">u32</span>, <span class="ident">id</span>: <span class="ident">i32</span>, <span class="ident">x</span>: <span class="ident">f64</span>, <span class="ident">y</span>: <span class="ident">f64</span>),
        <span class="doccomment">/// end of touch frame event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Indicates the end of a contact point list.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_touch</span>
        <span class="kw">pub</span> <span class="ident">frame</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_touch</span>: <span class="kw-2">&amp;</span><span class="ident">WlTouch</span>),
        <span class="doccomment">/// touch session cancelled</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Sent if the compositor decides the touch stream is a global</span>
        <span class="doccomment">/// gesture. No further events are sent to the clients from that</span>
        <span class="doccomment">/// particular gesture. Touch cancellation applies to all touch points</span>
        <span class="doccomment">/// currently active on this client&#39;s surface. The client is</span>
        <span class="doccomment">/// responsible for finalizing the touch points, future touch points on</span>
        <span class="doccomment">/// this surface may reuse the touch point ID.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_touch</span>
        <span class="kw">pub</span> <span class="ident">cancel</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_touch</span>: <span class="kw-2">&amp;</span><span class="ident">WlTouch</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">down</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">down</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">up</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">up</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">motion</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">motion</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">frame</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">frame</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">cancel</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">cancel</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_TOUCH_RELEASE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">WlTouch</span> {
        <span class="doccomment">/// release the touch object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">release</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_TOUCH_RELEASE</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_output</span> {
    <span class="doccomment">//! compositor output region</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! An output describes part of the compositor geometry.  The</span>
    <span class="doccomment">//! compositor works in the &#39;compositor coordinate system&#39; and an</span>
    <span class="doccomment">//! output corresponds to a rectangular area in that space that is</span>
    <span class="doccomment">//! actually visible.  This typically corresponds to a monitor that</span>
    <span class="doccomment">//! displays part of the compositor space.  This object is published</span>
    <span class="doccomment">//! as global during start up, or when a monitor is hotplugged.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlOutput</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlOutput</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlOutput</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlOutput</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlOutput</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlOutput</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlOutput</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlOutput</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlOutput</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_output_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_output&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">3</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlOutput</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlOutput</span> {
            <span class="ident">WlOutput</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">WlOutput</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">x</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">y</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">physical_width</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">physical_height</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">subpixel</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Subpixel</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">4</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    <span class="kw">let</span> <span class="ident">make</span> <span class="op">=</span> {<span class="ident">String</span>::<span class="ident">from_utf8_lossy</span>(<span class="ident">CStr</span>::<span class="ident">from_ptr</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">5</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> _)).<span class="ident">to_bytes</span>()).<span class="ident">into_owned</span>()};
                    <span class="kw">let</span> <span class="ident">model</span> <span class="op">=</span> {<span class="ident">String</span>::<span class="ident">from_utf8_lossy</span>(<span class="ident">CStr</span>::<span class="ident">from_ptr</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">6</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw">const</span> _)).<span class="ident">to_bytes</span>()).<span class="ident">into_owned</span>()};
                    <span class="kw">let</span> <span class="ident">transform</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Transform</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">7</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    (<span class="ident">implementation</span>.<span class="ident">geometry</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">physical_width</span>, <span class="ident">physical_height</span>, <span class="ident">subpixel</span>, <span class="ident">make</span>, <span class="ident">model</span>, <span class="ident">transform</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">flags</span> <span class="op">=</span> {<span class="kw">match</span> <span class="ident">Mode</span>::<span class="ident">from_raw</span>(<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)) { <span class="prelude-val">Some</span>(<span class="ident">v</span>) <span class="op">=&gt;</span> <span class="ident">v</span>, <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(()) }};
                    <span class="kw">let</span> <span class="ident">width</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">height</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">refresh</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">mode</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">flags</span>, <span class="ident">width</span>, <span class="ident">height</span>, <span class="ident">refresh</span>);
                },
                <span class="number">2</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">done</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                <span class="number">3</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">factor</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">scale</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">factor</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="doccomment">/// subpixel geometry information</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This enumeration describes how the physical</span>
    <span class="doccomment">/// pixels on an output are laid out.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Subpixel</span> {
        <span class="doccomment">/// unknown geometry</span>
        <span class="ident">Unknown</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// no geometry</span>
        <span class="prelude-val">None</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// horizontal RGB</span>
        <span class="ident">HorizontalRgb</span> <span class="op">=</span> <span class="number">2</span>,
        <span class="doccomment">/// horizontal BGR</span>
        <span class="ident">HorizontalBgr</span> <span class="op">=</span> <span class="number">3</span>,
        <span class="doccomment">/// vertical RGB</span>
        <span class="ident">VerticalRgb</span> <span class="op">=</span> <span class="number">4</span>,
        <span class="doccomment">/// vertical BGR</span>
        <span class="ident">VerticalBgr</span> <span class="op">=</span> <span class="number">5</span>,
    }
    <span class="kw">impl</span> <span class="ident">Subpixel</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Subpixel</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Subpixel</span>::<span class="ident">Unknown</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Subpixel</span>::<span class="prelude-val">None</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Subpixel</span>::<span class="ident">HorizontalRgb</span>),
                <span class="number">3</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Subpixel</span>::<span class="ident">HorizontalBgr</span>),
                <span class="number">4</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Subpixel</span>::<span class="ident">VerticalRgb</span>),
                <span class="number">5</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Subpixel</span>::<span class="ident">VerticalBgr</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="doccomment">/// transform from framebuffer to output</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// This describes the transform that a compositor will apply to a</span>
    <span class="doccomment">/// surface to compensate for the rotation or mirroring of an</span>
    <span class="doccomment">/// output device.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// The flipped values correspond to an initial flip around a</span>
    <span class="doccomment">/// vertical axis followed by rotation.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// The purpose is mainly to allow clients to render accordingly and</span>
    <span class="doccomment">/// tell the compositor, so that for fullscreen surfaces, the</span>
    <span class="doccomment">/// compositor will still be able to scan out directly from client</span>
    <span class="doccomment">/// surfaces.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Transform</span> {
        <span class="doccomment">/// no transform</span>
        <span class="ident">Normal</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// 90 degrees counter-clockwise</span>
        <span class="ident">_90</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// 180 degrees counter-clockwise</span>
        <span class="ident">_180</span> <span class="op">=</span> <span class="number">2</span>,
        <span class="doccomment">/// 270 degrees counter-clockwise</span>
        <span class="ident">_270</span> <span class="op">=</span> <span class="number">3</span>,
        <span class="doccomment">/// 180 degree flip around a vertical axis</span>
        <span class="ident">Flipped</span> <span class="op">=</span> <span class="number">4</span>,
        <span class="doccomment">/// flip and rotate 90 degrees counter-clockwise</span>
        <span class="ident">Flipped90</span> <span class="op">=</span> <span class="number">5</span>,
        <span class="doccomment">/// flip and rotate 180 degrees counter-clockwise</span>
        <span class="ident">Flipped180</span> <span class="op">=</span> <span class="number">6</span>,
        <span class="doccomment">/// flip and rotate 270 degrees counter-clockwise</span>
        <span class="ident">Flipped270</span> <span class="op">=</span> <span class="number">7</span>,
    }
    <span class="kw">impl</span> <span class="ident">Transform</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Transform</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">Normal</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">_90</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">_180</span>),
                <span class="number">3</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">_270</span>),
                <span class="number">4</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">Flipped</span>),
                <span class="number">5</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">Flipped90</span>),
                <span class="number">6</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">Flipped180</span>),
                <span class="number">7</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Transform</span>::<span class="ident">Flipped270</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="macro">bitflags</span><span class="macro">!</span> {
        <span class="doccomment">/// mode information</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// These flags describe properties of an output mode.</span>
        <span class="doccomment">/// They are used in the flags bitfield of the mode event.</span>
        <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Mode</span>: <span class="ident">u32</span> {
            <span class="doccomment">/// indicates this is the current mode</span>
            <span class="kw">const</span> <span class="ident">Current</span> <span class="op">=</span> <span class="number">0x1</span>;
            <span class="doccomment">/// indicates this is the preferred mode</span>
            <span class="kw">const</span> <span class="ident">Preferred</span> <span class="op">=</span> <span class="number">0x2</span>;
        }
    }
    <span class="kw">impl</span> <span class="ident">Mode</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Mode</span><span class="op">&gt;</span> {
            <span class="prelude-val">Some</span>(<span class="ident">Mode</span>::<span class="ident">from_bits_truncate</span>(<span class="ident">n</span>))
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="self">self</span>.<span class="ident">bits</span>()
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// properties of the output</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The geometry event describes geometric properties of the output.</span>
        <span class="doccomment">/// The event is sent when binding to the output object and whenever</span>
        <span class="doccomment">/// any of the properties change.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_output, x, y, physical_width, physical_height, subpixel, make, model, transform</span>
        <span class="kw">pub</span> <span class="ident">geometry</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_output</span>: <span class="kw-2">&amp;</span><span class="ident">WlOutput</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">physical_width</span>: <span class="ident">i32</span>, <span class="ident">physical_height</span>: <span class="ident">i32</span>, <span class="ident">subpixel</span>: <span class="ident">Subpixel</span>, <span class="ident">make</span>: <span class="ident">String</span>, <span class="ident">model</span>: <span class="ident">String</span>, <span class="ident">transform</span>: <span class="ident">Transform</span>),
        <span class="doccomment">/// advertise available modes for the output</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The mode event describes an available mode for the output.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The event is sent when binding to the output object and there</span>
        <span class="doccomment">/// will always be one mode, the current mode.  The event is sent</span>
        <span class="doccomment">/// again if an output changes mode, for the mode that is now</span>
        <span class="doccomment">/// current.  In other words, the current mode is always the last</span>
        <span class="doccomment">/// mode that was received with the current flag set.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The size of a mode is given in physical hardware units of</span>
        <span class="doccomment">/// the output device. This is not necessarily the same as</span>
        <span class="doccomment">/// the output size in the global compositor space. For instance,</span>
        <span class="doccomment">/// the output may be scaled, as described in wl_output.scale,</span>
        <span class="doccomment">/// or transformed, as described in wl_output.transform.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_output, flags, width, height, refresh</span>
        <span class="kw">pub</span> <span class="ident">mode</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_output</span>: <span class="kw-2">&amp;</span><span class="ident">WlOutput</span>, <span class="ident">flags</span>: <span class="ident">Mode</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>, <span class="ident">refresh</span>: <span class="ident">i32</span>),
        <span class="doccomment">/// sent all information about output</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event is sent after all other properties have been</span>
        <span class="doccomment">/// sent after binding to the output object and after any</span>
        <span class="doccomment">/// other property changes done after that. This allows</span>
        <span class="doccomment">/// changes to the output properties to be seen as</span>
        <span class="doccomment">/// atomic, even if they happen via multiple events.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_output</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 2 of the interface</span>
        <span class="kw">pub</span> <span class="ident">done</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_output</span>: <span class="kw-2">&amp;</span><span class="ident">WlOutput</span>),
        <span class="doccomment">/// output scaling properties</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This event contains scaling geometry information</span>
        <span class="doccomment">/// that is not in the geometry event. It may be sent after</span>
        <span class="doccomment">/// binding the output object or if the output scale changes</span>
        <span class="doccomment">/// later. If it is not sent, the client should assume a</span>
        <span class="doccomment">/// scale of 1.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A scale larger than 1 means that the compositor will</span>
        <span class="doccomment">/// automatically scale surface buffers by this amount</span>
        <span class="doccomment">/// when rendering. This is used for very high resolution</span>
        <span class="doccomment">/// displays where applications rendering at the native</span>
        <span class="doccomment">/// resolution would be too small to be legible.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// It is intended that scaling aware clients track the</span>
        <span class="doccomment">/// current output of a surface, and if it is on a scaled</span>
        <span class="doccomment">/// output it should use wl_surface.set_buffer_scale with</span>
        <span class="doccomment">/// the scale of the output. That way the compositor can</span>
        <span class="doccomment">/// avoid scaling the surface, and the client can supply</span>
        <span class="doccomment">/// a higher detail image.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, wl_output, factor</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request only exists since version 2 of the interface</span>
        <span class="kw">pub</span> <span class="ident">scale</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">wl_output</span>: <span class="kw-2">&amp;</span><span class="ident">WlOutput</span>, <span class="ident">factor</span>: <span class="ident">i32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">geometry</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">geometry</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">mode</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">mode</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">done</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">done</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">scale</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">scale</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">WL_OUTPUT_RELEASE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">WlOutput</span> {
        <span class="doccomment">/// release the output object</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Using this request a client can tell the server that it is not going to</span>
        <span class="doccomment">/// use the output object anymore.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This request is only available since version 3 of the interface</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">release</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_OUTPUT_RELEASE</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_region</span> {
    <span class="doccomment">//! region interface</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A region object describes an area.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Region objects are used to describe the opaque and input</span>
    <span class="doccomment">//! regions of a surface.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlRegion</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlRegion</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlRegion</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlRegion</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlRegion</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlRegion</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlRegion</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlRegion</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlRegion</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_region_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_region&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlRegion</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlRegion</span> {
            <span class="ident">WlRegion</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">const</span> <span class="ident">WL_REGION_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_REGION_ADD</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_REGION_SUBTRACT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">impl</span> <span class="ident">WlRegion</span> {
        <span class="doccomment">/// destroy region</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Destroy the region.  This will invalidate the object ID.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_REGION_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// add rectangle to region</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Add the specified rectangle to the region.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">add</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_REGION_ADD</span>, <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">width</span>, <span class="ident">height</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// subtract rectangle from region</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Subtract the specified rectangle from the region.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">subtract</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_REGION_SUBTRACT</span>, <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">width</span>, <span class="ident">height</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_subcompositor</span> {
    <span class="doccomment">//! sub-surface compositing</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! The global interface exposing sub-surface compositing capabilities.</span>
    <span class="doccomment">//! A wl_surface, that has sub-surfaces associated, is called the</span>
    <span class="doccomment">//! parent surface. Sub-surfaces can be arbitrarily nested and create</span>
    <span class="doccomment">//! a tree of sub-surfaces.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The root surface in a tree of sub-surfaces is the main</span>
    <span class="doccomment">//! surface. The main surface cannot be a sub-surface, because</span>
    <span class="doccomment">//! sub-surfaces must always have a parent.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! A main surface with its sub-surfaces forms a (compound) window.</span>
    <span class="doccomment">//! For window management purposes, this set of wl_surface objects is</span>
    <span class="doccomment">//! to be considered as a single window, and it should also behave as</span>
    <span class="doccomment">//! such.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The aim of sub-surfaces is to offload some of the compositing work</span>
    <span class="doccomment">//! within a window from clients to the compositor. A prime example is</span>
    <span class="doccomment">//! a video player with decorations and video in separate wl_surface</span>
    <span class="doccomment">//! objects. This should allow the compositor to pass YUV video buffer</span>
    <span class="doccomment">//! processing to dedicated overlay hardware when possible.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlSubcompositor</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlSubcompositor</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlSubcompositor</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlSubcompositor</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSubcompositor</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlSubcompositor</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSubcompositor</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlSubcompositor</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlSubcompositor</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_subcompositor_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_subcompositor&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlSubcompositor</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlSubcompositor</span> {
            <span class="ident">WlSubcompositor</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// the to-be sub-surface is invalid</span>
        <span class="ident">BadSurface</span> <span class="op">=</span> <span class="number">0</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">BadSurface</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">const</span> <span class="ident">WL_SUBCOMPOSITOR_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_SUBCOMPOSITOR_GET_SUBSURFACE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">impl</span> <span class="ident">WlSubcompositor</span> {
        <span class="doccomment">/// unbind from the subcompositor interface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Informs the server that the client will not be using this</span>
        <span class="doccomment">/// protocol object anymore. This does not affect any other</span>
        <span class="doccomment">/// objects, wl_subsurface objects included.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBCOMPOSITOR_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// give a surface the role sub-surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Create a sub-surface interface for the given surface, and</span>
        <span class="doccomment">/// associate it with the given parent surface. This turns a</span>
        <span class="doccomment">/// plain wl_surface into a sub-surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The to-be sub-surface must not already have another role, and it</span>
        <span class="doccomment">/// must not have an existing wl_subsurface object. Otherwise a protocol</span>
        <span class="doccomment">/// error is raised.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_subsurface</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">parent</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">wl_subsurface</span>::<span class="ident">WlSubsurface</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBCOMPOSITOR_GET_SUBSURFACE</span>, <span class="kw-2">&amp;</span><span class="ident">wl_subsurface_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>(), <span class="ident">surface</span>.<span class="ident">ptr</span>(), <span class="ident">parent</span>.<span class="ident">ptr</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">wl_subsurface</span> {
    <span class="doccomment">//! sub-surface interface to a wl_surface</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! An additional interface to a wl_surface object, which has been</span>
    <span class="doccomment">//! made a sub-surface. A sub-surface has one parent surface. A</span>
    <span class="doccomment">//! sub-surface&#39;s size and position are not limited to that of the parent.</span>
    <span class="doccomment">//! Particularly, a sub-surface is not automatically clipped to its</span>
    <span class="doccomment">//! parent&#39;s area.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! A sub-surface becomes mapped, when a non-NULL wl_buffer is applied</span>
    <span class="doccomment">//! and the parent surface is mapped. The order of which one happens</span>
    <span class="doccomment">//! first is irrelevant. A sub-surface is hidden if the parent becomes</span>
    <span class="doccomment">//! hidden, or if a NULL wl_buffer is applied. These rules apply</span>
    <span class="doccomment">//! recursively through the tree of surfaces.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The behaviour of a wl_surface.commit request on a sub-surface</span>
    <span class="doccomment">//! depends on the sub-surface&#39;s mode. The possible modes are</span>
    <span class="doccomment">//! synchronized and desynchronized, see methods</span>
    <span class="doccomment">//! wl_subsurface.set_sync and wl_subsurface.set_desync. Synchronized</span>
    <span class="doccomment">//! mode caches the wl_surface state to be applied when the parent&#39;s</span>
    <span class="doccomment">//! state gets applied, and desynchronized mode applies the pending</span>
    <span class="doccomment">//! wl_surface state directly. A sub-surface is initially in the</span>
    <span class="doccomment">//! synchronized mode.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Sub-surfaces have also other kind of state, which is managed by</span>
    <span class="doccomment">//! wl_subsurface requests, as opposed to wl_surface requests. This</span>
    <span class="doccomment">//! state includes the sub-surface position relative to the parent</span>
    <span class="doccomment">//! surface (wl_subsurface.set_position), and the stacking order of</span>
    <span class="doccomment">//! the parent and its sub-surfaces (wl_subsurface.place_above and</span>
    <span class="doccomment">//! .place_below). This state is applied when the parent surface&#39;s</span>
    <span class="doccomment">//! wl_surface state is applied, regardless of the sub-surface&#39;s mode.</span>
    <span class="doccomment">//! As the exception, set_sync and set_desync are effective immediately.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The main surface can be thought to be always in desynchronized mode,</span>
    <span class="doccomment">//! since it does not have a parent in the sub-surfaces sense.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Even if a sub-surface is in desynchronized mode, it will behave as</span>
    <span class="doccomment">//! in synchronized mode, if its parent surface behaves as in</span>
    <span class="doccomment">//! synchronized mode. This rule is applied recursively throughout the</span>
    <span class="doccomment">//! tree of surfaces. This means, that one can set a sub-surface into</span>
    <span class="doccomment">//! synchronized mode, and then assume that all its child and grand-child</span>
    <span class="doccomment">//! sub-surfaces are synchronized, too, without explicitly setting them.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! If the wl_surface associated with the wl_subsurface is destroyed, the</span>
    <span class="doccomment">//! wl_subsurface object becomes inert. Note, that destroying either object</span>
    <span class="doccomment">//! takes effect immediately. If you need to synchronize the removal</span>
    <span class="doccomment">//! of a sub-surface to the parent surface update, unmap the sub-surface</span>
    <span class="doccomment">//! first by attaching a NULL wl_buffer, update parent, and then destroy</span>
    <span class="doccomment">//! the sub-surface.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! If the parent wl_surface object is destroyed, the sub-surface is</span>
    <span class="doccomment">//! unmapped.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">WlSubsurface</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">WlSubsurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">WlSubsurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">WlSubsurface</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSubsurface</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">WlSubsurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">WlSubsurface</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">WlSubsurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">WlSubsurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">wl_subsurface_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;wl_subsurface&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">WlSubsurface</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">WlSubsurface</span> {
            <span class="ident">WlSubsurface</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// wl_surface is not a sibling or the parent</span>
        <span class="ident">BadSurface</span> <span class="op">=</span> <span class="number">0</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">BadSurface</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">const</span> <span class="ident">WL_SUBSURFACE_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">WL_SUBSURFACE_SET_POSITION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">WL_SUBSURFACE_PLACE_ABOVE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">const</span> <span class="ident">WL_SUBSURFACE_PLACE_BELOW</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span>;
    <span class="kw">const</span> <span class="ident">WL_SUBSURFACE_SET_SYNC</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span>;
    <span class="kw">const</span> <span class="ident">WL_SUBSURFACE_SET_DESYNC</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">5</span>;
    <span class="kw">impl</span> <span class="ident">WlSubsurface</span> {
        <span class="doccomment">/// remove sub-surface interface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The sub-surface interface is removed from the wl_surface object</span>
        <span class="doccomment">/// that was turned into a sub-surface with a</span>
        <span class="doccomment">/// wl_subcompositor.get_subsurface request. The wl_surface&#39;s association</span>
        <span class="doccomment">/// to the parent is deleted, and the wl_surface loses its role as</span>
        <span class="doccomment">/// a sub-surface. The wl_surface is unmapped.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBSURFACE_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// reposition the sub-surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This schedules a sub-surface position change.</span>
        <span class="doccomment">/// The sub-surface will be moved so that its origin (top left</span>
        <span class="doccomment">/// corner pixel) will be at the location x, y of the parent surface</span>
        <span class="doccomment">/// coordinate system. The coordinates are not restricted to the parent</span>
        <span class="doccomment">/// surface area. Negative values are allowed.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The scheduled coordinates will take effect whenever the state of the</span>
        <span class="doccomment">/// parent surface is applied. When this happens depends on whether the</span>
        <span class="doccomment">/// parent surface is in synchronized mode or not. See</span>
        <span class="doccomment">/// wl_subsurface.set_sync and wl_subsurface.set_desync for details.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If more than one set_position request is invoked by the client before</span>
        <span class="doccomment">/// the commit of the parent surface, the position of a new request always</span>
        <span class="doccomment">/// replaces the scheduled position from any previous request.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The initial position is 0, 0.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_position</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBSURFACE_SET_POSITION</span>, <span class="ident">x</span>, <span class="ident">y</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// restack the sub-surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This sub-surface is taken from the stack, and put back just</span>
        <span class="doccomment">/// above the reference surface, changing the z-order of the sub-surfaces.</span>
        <span class="doccomment">/// The reference surface must be one of the sibling surfaces, or the</span>
        <span class="doccomment">/// parent surface. Using any other surface, including this sub-surface,</span>
        <span class="doccomment">/// will cause a protocol error.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The z-order is double-buffered. Requests are handled in order and</span>
        <span class="doccomment">/// applied immediately to a pending state. The final pending state is</span>
        <span class="doccomment">/// copied to the active state the next time the state of the parent</span>
        <span class="doccomment">/// surface is applied. When this happens depends on whether the parent</span>
        <span class="doccomment">/// surface is in synchronized mode or not. See wl_subsurface.set_sync and</span>
        <span class="doccomment">/// wl_subsurface.set_desync for details.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A new sub-surface is initially added as the top-most in the stack</span>
        <span class="doccomment">/// of its siblings and parent.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">place_above</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">sibling</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBSURFACE_PLACE_ABOVE</span>, <span class="ident">sibling</span>.<span class="ident">ptr</span>()) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// restack the sub-surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The sub-surface is placed just below the reference surface.</span>
        <span class="doccomment">/// See wl_subsurface.place_above.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">place_below</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">sibling</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBSURFACE_PLACE_BELOW</span>, <span class="ident">sibling</span>.<span class="ident">ptr</span>()) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set sub-surface to synchronized mode</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Change the commit behaviour of the sub-surface to synchronized</span>
        <span class="doccomment">/// mode, also described as the parent dependent mode.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// In synchronized mode, wl_surface.commit on a sub-surface will</span>
        <span class="doccomment">/// accumulate the committed state in a cache, but the state will</span>
        <span class="doccomment">/// not be applied and hence will not change the compositor output.</span>
        <span class="doccomment">/// The cached state is applied to the sub-surface immediately after</span>
        <span class="doccomment">/// the parent surface&#39;s state is applied. This ensures atomic</span>
        <span class="doccomment">/// updates of the parent and all its synchronized sub-surfaces.</span>
        <span class="doccomment">/// Applying the cached state will invalidate the cache, so further</span>
        <span class="doccomment">/// parent surface commits do not (re-)apply old state.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// See wl_subsurface for the recursive effect of this mode.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_sync</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBSURFACE_SET_SYNC</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set sub-surface to desynchronized mode</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Change the commit behaviour of the sub-surface to desynchronized</span>
        <span class="doccomment">/// mode, also described as independent or freely running mode.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// In desynchronized mode, wl_surface.commit on a sub-surface will</span>
        <span class="doccomment">/// apply the pending state directly, without caching, as happens</span>
        <span class="doccomment">/// normally with a wl_surface. Calling wl_surface.commit on the</span>
        <span class="doccomment">/// parent surface has no effect on the sub-surface&#39;s wl_surface</span>
        <span class="doccomment">/// state. This mode allows a sub-surface to be updated on its own.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If cached state exists when wl_surface.commit is called in</span>
        <span class="doccomment">/// desynchronized mode, the pending state is added to the cached</span>
        <span class="doccomment">/// state, and applied as a whole. This invalidates the cache.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Note: even if a sub-surface is set to desynchronized, a parent</span>
        <span class="doccomment">/// sub-surface may override it to behave as synchronized. For details,</span>
        <span class="doccomment">/// see wl_subsurface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If a surface&#39;s parent surface behaves as desynchronized, then</span>
        <span class="doccomment">/// the cached state is applied on set_desync.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_desync</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">WL_SUBSURFACE_SET_DESYNC</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
</pre>
</section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../../../../../../../../../../";
        window.currentCrate = "wayland_client";
    </script>
    <script src="../../../../../../../../../../../../main.js"></script>
    <script defer src="../../../../../../../../../../../../search-index.js"></script>
</body>
</html>