<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="Source to the Rust file `/home/daboross/Projects/CheckedOut/glium/target/debug/build/wayland-protocols-3a519757c9d6d391/out/xdg-shell-v5_client_api.rs`.">
    <meta name="keywords" content="rust, rustlang, rust-lang">

    <title>xdg-shell-v5_client_api.rs.html -- source</title>

    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../main.css">
    

    
    
</head>
<body class="rustdoc source">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content"><pre class="line-numbers"><span id="1">   1</span>
<span id="2">   2</span>
<span id="3">   3</span>
<span id="4">   4</span>
<span id="5">   5</span>
<span id="6">   6</span>
<span id="7">   7</span>
<span id="8">   8</span>
<span id="9">   9</span>
<span id="10">  10</span>
<span id="11">  11</span>
<span id="12">  12</span>
<span id="13">  13</span>
<span id="14">  14</span>
<span id="15">  15</span>
<span id="16">  16</span>
<span id="17">  17</span>
<span id="18">  18</span>
<span id="19">  19</span>
<span id="20">  20</span>
<span id="21">  21</span>
<span id="22">  22</span>
<span id="23">  23</span>
<span id="24">  24</span>
<span id="25">  25</span>
<span id="26">  26</span>
<span id="27">  27</span>
<span id="28">  28</span>
<span id="29">  29</span>
<span id="30">  30</span>
<span id="31">  31</span>
<span id="32">  32</span>
<span id="33">  33</span>
<span id="34">  34</span>
<span id="35">  35</span>
<span id="36">  36</span>
<span id="37">  37</span>
<span id="38">  38</span>
<span id="39">  39</span>
<span id="40">  40</span>
<span id="41">  41</span>
<span id="42">  42</span>
<span id="43">  43</span>
<span id="44">  44</span>
<span id="45">  45</span>
<span id="46">  46</span>
<span id="47">  47</span>
<span id="48">  48</span>
<span id="49">  49</span>
<span id="50">  50</span>
<span id="51">  51</span>
<span id="52">  52</span>
<span id="53">  53</span>
<span id="54">  54</span>
<span id="55">  55</span>
<span id="56">  56</span>
<span id="57">  57</span>
<span id="58">  58</span>
<span id="59">  59</span>
<span id="60">  60</span>
<span id="61">  61</span>
<span id="62">  62</span>
<span id="63">  63</span>
<span id="64">  64</span>
<span id="65">  65</span>
<span id="66">  66</span>
<span id="67">  67</span>
<span id="68">  68</span>
<span id="69">  69</span>
<span id="70">  70</span>
<span id="71">  71</span>
<span id="72">  72</span>
<span id="73">  73</span>
<span id="74">  74</span>
<span id="75">  75</span>
<span id="76">  76</span>
<span id="77">  77</span>
<span id="78">  78</span>
<span id="79">  79</span>
<span id="80">  80</span>
<span id="81">  81</span>
<span id="82">  82</span>
<span id="83">  83</span>
<span id="84">  84</span>
<span id="85">  85</span>
<span id="86">  86</span>
<span id="87">  87</span>
<span id="88">  88</span>
<span id="89">  89</span>
<span id="90">  90</span>
<span id="91">  91</span>
<span id="92">  92</span>
<span id="93">  93</span>
<span id="94">  94</span>
<span id="95">  95</span>
<span id="96">  96</span>
<span id="97">  97</span>
<span id="98">  98</span>
<span id="99">  99</span>
<span id="100"> 100</span>
<span id="101"> 101</span>
<span id="102"> 102</span>
<span id="103"> 103</span>
<span id="104"> 104</span>
<span id="105"> 105</span>
<span id="106"> 106</span>
<span id="107"> 107</span>
<span id="108"> 108</span>
<span id="109"> 109</span>
<span id="110"> 110</span>
<span id="111"> 111</span>
<span id="112"> 112</span>
<span id="113"> 113</span>
<span id="114"> 114</span>
<span id="115"> 115</span>
<span id="116"> 116</span>
<span id="117"> 117</span>
<span id="118"> 118</span>
<span id="119"> 119</span>
<span id="120"> 120</span>
<span id="121"> 121</span>
<span id="122"> 122</span>
<span id="123"> 123</span>
<span id="124"> 124</span>
<span id="125"> 125</span>
<span id="126"> 126</span>
<span id="127"> 127</span>
<span id="128"> 128</span>
<span id="129"> 129</span>
<span id="130"> 130</span>
<span id="131"> 131</span>
<span id="132"> 132</span>
<span id="133"> 133</span>
<span id="134"> 134</span>
<span id="135"> 135</span>
<span id="136"> 136</span>
<span id="137"> 137</span>
<span id="138"> 138</span>
<span id="139"> 139</span>
<span id="140"> 140</span>
<span id="141"> 141</span>
<span id="142"> 142</span>
<span id="143"> 143</span>
<span id="144"> 144</span>
<span id="145"> 145</span>
<span id="146"> 146</span>
<span id="147"> 147</span>
<span id="148"> 148</span>
<span id="149"> 149</span>
<span id="150"> 150</span>
<span id="151"> 151</span>
<span id="152"> 152</span>
<span id="153"> 153</span>
<span id="154"> 154</span>
<span id="155"> 155</span>
<span id="156"> 156</span>
<span id="157"> 157</span>
<span id="158"> 158</span>
<span id="159"> 159</span>
<span id="160"> 160</span>
<span id="161"> 161</span>
<span id="162"> 162</span>
<span id="163"> 163</span>
<span id="164"> 164</span>
<span id="165"> 165</span>
<span id="166"> 166</span>
<span id="167"> 167</span>
<span id="168"> 168</span>
<span id="169"> 169</span>
<span id="170"> 170</span>
<span id="171"> 171</span>
<span id="172"> 172</span>
<span id="173"> 173</span>
<span id="174"> 174</span>
<span id="175"> 175</span>
<span id="176"> 176</span>
<span id="177"> 177</span>
<span id="178"> 178</span>
<span id="179"> 179</span>
<span id="180"> 180</span>
<span id="181"> 181</span>
<span id="182"> 182</span>
<span id="183"> 183</span>
<span id="184"> 184</span>
<span id="185"> 185</span>
<span id="186"> 186</span>
<span id="187"> 187</span>
<span id="188"> 188</span>
<span id="189"> 189</span>
<span id="190"> 190</span>
<span id="191"> 191</span>
<span id="192"> 192</span>
<span id="193"> 193</span>
<span id="194"> 194</span>
<span id="195"> 195</span>
<span id="196"> 196</span>
<span id="197"> 197</span>
<span id="198"> 198</span>
<span id="199"> 199</span>
<span id="200"> 200</span>
<span id="201"> 201</span>
<span id="202"> 202</span>
<span id="203"> 203</span>
<span id="204"> 204</span>
<span id="205"> 205</span>
<span id="206"> 206</span>
<span id="207"> 207</span>
<span id="208"> 208</span>
<span id="209"> 209</span>
<span id="210"> 210</span>
<span id="211"> 211</span>
<span id="212"> 212</span>
<span id="213"> 213</span>
<span id="214"> 214</span>
<span id="215"> 215</span>
<span id="216"> 216</span>
<span id="217"> 217</span>
<span id="218"> 218</span>
<span id="219"> 219</span>
<span id="220"> 220</span>
<span id="221"> 221</span>
<span id="222"> 222</span>
<span id="223"> 223</span>
<span id="224"> 224</span>
<span id="225"> 225</span>
<span id="226"> 226</span>
<span id="227"> 227</span>
<span id="228"> 228</span>
<span id="229"> 229</span>
<span id="230"> 230</span>
<span id="231"> 231</span>
<span id="232"> 232</span>
<span id="233"> 233</span>
<span id="234"> 234</span>
<span id="235"> 235</span>
<span id="236"> 236</span>
<span id="237"> 237</span>
<span id="238"> 238</span>
<span id="239"> 239</span>
<span id="240"> 240</span>
<span id="241"> 241</span>
<span id="242"> 242</span>
<span id="243"> 243</span>
<span id="244"> 244</span>
<span id="245"> 245</span>
<span id="246"> 246</span>
<span id="247"> 247</span>
<span id="248"> 248</span>
<span id="249"> 249</span>
<span id="250"> 250</span>
<span id="251"> 251</span>
<span id="252"> 252</span>
<span id="253"> 253</span>
<span id="254"> 254</span>
<span id="255"> 255</span>
<span id="256"> 256</span>
<span id="257"> 257</span>
<span id="258"> 258</span>
<span id="259"> 259</span>
<span id="260"> 260</span>
<span id="261"> 261</span>
<span id="262"> 262</span>
<span id="263"> 263</span>
<span id="264"> 264</span>
<span id="265"> 265</span>
<span id="266"> 266</span>
<span id="267"> 267</span>
<span id="268"> 268</span>
<span id="269"> 269</span>
<span id="270"> 270</span>
<span id="271"> 271</span>
<span id="272"> 272</span>
<span id="273"> 273</span>
<span id="274"> 274</span>
<span id="275"> 275</span>
<span id="276"> 276</span>
<span id="277"> 277</span>
<span id="278"> 278</span>
<span id="279"> 279</span>
<span id="280"> 280</span>
<span id="281"> 281</span>
<span id="282"> 282</span>
<span id="283"> 283</span>
<span id="284"> 284</span>
<span id="285"> 285</span>
<span id="286"> 286</span>
<span id="287"> 287</span>
<span id="288"> 288</span>
<span id="289"> 289</span>
<span id="290"> 290</span>
<span id="291"> 291</span>
<span id="292"> 292</span>
<span id="293"> 293</span>
<span id="294"> 294</span>
<span id="295"> 295</span>
<span id="296"> 296</span>
<span id="297"> 297</span>
<span id="298"> 298</span>
<span id="299"> 299</span>
<span id="300"> 300</span>
<span id="301"> 301</span>
<span id="302"> 302</span>
<span id="303"> 303</span>
<span id="304"> 304</span>
<span id="305"> 305</span>
<span id="306"> 306</span>
<span id="307"> 307</span>
<span id="308"> 308</span>
<span id="309"> 309</span>
<span id="310"> 310</span>
<span id="311"> 311</span>
<span id="312"> 312</span>
<span id="313"> 313</span>
<span id="314"> 314</span>
<span id="315"> 315</span>
<span id="316"> 316</span>
<span id="317"> 317</span>
<span id="318"> 318</span>
<span id="319"> 319</span>
<span id="320"> 320</span>
<span id="321"> 321</span>
<span id="322"> 322</span>
<span id="323"> 323</span>
<span id="324"> 324</span>
<span id="325"> 325</span>
<span id="326"> 326</span>
<span id="327"> 327</span>
<span id="328"> 328</span>
<span id="329"> 329</span>
<span id="330"> 330</span>
<span id="331"> 331</span>
<span id="332"> 332</span>
<span id="333"> 333</span>
<span id="334"> 334</span>
<span id="335"> 335</span>
<span id="336"> 336</span>
<span id="337"> 337</span>
<span id="338"> 338</span>
<span id="339"> 339</span>
<span id="340"> 340</span>
<span id="341"> 341</span>
<span id="342"> 342</span>
<span id="343"> 343</span>
<span id="344"> 344</span>
<span id="345"> 345</span>
<span id="346"> 346</span>
<span id="347"> 347</span>
<span id="348"> 348</span>
<span id="349"> 349</span>
<span id="350"> 350</span>
<span id="351"> 351</span>
<span id="352"> 352</span>
<span id="353"> 353</span>
<span id="354"> 354</span>
<span id="355"> 355</span>
<span id="356"> 356</span>
<span id="357"> 357</span>
<span id="358"> 358</span>
<span id="359"> 359</span>
<span id="360"> 360</span>
<span id="361"> 361</span>
<span id="362"> 362</span>
<span id="363"> 363</span>
<span id="364"> 364</span>
<span id="365"> 365</span>
<span id="366"> 366</span>
<span id="367"> 367</span>
<span id="368"> 368</span>
<span id="369"> 369</span>
<span id="370"> 370</span>
<span id="371"> 371</span>
<span id="372"> 372</span>
<span id="373"> 373</span>
<span id="374"> 374</span>
<span id="375"> 375</span>
<span id="376"> 376</span>
<span id="377"> 377</span>
<span id="378"> 378</span>
<span id="379"> 379</span>
<span id="380"> 380</span>
<span id="381"> 381</span>
<span id="382"> 382</span>
<span id="383"> 383</span>
<span id="384"> 384</span>
<span id="385"> 385</span>
<span id="386"> 386</span>
<span id="387"> 387</span>
<span id="388"> 388</span>
<span id="389"> 389</span>
<span id="390"> 390</span>
<span id="391"> 391</span>
<span id="392"> 392</span>
<span id="393"> 393</span>
<span id="394"> 394</span>
<span id="395"> 395</span>
<span id="396"> 396</span>
<span id="397"> 397</span>
<span id="398"> 398</span>
<span id="399"> 399</span>
<span id="400"> 400</span>
<span id="401"> 401</span>
<span id="402"> 402</span>
<span id="403"> 403</span>
<span id="404"> 404</span>
<span id="405"> 405</span>
<span id="406"> 406</span>
<span id="407"> 407</span>
<span id="408"> 408</span>
<span id="409"> 409</span>
<span id="410"> 410</span>
<span id="411"> 411</span>
<span id="412"> 412</span>
<span id="413"> 413</span>
<span id="414"> 414</span>
<span id="415"> 415</span>
<span id="416"> 416</span>
<span id="417"> 417</span>
<span id="418"> 418</span>
<span id="419"> 419</span>
<span id="420"> 420</span>
<span id="421"> 421</span>
<span id="422"> 422</span>
<span id="423"> 423</span>
<span id="424"> 424</span>
<span id="425"> 425</span>
<span id="426"> 426</span>
<span id="427"> 427</span>
<span id="428"> 428</span>
<span id="429"> 429</span>
<span id="430"> 430</span>
<span id="431"> 431</span>
<span id="432"> 432</span>
<span id="433"> 433</span>
<span id="434"> 434</span>
<span id="435"> 435</span>
<span id="436"> 436</span>
<span id="437"> 437</span>
<span id="438"> 438</span>
<span id="439"> 439</span>
<span id="440"> 440</span>
<span id="441"> 441</span>
<span id="442"> 442</span>
<span id="443"> 443</span>
<span id="444"> 444</span>
<span id="445"> 445</span>
<span id="446"> 446</span>
<span id="447"> 447</span>
<span id="448"> 448</span>
<span id="449"> 449</span>
<span id="450"> 450</span>
<span id="451"> 451</span>
<span id="452"> 452</span>
<span id="453"> 453</span>
<span id="454"> 454</span>
<span id="455"> 455</span>
<span id="456"> 456</span>
<span id="457"> 457</span>
<span id="458"> 458</span>
<span id="459"> 459</span>
<span id="460"> 460</span>
<span id="461"> 461</span>
<span id="462"> 462</span>
<span id="463"> 463</span>
<span id="464"> 464</span>
<span id="465"> 465</span>
<span id="466"> 466</span>
<span id="467"> 467</span>
<span id="468"> 468</span>
<span id="469"> 469</span>
<span id="470"> 470</span>
<span id="471"> 471</span>
<span id="472"> 472</span>
<span id="473"> 473</span>
<span id="474"> 474</span>
<span id="475"> 475</span>
<span id="476"> 476</span>
<span id="477"> 477</span>
<span id="478"> 478</span>
<span id="479"> 479</span>
<span id="480"> 480</span>
<span id="481"> 481</span>
<span id="482"> 482</span>
<span id="483"> 483</span>
<span id="484"> 484</span>
<span id="485"> 485</span>
<span id="486"> 486</span>
<span id="487"> 487</span>
<span id="488"> 488</span>
<span id="489"> 489</span>
<span id="490"> 490</span>
<span id="491"> 491</span>
<span id="492"> 492</span>
<span id="493"> 493</span>
<span id="494"> 494</span>
<span id="495"> 495</span>
<span id="496"> 496</span>
<span id="497"> 497</span>
<span id="498"> 498</span>
<span id="499"> 499</span>
<span id="500"> 500</span>
<span id="501"> 501</span>
<span id="502"> 502</span>
<span id="503"> 503</span>
<span id="504"> 504</span>
<span id="505"> 505</span>
<span id="506"> 506</span>
<span id="507"> 507</span>
<span id="508"> 508</span>
<span id="509"> 509</span>
<span id="510"> 510</span>
<span id="511"> 511</span>
<span id="512"> 512</span>
<span id="513"> 513</span>
<span id="514"> 514</span>
<span id="515"> 515</span>
<span id="516"> 516</span>
<span id="517"> 517</span>
<span id="518"> 518</span>
<span id="519"> 519</span>
<span id="520"> 520</span>
<span id="521"> 521</span>
<span id="522"> 522</span>
<span id="523"> 523</span>
<span id="524"> 524</span>
<span id="525"> 525</span>
<span id="526"> 526</span>
<span id="527"> 527</span>
<span id="528"> 528</span>
<span id="529"> 529</span>
<span id="530"> 530</span>
<span id="531"> 531</span>
<span id="532"> 532</span>
<span id="533"> 533</span>
<span id="534"> 534</span>
<span id="535"> 535</span>
<span id="536"> 536</span>
<span id="537"> 537</span>
<span id="538"> 538</span>
<span id="539"> 539</span>
<span id="540"> 540</span>
<span id="541"> 541</span>
<span id="542"> 542</span>
<span id="543"> 543</span>
<span id="544"> 544</span>
<span id="545"> 545</span>
<span id="546"> 546</span>
<span id="547"> 547</span>
<span id="548"> 548</span>
<span id="549"> 549</span>
<span id="550"> 550</span>
<span id="551"> 551</span>
<span id="552"> 552</span>
<span id="553"> 553</span>
<span id="554"> 554</span>
<span id="555"> 555</span>
<span id="556"> 556</span>
<span id="557"> 557</span>
<span id="558"> 558</span>
<span id="559"> 559</span>
<span id="560"> 560</span>
<span id="561"> 561</span>
<span id="562"> 562</span>
<span id="563"> 563</span>
<span id="564"> 564</span>
<span id="565"> 565</span>
<span id="566"> 566</span>
<span id="567"> 567</span>
<span id="568"> 568</span>
<span id="569"> 569</span>
<span id="570"> 570</span>
<span id="571"> 571</span>
<span id="572"> 572</span>
<span id="573"> 573</span>
<span id="574"> 574</span>
<span id="575"> 575</span>
<span id="576"> 576</span>
<span id="577"> 577</span>
<span id="578"> 578</span>
<span id="579"> 579</span>
<span id="580"> 580</span>
<span id="581"> 581</span>
<span id="582"> 582</span>
<span id="583"> 583</span>
<span id="584"> 584</span>
<span id="585"> 585</span>
<span id="586"> 586</span>
<span id="587"> 587</span>
<span id="588"> 588</span>
<span id="589"> 589</span>
<span id="590"> 590</span>
<span id="591"> 591</span>
<span id="592"> 592</span>
<span id="593"> 593</span>
<span id="594"> 594</span>
<span id="595"> 595</span>
<span id="596"> 596</span>
<span id="597"> 597</span>
<span id="598"> 598</span>
<span id="599"> 599</span>
<span id="600"> 600</span>
<span id="601"> 601</span>
<span id="602"> 602</span>
<span id="603"> 603</span>
<span id="604"> 604</span>
<span id="605"> 605</span>
<span id="606"> 606</span>
<span id="607"> 607</span>
<span id="608"> 608</span>
<span id="609"> 609</span>
<span id="610"> 610</span>
<span id="611"> 611</span>
<span id="612"> 612</span>
<span id="613"> 613</span>
<span id="614"> 614</span>
<span id="615"> 615</span>
<span id="616"> 616</span>
<span id="617"> 617</span>
<span id="618"> 618</span>
<span id="619"> 619</span>
<span id="620"> 620</span>
<span id="621"> 621</span>
<span id="622"> 622</span>
<span id="623"> 623</span>
<span id="624"> 624</span>
<span id="625"> 625</span>
<span id="626"> 626</span>
<span id="627"> 627</span>
<span id="628"> 628</span>
<span id="629"> 629</span>
<span id="630"> 630</span>
<span id="631"> 631</span>
<span id="632"> 632</span>
<span id="633"> 633</span>
<span id="634"> 634</span>
<span id="635"> 635</span>
<span id="636"> 636</span>
<span id="637"> 637</span>
<span id="638"> 638</span>
<span id="639"> 639</span>
<span id="640"> 640</span>
<span id="641"> 641</span>
<span id="642"> 642</span>
<span id="643"> 643</span>
<span id="644"> 644</span>
<span id="645"> 645</span>
<span id="646"> 646</span>
<span id="647"> 647</span>
<span id="648"> 648</span>
<span id="649"> 649</span>
<span id="650"> 650</span>
<span id="651"> 651</span>
<span id="652"> 652</span>
<span id="653"> 653</span>
<span id="654"> 654</span>
<span id="655"> 655</span>
<span id="656"> 656</span>
<span id="657"> 657</span>
<span id="658"> 658</span>
<span id="659"> 659</span>
<span id="660"> 660</span>
<span id="661"> 661</span>
<span id="662"> 662</span>
<span id="663"> 663</span>
<span id="664"> 664</span>
<span id="665"> 665</span>
<span id="666"> 666</span>
<span id="667"> 667</span>
<span id="668"> 668</span>
<span id="669"> 669</span>
<span id="670"> 670</span>
<span id="671"> 671</span>
<span id="672"> 672</span>
<span id="673"> 673</span>
<span id="674"> 674</span>
<span id="675"> 675</span>
<span id="676"> 676</span>
<span id="677"> 677</span>
<span id="678"> 678</span>
<span id="679"> 679</span>
<span id="680"> 680</span>
<span id="681"> 681</span>
<span id="682"> 682</span>
<span id="683"> 683</span>
<span id="684"> 684</span>
<span id="685"> 685</span>
<span id="686"> 686</span>
<span id="687"> 687</span>
<span id="688"> 688</span>
<span id="689"> 689</span>
<span id="690"> 690</span>
<span id="691"> 691</span>
<span id="692"> 692</span>
<span id="693"> 693</span>
<span id="694"> 694</span>
<span id="695"> 695</span>
<span id="696"> 696</span>
<span id="697"> 697</span>
<span id="698"> 698</span>
<span id="699"> 699</span>
<span id="700"> 700</span>
<span id="701"> 701</span>
<span id="702"> 702</span>
<span id="703"> 703</span>
<span id="704"> 704</span>
<span id="705"> 705</span>
<span id="706"> 706</span>
<span id="707"> 707</span>
<span id="708"> 708</span>
<span id="709"> 709</span>
<span id="710"> 710</span>
<span id="711"> 711</span>
<span id="712"> 712</span>
<span id="713"> 713</span>
<span id="714"> 714</span>
<span id="715"> 715</span>
<span id="716"> 716</span>
<span id="717"> 717</span>
<span id="718"> 718</span>
<span id="719"> 719</span>
<span id="720"> 720</span>
<span id="721"> 721</span>
<span id="722"> 722</span>
<span id="723"> 723</span>
<span id="724"> 724</span>
<span id="725"> 725</span>
<span id="726"> 726</span>
<span id="727"> 727</span>
<span id="728"> 728</span>
<span id="729"> 729</span>
<span id="730"> 730</span>
<span id="731"> 731</span>
<span id="732"> 732</span>
<span id="733"> 733</span>
<span id="734"> 734</span>
<span id="735"> 735</span>
<span id="736"> 736</span>
<span id="737"> 737</span>
<span id="738"> 738</span>
<span id="739"> 739</span>
<span id="740"> 740</span>
<span id="741"> 741</span>
<span id="742"> 742</span>
<span id="743"> 743</span>
<span id="744"> 744</span>
<span id="745"> 745</span>
<span id="746"> 746</span>
<span id="747"> 747</span>
<span id="748"> 748</span>
<span id="749"> 749</span>
<span id="750"> 750</span>
<span id="751"> 751</span>
<span id="752"> 752</span>
<span id="753"> 753</span>
<span id="754"> 754</span>
<span id="755"> 755</span>
<span id="756"> 756</span>
<span id="757"> 757</span>
<span id="758"> 758</span>
<span id="759"> 759</span>
<span id="760"> 760</span>
<span id="761"> 761</span>
<span id="762"> 762</span>
<span id="763"> 763</span>
<span id="764"> 764</span>
<span id="765"> 765</span>
<span id="766"> 766</span>
<span id="767"> 767</span>
<span id="768"> 768</span>
<span id="769"> 769</span>
<span id="770"> 770</span>
<span id="771"> 771</span>
<span id="772"> 772</span>
<span id="773"> 773</span>
<span id="774"> 774</span>
<span id="775"> 775</span>
<span id="776"> 776</span>
<span id="777"> 777</span>
<span id="778"> 778</span>
<span id="779"> 779</span>
<span id="780"> 780</span>
<span id="781"> 781</span>
<span id="782"> 782</span>
<span id="783"> 783</span>
<span id="784"> 784</span>
<span id="785"> 785</span>
<span id="786"> 786</span>
<span id="787"> 787</span>
<span id="788"> 788</span>
<span id="789"> 789</span>
<span id="790"> 790</span>
<span id="791"> 791</span>
<span id="792"> 792</span>
<span id="793"> 793</span>
<span id="794"> 794</span>
<span id="795"> 795</span>
<span id="796"> 796</span>
<span id="797"> 797</span>
<span id="798"> 798</span>
<span id="799"> 799</span>
<span id="800"> 800</span>
<span id="801"> 801</span>
<span id="802"> 802</span>
<span id="803"> 803</span>
<span id="804"> 804</span>
<span id="805"> 805</span>
<span id="806"> 806</span>
<span id="807"> 807</span>
<span id="808"> 808</span>
<span id="809"> 809</span>
<span id="810"> 810</span>
<span id="811"> 811</span>
<span id="812"> 812</span>
<span id="813"> 813</span>
<span id="814"> 814</span>
<span id="815"> 815</span>
<span id="816"> 816</span>
<span id="817"> 817</span>
<span id="818"> 818</span>
<span id="819"> 819</span>
<span id="820"> 820</span>
<span id="821"> 821</span>
<span id="822"> 822</span>
<span id="823"> 823</span>
<span id="824"> 824</span>
<span id="825"> 825</span>
<span id="826"> 826</span>
<span id="827"> 827</span>
<span id="828"> 828</span>
<span id="829"> 829</span>
<span id="830"> 830</span>
<span id="831"> 831</span>
<span id="832"> 832</span>
<span id="833"> 833</span>
<span id="834"> 834</span>
<span id="835"> 835</span>
<span id="836"> 836</span>
<span id="837"> 837</span>
<span id="838"> 838</span>
<span id="839"> 839</span>
<span id="840"> 840</span>
<span id="841"> 841</span>
<span id="842"> 842</span>
<span id="843"> 843</span>
<span id="844"> 844</span>
<span id="845"> 845</span>
<span id="846"> 846</span>
<span id="847"> 847</span>
<span id="848"> 848</span>
<span id="849"> 849</span>
<span id="850"> 850</span>
<span id="851"> 851</span>
<span id="852"> 852</span>
<span id="853"> 853</span>
<span id="854"> 854</span>
<span id="855"> 855</span>
<span id="856"> 856</span>
<span id="857"> 857</span>
<span id="858"> 858</span>
<span id="859"> 859</span>
<span id="860"> 860</span>
<span id="861"> 861</span>
<span id="862"> 862</span>
<span id="863"> 863</span>
<span id="864"> 864</span>
<span id="865"> 865</span>
<span id="866"> 866</span>
<span id="867"> 867</span>
<span id="868"> 868</span>
<span id="869"> 869</span>
<span id="870"> 870</span>
<span id="871"> 871</span>
<span id="872"> 872</span>
<span id="873"> 873</span>
<span id="874"> 874</span>
<span id="875"> 875</span>
<span id="876"> 876</span>
<span id="877"> 877</span>
<span id="878"> 878</span>
<span id="879"> 879</span>
<span id="880"> 880</span>
<span id="881"> 881</span>
<span id="882"> 882</span>
<span id="883"> 883</span>
<span id="884"> 884</span>
<span id="885"> 885</span>
<span id="886"> 886</span>
<span id="887"> 887</span>
<span id="888"> 888</span>
<span id="889"> 889</span>
<span id="890"> 890</span>
<span id="891"> 891</span>
<span id="892"> 892</span>
<span id="893"> 893</span>
<span id="894"> 894</span>
<span id="895"> 895</span>
<span id="896"> 896</span>
<span id="897"> 897</span>
<span id="898"> 898</span>
<span id="899"> 899</span>
<span id="900"> 900</span>
<span id="901"> 901</span>
<span id="902"> 902</span>
<span id="903"> 903</span>
<span id="904"> 904</span>
<span id="905"> 905</span>
<span id="906"> 906</span>
<span id="907"> 907</span>
<span id="908"> 908</span>
<span id="909"> 909</span>
<span id="910"> 910</span>
<span id="911"> 911</span>
<span id="912"> 912</span>
<span id="913"> 913</span>
<span id="914"> 914</span>
<span id="915"> 915</span>
<span id="916"> 916</span>
<span id="917"> 917</span>
<span id="918"> 918</span>
<span id="919"> 919</span>
<span id="920"> 920</span>
<span id="921"> 921</span>
<span id="922"> 922</span>
<span id="923"> 923</span>
<span id="924"> 924</span>
<span id="925"> 925</span>
<span id="926"> 926</span>
<span id="927"> 927</span>
<span id="928"> 928</span>
<span id="929"> 929</span>
<span id="930"> 930</span>
<span id="931"> 931</span>
<span id="932"> 932</span>
<span id="933"> 933</span>
<span id="934"> 934</span>
<span id="935"> 935</span>
<span id="936"> 936</span>
<span id="937"> 937</span>
<span id="938"> 938</span>
<span id="939"> 939</span>
<span id="940"> 940</span>
<span id="941"> 941</span>
<span id="942"> 942</span>
<span id="943"> 943</span>
<span id="944"> 944</span>
<span id="945"> 945</span>
<span id="946"> 946</span>
<span id="947"> 947</span>
<span id="948"> 948</span>
<span id="949"> 949</span>
<span id="950"> 950</span>
<span id="951"> 951</span>
<span id="952"> 952</span>
<span id="953"> 953</span>
<span id="954"> 954</span>
<span id="955"> 955</span>
<span id="956"> 956</span>
<span id="957"> 957</span>
<span id="958"> 958</span>
<span id="959"> 959</span>
<span id="960"> 960</span>
<span id="961"> 961</span>
<span id="962"> 962</span>
<span id="963"> 963</span>
<span id="964"> 964</span>
<span id="965"> 965</span>
<span id="966"> 966</span>
<span id="967"> 967</span>
<span id="968"> 968</span>
<span id="969"> 969</span>
<span id="970"> 970</span>
<span id="971"> 971</span>
<span id="972"> 972</span>
<span id="973"> 973</span>
<span id="974"> 974</span>
<span id="975"> 975</span>
<span id="976"> 976</span>
<span id="977"> 977</span>
<span id="978"> 978</span>
<span id="979"> 979</span>
<span id="980"> 980</span>
<span id="981"> 981</span>
<span id="982"> 982</span>
<span id="983"> 983</span>
<span id="984"> 984</span>
<span id="985"> 985</span>
<span id="986"> 986</span>
<span id="987"> 987</span>
<span id="988"> 988</span>
<span id="989"> 989</span>
<span id="990"> 990</span>
<span id="991"> 991</span>
<span id="992"> 992</span>
<span id="993"> 993</span>
<span id="994"> 994</span>
<span id="995"> 995</span>
<span id="996"> 996</span>
<span id="997"> 997</span>
<span id="998"> 998</span>
<span id="999"> 999</span>
<span id="1000">1000</span>
<span id="1001">1001</span>
<span id="1002">1002</span>
<span id="1003">1003</span>
<span id="1004">1004</span>
<span id="1005">1005</span>
<span id="1006">1006</span>
<span id="1007">1007</span>
<span id="1008">1008</span>
<span id="1009">1009</span>
<span id="1010">1010</span>
<span id="1011">1011</span>
<span id="1012">1012</span>
<span id="1013">1013</span>
<span id="1014">1014</span>
<span id="1015">1015</span>
<span id="1016">1016</span>
<span id="1017">1017</span>
<span id="1018">1018</span>
<span id="1019">1019</span>
<span id="1020">1020</span>
<span id="1021">1021</span>
<span id="1022">1022</span>
<span id="1023">1023</span>
<span id="1024">1024</span>
<span id="1025">1025</span>
<span id="1026">1026</span>
<span id="1027">1027</span>
<span id="1028">1028</span>
<span id="1029">1029</span>
<span id="1030">1030</span>
<span id="1031">1031</span>
<span id="1032">1032</span>
<span id="1033">1033</span>
<span id="1034">1034</span>
<span id="1035">1035</span>
<span id="1036">1036</span>
<span id="1037">1037</span>
<span id="1038">1038</span>
<span id="1039">1039</span>
<span id="1040">1040</span>
<span id="1041">1041</span>
<span id="1042">1042</span>
<span id="1043">1043</span>
<span id="1044">1044</span>
<span id="1045">1045</span>
<span id="1046">1046</span>
<span id="1047">1047</span>
<span id="1048">1048</span>
<span id="1049">1049</span>
<span id="1050">1050</span>
<span id="1051">1051</span>
<span id="1052">1052</span>
<span id="1053">1053</span>
<span id="1054">1054</span>
<span id="1055">1055</span>
<span id="1056">1056</span>
<span id="1057">1057</span>
<span id="1058">1058</span>
<span id="1059">1059</span>
<span id="1060">1060</span>
<span id="1061">1061</span>
<span id="1062">1062</span>
<span id="1063">1063</span>
<span id="1064">1064</span>
<span id="1065">1065</span>
<span id="1066">1066</span>
<span id="1067">1067</span>
<span id="1068">1068</span>
<span id="1069">1069</span>
<span id="1070">1070</span>
<span id="1071">1071</span>
<span id="1072">1072</span>
<span id="1073">1073</span>
<span id="1074">1074</span>
<span id="1075">1075</span>
<span id="1076">1076</span>
<span id="1077">1077</span>
<span id="1078">1078</span>
<span id="1079">1079</span>
<span id="1080">1080</span>
<span id="1081">1081</span>
<span id="1082">1082</span>
<span id="1083">1083</span>
<span id="1084">1084</span>
<span id="1085">1085</span>
<span id="1086">1086</span>
<span id="1087">1087</span>
<span id="1088">1088</span>
<span id="1089">1089</span>
<span id="1090">1090</span>
<span id="1091">1091</span>
<span id="1092">1092</span>
<span id="1093">1093</span>
<span id="1094">1094</span>
<span id="1095">1095</span>
<span id="1096">1096</span>
<span id="1097">1097</span>
<span id="1098">1098</span>
<span id="1099">1099</span>
<span id="1100">1100</span>
<span id="1101">1101</span>
<span id="1102">1102</span>
<span id="1103">1103</span>
<span id="1104">1104</span>
<span id="1105">1105</span>
<span id="1106">1106</span>
<span id="1107">1107</span>
<span id="1108">1108</span>
<span id="1109">1109</span>
<span id="1110">1110</span>
<span id="1111">1111</span>
<span id="1112">1112</span>
<span id="1113">1113</span>
<span id="1114">1114</span>
<span id="1115">1115</span>
<span id="1116">1116</span>
<span id="1117">1117</span>
<span id="1118">1118</span>
<span id="1119">1119</span>
<span id="1120">1120</span>
<span id="1121">1121</span>
<span id="1122">1122</span>
<span id="1123">1123</span>
<span id="1124">1124</span>
<span id="1125">1125</span>
<span id="1126">1126</span>
<span id="1127">1127</span>
<span id="1128">1128</span>
<span id="1129">1129</span>
<span id="1130">1130</span>
<span id="1131">1131</span>
<span id="1132">1132</span>
<span id="1133">1133</span>
<span id="1134">1134</span>
<span id="1135">1135</span>
<span id="1136">1136</span>
<span id="1137">1137</span>
<span id="1138">1138</span>
<span id="1139">1139</span>
<span id="1140">1140</span>
<span id="1141">1141</span>
<span id="1142">1142</span>
<span id="1143">1143</span>
<span id="1144">1144</span>
<span id="1145">1145</span>
<span id="1146">1146</span>
<span id="1147">1147</span>
<span id="1148">1148</span>
<span id="1149">1149</span>
<span id="1150">1150</span>
<span id="1151">1151</span>
<span id="1152">1152</span>
<span id="1153">1153</span>
<span id="1154">1154</span>
<span id="1155">1155</span>
<span id="1156">1156</span>
<span id="1157">1157</span>
<span id="1158">1158</span>
<span id="1159">1159</span>
</pre><pre class="rust ">
<span class="comment">//</span>
<span class="comment">// This file was auto-generated, do not edit directly</span>
<span class="comment">//</span>

<span class="comment">/*
Copyright © 2008-2013 Kristian Høgsberg
    Copyright © 2013      Rafael Antognolli
    Copyright © 2013      Jasper St. Pierre
    Copyright © 2010-2013 Intel Corporation

    Permission is hereby granted, free of charge, to any person obtaining a
    copy of this software and associated documentation files (the &quot;Software&quot;),
    to deal in the Software without restriction, including without limitation
    the rights to use, copy, modify, merge, publish, distribute, sublicense,
    and/or sell copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice (including the next
    paragraph) shall be included in all copies or substantial portions of the
    Software.

    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
    THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
    DEALINGS IN THE SOFTWARE.
*/</span>

<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">xdg_shell</span> {
    <span class="doccomment">//! create desktop-style surfaces</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! xdg_shell allows clients to turn a wl_surface into a &quot;real window&quot;</span>
    <span class="doccomment">//! which can be dragged, resized, stacked, and moved around by the</span>
    <span class="doccomment">//! user. Everything about this interface is suited towards traditional</span>
    <span class="doccomment">//! desktop environments.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">XdgShell</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">XdgShell</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">XdgShell</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">XdgShell</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">XdgShell</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">XdgShell</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">XdgShell</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">XdgShell</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">XdgShell</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">xdg_shell_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;xdg_shell&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">XdgShell</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">XdgShell</span> {
            <span class="ident">XdgShell</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">XdgShell</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">ping</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">serial</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="doccomment">/// latest protocol version</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The &#39;current&#39; member of this enum gives the version of the</span>
    <span class="doccomment">/// protocol.  Implementations can compare this to the version</span>
    <span class="doccomment">/// they implement using static_assert to ensure the protocol and</span>
    <span class="doccomment">/// implementation versions match.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Version</span> {
        <span class="doccomment">/// Always the latest version</span>
        <span class="ident">Current</span> <span class="op">=</span> <span class="number">5</span>,
    }
    <span class="kw">impl</span> <span class="ident">Version</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Version</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">5</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Version</span>::<span class="ident">Current</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> {
        <span class="doccomment">/// given wl_surface has another role</span>
        <span class="ident">Role</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="doccomment">/// xdg_shell was destroyed before children</span>
        <span class="ident">DefunctSurfaces</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// the client tried to map or destroy a non-topmost popup</span>
        <span class="ident">NotTheTopmostPopup</span> <span class="op">=</span> <span class="number">2</span>,
        <span class="doccomment">/// the client specified an invalid popup parent surface</span>
        <span class="ident">InvalidPopupParent</span> <span class="op">=</span> <span class="number">3</span>,
    }
    <span class="kw">impl</span> <span class="ident">Error</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Error</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">Role</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">DefunctSurfaces</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">NotTheTopmostPopup</span>),
                <span class="number">3</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">Error</span>::<span class="ident">InvalidPopupParent</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// check if the client is alive</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The ping event asks the client if it&#39;s still alive. Pass the</span>
        <span class="doccomment">/// serial specified in the event back to the compositor by sending</span>
        <span class="doccomment">/// a &quot;pong&quot; request back with the specified serial.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Compositors can use this to determine if the client is still</span>
        <span class="doccomment">/// alive. It&#39;s unspecified what will happen if the client doesn&#39;t</span>
        <span class="doccomment">/// respond to the ping request, or in what timeframe. Clients should</span>
        <span class="doccomment">/// try to respond in a reasonable amount of time.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A compositor is free to ping in any way it wants, but a client must</span>
        <span class="doccomment">/// always respond to any xdg_shell object it created.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, xdg_shell, serial</span>
        <span class="kw">pub</span> <span class="ident">ping</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">xdg_shell</span>: <span class="kw-2">&amp;</span><span class="ident">XdgShell</span>, <span class="ident">serial</span>: <span class="ident">u32</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">ping</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ping</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">XDG_SHELL_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">XDG_SHELL_USE_UNSTABLE_VERSION</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">XDG_SHELL_GET_XDG_SURFACE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">const</span> <span class="ident">XDG_SHELL_GET_XDG_POPUP</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span>;
    <span class="kw">const</span> <span class="ident">XDG_SHELL_PONG</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span>;
    <span class="kw">impl</span> <span class="ident">XdgShell</span> {
        <span class="doccomment">/// destroy xdg_shell</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Destroy this xdg_shell object.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Destroying a bound xdg_shell object while there are surfaces</span>
        <span class="doccomment">/// still alive created by this xdg_shell object instance is illegal</span>
        <span class="doccomment">/// and will result in a protocol error.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SHELL_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// enable use of this unstable version</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Negotiate the unstable version of the interface.  This</span>
        <span class="doccomment">/// mechanism is in place to ensure client and server agree on the</span>
        <span class="doccomment">/// unstable versions of the protocol that they speak or exit</span>
        <span class="doccomment">/// cleanly if they don&#39;t agree.  This request will go away once</span>
        <span class="doccomment">/// the xdg-shell protocol is stable.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">use_unstable_version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">version</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SHELL_USE_UNSTABLE_VERSION</span>, <span class="ident">version</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// create a shell surface from a surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This creates an xdg_surface for the given surface and gives it the</span>
        <span class="doccomment">/// xdg_surface role. A wl_surface can only be given an xdg_surface role</span>
        <span class="doccomment">/// once. If get_xdg_surface is called with a wl_surface that already has</span>
        <span class="doccomment">/// an active xdg_surface associated with it, or if it had any other role,</span>
        <span class="doccomment">/// an error is raised.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// See the documentation of xdg_surface for more details about what an</span>
        <span class="doccomment">/// xdg_surface is and how it is used.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_xdg_surface</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">xdg_surface</span>::<span class="ident">XdgSurface</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SHELL_GET_XDG_SURFACE</span>, <span class="kw-2">&amp;</span><span class="ident">xdg_surface_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>(), <span class="ident">surface</span>.<span class="ident">ptr</span>()) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
        <span class="doccomment">/// create a popup for a surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This creates an xdg_popup for the given surface and gives it the</span>
        <span class="doccomment">/// xdg_popup role. A wl_surface can only be given an xdg_popup role</span>
        <span class="doccomment">/// once. If get_xdg_popup is called with a wl_surface that already has</span>
        <span class="doccomment">/// an active xdg_popup associated with it, or if it had any other role,</span>
        <span class="doccomment">/// an error is raised.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request must be used in response to some sort of user action</span>
        <span class="doccomment">/// like a button press, key press, or touch down event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// See the documentation of xdg_popup for more details about what an</span>
        <span class="doccomment">/// xdg_popup is and how it is used.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_xdg_popup</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">surface</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">parent</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_surface</span>::<span class="ident">WlSurface</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span><span class="kw">super</span>::<span class="ident">xdg_popup</span>::<span class="ident">XdgPopup</span><span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">ptr</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal_constructor</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SHELL_GET_XDG_POPUP</span>, <span class="kw-2">&amp;</span><span class="ident">xdg_popup_interface</span>, <span class="ident">ptr</span>::<span class="ident">null_mut</span>::<span class="op">&lt;</span><span class="ident">wl_proxy</span><span class="op">&gt;</span>(), <span class="ident">surface</span>.<span class="ident">ptr</span>(), <span class="ident">parent</span>.<span class="ident">ptr</span>(), <span class="ident">seat</span>.<span class="ident">ptr</span>(), <span class="ident">serial</span>, <span class="ident">x</span>, <span class="ident">y</span>) };
            <span class="kw">let</span> <span class="ident">proxy</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Proxy</span>::<span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(<span class="ident">proxy</span>)
        }
        <span class="doccomment">/// respond to a ping event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// A client must respond to a ping event with a pong request or</span>
        <span class="doccomment">/// the client may be deemed unresponsive.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">pong</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">serial</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SHELL_PONG</span>, <span class="ident">serial</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">xdg_surface</span> {
    <span class="doccomment">//! A desktop window</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! An interface that may be implemented by a wl_surface, for</span>
    <span class="doccomment">//! implementations that provide a desktop-style user interface.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! It provides requests to treat surfaces like windows, allowing to set</span>
    <span class="doccomment">//! properties like maximized, fullscreen, minimized, and to move and resize</span>
    <span class="doccomment">//! them, and associate metadata like title and app id.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The client must call wl_surface.commit on the corresponding wl_surface</span>
    <span class="doccomment">//! for the xdg_surface state to take effect. Prior to committing the new</span>
    <span class="doccomment">//! state, it can set up initial configuration, such as maximizing or setting</span>
    <span class="doccomment">//! a window geometry.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Even without attaching a buffer the compositor must respond to initial</span>
    <span class="doccomment">//! committed configuration, for instance sending a configure event with</span>
    <span class="doccomment">//! expected window geometry if the client maximized its surface during</span>
    <span class="doccomment">//! initialization.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! For a surface to be mapped by the compositor the client must have</span>
    <span class="doccomment">//! committed both an xdg_surface state and a buffer.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">XdgSurface</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">XdgSurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">XdgSurface</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">XdgSurface</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">XdgSurface</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">XdgSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">XdgSurface</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">XdgSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">XdgSurface</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">xdg_surface_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;xdg_surface&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">XdgSurface</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">XdgSurface</span> {
            <span class="ident">XdgSurface</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">XdgSurface</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    <span class="kw">let</span> <span class="ident">width</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">0</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">height</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">1</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">i32</span>)};
                    <span class="kw">let</span> <span class="ident">states</span> <span class="op">=</span> {<span class="kw">let</span> <span class="ident">array</span> <span class="op">=</span> <span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">2</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_array</span>); ::<span class="ident">std</span>::<span class="ident">slice</span>::<span class="ident">from_raw_parts</span>((<span class="kw-2">*</span><span class="ident">array</span>).<span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u8</span>, (<span class="kw-2">*</span><span class="ident">array</span>).<span class="ident">size</span> <span class="kw">as</span> <span class="ident">usize</span>).<span class="ident">to_owned</span>()};
                    <span class="kw">let</span> <span class="ident">serial</span> <span class="op">=</span> {<span class="kw-2">*</span>(<span class="ident">args</span>.<span class="ident">offset</span>(<span class="number">3</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">u32</span>)};
                    (<span class="ident">implementation</span>.<span class="ident">configure</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>, <span class="ident">width</span>, <span class="ident">height</span>, <span class="ident">states</span>, <span class="ident">serial</span>);
                },
                <span class="number">1</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">close</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="doccomment">/// edge values for resizing</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// These values are used to indicate which edge of a surface</span>
    <span class="doccomment">/// is being dragged in a resize operation.</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">ResizeEdge</span> {
        <span class="prelude-val">None</span> <span class="op">=</span> <span class="number">0</span>,
        <span class="ident">Top</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="ident">Bottom</span> <span class="op">=</span> <span class="number">2</span>,
        <span class="ident">Left</span> <span class="op">=</span> <span class="number">4</span>,
        <span class="ident">TopLeft</span> <span class="op">=</span> <span class="number">5</span>,
        <span class="ident">BottomLeft</span> <span class="op">=</span> <span class="number">6</span>,
        <span class="ident">Right</span> <span class="op">=</span> <span class="number">8</span>,
        <span class="ident">TopRight</span> <span class="op">=</span> <span class="number">9</span>,
        <span class="ident">BottomRight</span> <span class="op">=</span> <span class="number">10</span>,
    }
    <span class="kw">impl</span> <span class="ident">ResizeEdge</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">ResizeEdge</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="prelude-val">None</span>),
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">Top</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">Bottom</span>),
                <span class="number">4</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">Left</span>),
                <span class="number">5</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">TopLeft</span>),
                <span class="number">6</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">BottomLeft</span>),
                <span class="number">8</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">Right</span>),
                <span class="number">9</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">TopRight</span>),
                <span class="number">10</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">ResizeEdge</span>::<span class="ident">BottomRight</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="doccomment">/// types of state on the surface</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// The different state values used on the surface. This is designed for</span>
    <span class="doccomment">/// state values like maximized, fullscreen. It is paired with the</span>
    <span class="doccomment">/// configure event to ensure that both the client and the compositor</span>
    <span class="doccomment">/// setting the state can be synchronized.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// States set in this way are double-buffered. They will get applied on</span>
    <span class="doccomment">/// the next commit.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// Desktop environments may extend this enum by taking up a range of</span>
    <span class="doccomment">/// values and documenting the range they chose in this description.</span>
    <span class="doccomment">/// They are not required to document the values for the range that they</span>
    <span class="doccomment">/// chose. Ideally, any good extensions from a desktop environment should</span>
    <span class="doccomment">/// make its way into standardization into this enum.</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// The current reserved ranges are:</span>
    <span class="doccomment">/// </span>
    <span class="doccomment">/// 0x0000 - 0x0FFF: xdg-shell core values, documented below.</span>
    <span class="doccomment">/// 0x1000 - 0x1FFF: GNOME</span>
    <span class="doccomment">/// 0x2000 - 0x2FFF: EFL</span>
    <span class="attribute">#[<span class="ident">repr</span>(<span class="ident">u32</span>)]</span>
    <span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Copy</span>,<span class="ident">Clone</span>,<span class="ident">Debug</span>,<span class="ident">PartialEq</span>)]</span>
    <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">State</span> {
        <span class="doccomment">/// the surface is maximized</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The surface is maximized. The window geometry specified in the configure</span>
        <span class="doccomment">/// event must be obeyed by the client.</span>
        <span class="ident">Maximized</span> <span class="op">=</span> <span class="number">1</span>,
        <span class="doccomment">/// the surface is fullscreen</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The surface is fullscreen. The window geometry specified in the configure</span>
        <span class="doccomment">/// event must be obeyed by the client.</span>
        <span class="ident">Fullscreen</span> <span class="op">=</span> <span class="number">2</span>,
        <span class="doccomment">/// the surface is being resized</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The surface is being resized. The window geometry specified in the</span>
        <span class="doccomment">/// configure event is a maximum; the client cannot resize beyond it.</span>
        <span class="doccomment">/// Clients that have aspect ratio or cell sizing configuration can use</span>
        <span class="doccomment">/// a smaller size, however.</span>
        <span class="ident">Resizing</span> <span class="op">=</span> <span class="number">3</span>,
        <span class="doccomment">/// the surface is now activated</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Client window decorations should be painted as if the window is</span>
        <span class="doccomment">/// active. Do not assume this means that the window actually has</span>
        <span class="doccomment">/// keyboard or pointer focus.</span>
        <span class="ident">Activated</span> <span class="op">=</span> <span class="number">4</span>,
    }
    <span class="kw">impl</span> <span class="ident">State</span> {
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span>(<span class="ident">n</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">State</span><span class="op">&gt;</span> {
            <span class="kw">match</span> <span class="ident">n</span> {
                <span class="number">1</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">State</span>::<span class="ident">Maximized</span>),
                <span class="number">2</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">State</span>::<span class="ident">Fullscreen</span>),
                <span class="number">3</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">State</span>::<span class="ident">Resizing</span>),
                <span class="number">4</span> <span class="op">=&gt;</span> <span class="prelude-val">Some</span>(<span class="ident">State</span>::<span class="ident">Activated</span>),
                _ <span class="op">=&gt;</span> <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>
            }
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> {
            <span class="kw-2">*</span><span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span>
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// suggest a surface change</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The configure event asks the client to resize its surface or to</span>
        <span class="doccomment">/// change its state.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The width and height arguments specify a hint to the window</span>
        <span class="doccomment">/// about how its surface should be resized in window geometry</span>
        <span class="doccomment">/// coordinates. See set_window_geometry.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the width or height arguments are zero, it means the client</span>
        <span class="doccomment">/// should decide its own window dimension. This may happen when the</span>
        <span class="doccomment">/// compositor need to configure the state of the surface but doesn&#39;t</span>
        <span class="doccomment">/// have any information about any previous or expected dimension.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The states listed in the event specify how the width/height</span>
        <span class="doccomment">/// arguments should be interpreted, and possibly how it should be</span>
        <span class="doccomment">/// drawn.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Clients should arrange their surface for the new size and</span>
        <span class="doccomment">/// states, and then send a ack_configure request with the serial</span>
        <span class="doccomment">/// sent in this configure event at some point before committing</span>
        <span class="doccomment">/// the new surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the client receives multiple configure events before it</span>
        <span class="doccomment">/// can respond to one, it is free to discard all but the last</span>
        <span class="doccomment">/// event it received.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, xdg_surface, width, height, states, serial</span>
        <span class="kw">pub</span> <span class="ident">configure</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">xdg_surface</span>: <span class="kw-2">&amp;</span><span class="ident">XdgSurface</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>, <span class="ident">states</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u8</span><span class="op">&gt;</span>, <span class="ident">serial</span>: <span class="ident">u32</span>),
        <span class="doccomment">/// surface wants to be closed</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The close event is sent by the compositor when the user</span>
        <span class="doccomment">/// wants the surface to be closed. This should be equivalent to</span>
        <span class="doccomment">/// the user clicking the close button in client-side decorations,</span>
        <span class="doccomment">/// if your application has any...</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This is only a request that the user intends to close your</span>
        <span class="doccomment">/// window. The client may choose to ignore this request, or show</span>
        <span class="doccomment">/// a dialog to ask the user to save their data...</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, xdg_surface</span>
        <span class="kw">pub</span> <span class="ident">close</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">xdg_surface</span>: <span class="kw-2">&amp;</span><span class="ident">XdgSurface</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">configure</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">configure</span> <span class="kw">as</span> <span class="ident">usize</span>)
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">close</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">close</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">XDG_SURFACE_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SET_PARENT</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SET_TITLE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SET_APP_ID</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">3</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SHOW_WINDOW_MENU</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">4</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_MOVE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">5</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_RESIZE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">6</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_ACK_CONFIGURE</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">7</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SET_WINDOW_GEOMETRY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">8</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SET_MAXIMIZED</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">9</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_UNSET_MAXIMIZED</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">10</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SET_FULLSCREEN</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">11</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_UNSET_FULLSCREEN</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">12</span>;
    <span class="kw">const</span> <span class="ident">XDG_SURFACE_SET_MINIMIZED</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">13</span>;
    <span class="kw">impl</span> <span class="ident">XdgSurface</span> {
        <span class="doccomment">/// Destroy the xdg_surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Unmap and destroy the window. The window will be effectively</span>
        <span class="doccomment">/// hidden from the user&#39;s point of view, and all state like</span>
        <span class="doccomment">/// maximization, fullscreen, and so on, will be lost.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set the parent of this surface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Set the &quot;parent&quot; of this surface. This window should be stacked</span>
        <span class="doccomment">/// above a parent. The parent surface must be mapped as long as this</span>
        <span class="doccomment">/// surface is mapped.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Parent windows should be set on dialogs, toolboxes, or other</span>
        <span class="doccomment">/// &quot;auxiliary&quot; surfaces, so that the parent is raised when the dialog</span>
        <span class="doccomment">/// is raised.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_parent</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">parent</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">xdg_surface</span>::<span class="ident">XdgSurface</span><span class="op">&gt;</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SET_PARENT</span>, <span class="ident">parent</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>())) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set surface title</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Set a short title for the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This string may be used to identify the surface in a task bar,</span>
        <span class="doccomment">/// window list, or other user interface elements provided by the</span>
        <span class="doccomment">/// compositor.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The string must be encoded in UTF-8.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_title</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">title</span>: <span class="ident">String</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">title</span> <span class="op">=</span> <span class="ident">CString</span>::<span class="ident">new</span>(<span class="ident">title</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span>_<span class="op">|</span> <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Got a String with interior null in xdg_surface.set_title:title&quot;</span>));
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SET_TITLE</span>, <span class="ident">title</span>.<span class="ident">as_ptr</span>()) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set application ID</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Set an application identifier for the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The app ID identifies the general class of applications to which</span>
        <span class="doccomment">/// the surface belongs. The compositor can use this to group multiple</span>
        <span class="doccomment">/// surfaces together, or to determine how to launch a new application.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For D-Bus activatable applications, the app ID is used as the D-Bus</span>
        <span class="doccomment">/// service name.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The compositor shell will try to group application surfaces together</span>
        <span class="doccomment">/// by their app ID.  As a best practice, it is suggested to select app</span>
        <span class="doccomment">/// ID&#39;s that match the basename of the application&#39;s .desktop file.</span>
        <span class="doccomment">/// For example, &quot;org.freedesktop.FooViewer&quot; where the .desktop file is</span>
        <span class="doccomment">/// &quot;org.freedesktop.FooViewer.desktop&quot;.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// See the desktop-entry specification [0] for more details on</span>
        <span class="doccomment">/// application identifiers and how they relate to well-known D-Bus</span>
        <span class="doccomment">/// names and .desktop files.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// [0] http://standards.freedesktop.org/desktop-entry-spec/</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_app_id</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">app_id</span>: <span class="ident">String</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">let</span> <span class="ident">app_id</span> <span class="op">=</span> <span class="ident">CString</span>::<span class="ident">new</span>(<span class="ident">app_id</span>).<span class="ident">unwrap_or_else</span>(<span class="op">|</span>_<span class="op">|</span> <span class="macro">panic</span><span class="macro">!</span>(<span class="string">&quot;Got a String with interior null in xdg_surface.set_app_id:app_id&quot;</span>));
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SET_APP_ID</span>, <span class="ident">app_id</span>.<span class="ident">as_ptr</span>()) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// show the window menu</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Clients implementing client-side decorations might want to show</span>
        <span class="doccomment">/// a context menu when right-clicking on the decorations, giving the</span>
        <span class="doccomment">/// user a menu that they can use to maximize or minimize the window.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request asks the compositor to pop up such a window menu at</span>
        <span class="doccomment">/// the given position, relative to the local surface coordinates of</span>
        <span class="doccomment">/// the parent surface. There are no guarantees as to what menu items</span>
        <span class="doccomment">/// the window menu contains.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request must be used in response to some sort of user action</span>
        <span class="doccomment">/// like a button press, key press, or touch down event.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">show_window_menu</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SHOW_WINDOW_MENU</span>, <span class="ident">seat</span>.<span class="ident">ptr</span>(), <span class="ident">serial</span>, <span class="ident">x</span>, <span class="ident">y</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// start an interactive move</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Start an interactive, user-driven move of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request must be used in response to some sort of user action</span>
        <span class="doccomment">/// like a button press, key press, or touch down event. The passed</span>
        <span class="doccomment">/// serial is used to determine the type of interactive move (touch,</span>
        <span class="doccomment">/// pointer, etc).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The server may ignore move requests depending on the state of</span>
        <span class="doccomment">/// the surface (e.g. fullscreen or maximized), or if the passed serial</span>
        <span class="doccomment">/// is no longer valid.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If triggered, the surface will lose the focus of the device</span>
        <span class="doccomment">/// (wl_pointer, wl_touch, etc) used for the move. It is up to the</span>
        <span class="doccomment">/// compositor to visually indicate that the move is taking place, such as</span>
        <span class="doccomment">/// updating a pointer cursor, during the move. There is no guarantee</span>
        <span class="doccomment">/// that the device focus will return when the move is completed.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">_move</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>, <span class="ident">serial</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_MOVE</span>, <span class="ident">seat</span>.<span class="ident">ptr</span>(), <span class="ident">serial</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// start an interactive resize</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Start a user-driven, interactive resize of the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// This request must be used in response to some sort of user action</span>
        <span class="doccomment">/// like a button press, key press, or touch down event. The passed</span>
        <span class="doccomment">/// serial is used to determine the type of interactive resize (touch,</span>
        <span class="doccomment">/// pointer, etc).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The server may ignore resize requests depending on the state of</span>
        <span class="doccomment">/// the surface (e.g. fullscreen or maximized).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If triggered, the client will receive configure events with the</span>
        <span class="doccomment">/// &quot;resize&quot; state enum value and the expected sizes. See the &quot;resize&quot;</span>
        <span class="doccomment">/// enum value for more details about what is required. The client</span>
        <span class="doccomment">/// must also acknowledge configure events using &quot;ack_configure&quot;. After</span>
        <span class="doccomment">/// the resize is completed, the client will receive another &quot;configure&quot;</span>
        <span class="doccomment">/// event without the resize state.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If triggered, the surface also will lose the focus of the device</span>
        <span class="doccomment">/// (wl_pointer, wl_touch, etc) used for the resize. It is up to the</span>
        <span class="doccomment">/// compositor to visually indicate that the resize is taking place,</span>
        <span class="doccomment">/// such as updating a pointer cursor, during the resize. There is no</span>
        <span class="doccomment">/// guarantee that the device focus will return when the resize is</span>
        <span class="doccomment">/// completed.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The edges parameter specifies how the surface should be resized,</span>
        <span class="doccomment">/// and is one of the values of the resize_edge enum. The compositor</span>
        <span class="doccomment">/// may use this information to update the surface position for</span>
        <span class="doccomment">/// example when dragging the top left corner. The compositor may also</span>
        <span class="doccomment">/// use this information to adapt its behavior, e.g. choose an</span>
        <span class="doccomment">/// appropriate cursor image.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">resize</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">seat</span>: <span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_seat</span>::<span class="ident">WlSeat</span>, <span class="ident">serial</span>: <span class="ident">u32</span>, <span class="ident">edges</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_RESIZE</span>, <span class="ident">seat</span>.<span class="ident">ptr</span>(), <span class="ident">serial</span>, <span class="ident">edges</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// ack a configure event</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// When a configure event is received, if a client commits the</span>
        <span class="doccomment">/// surface in response to the configure event, then the client</span>
        <span class="doccomment">/// must make an ack_configure request sometime before the commit</span>
        <span class="doccomment">/// request, passing along the serial of the configure event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// For instance, the compositor might use this information to move</span>
        <span class="doccomment">/// a surface to the top left only when the client has drawn itself</span>
        <span class="doccomment">/// for the maximized or fullscreen state.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the client receives multiple configure events before it</span>
        <span class="doccomment">/// can respond to one, it only has to ack the last configure event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// A client is not required to commit immediately after sending</span>
        <span class="doccomment">/// an ack_configure request - it may even ack_configure several times</span>
        <span class="doccomment">/// before its next surface commit.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The compositor expects that the most recently received</span>
        <span class="doccomment">/// ack_configure request at the time of a commit indicates which</span>
        <span class="doccomment">/// configure event the client is responding to.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">ack_configure</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">serial</span>: <span class="ident">u32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_ACK_CONFIGURE</span>, <span class="ident">serial</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set the new window geometry</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The window geometry of a window is its &quot;visible bounds&quot; from the</span>
        <span class="doccomment">/// user&#39;s perspective. Client-side decorations often have invisible</span>
        <span class="doccomment">/// portions like drop-shadows which should be ignored for the</span>
        <span class="doccomment">/// purposes of aligning, placing and constraining windows.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The window geometry is double buffered, and will be applied at the</span>
        <span class="doccomment">/// time wl_surface.commit of the corresponding wl_surface is called.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// Once the window geometry of the surface is set once, it is not</span>
        <span class="doccomment">/// possible to unset it, and it will remain the same until</span>
        <span class="doccomment">/// set_window_geometry is called again, even if a new subsurface or</span>
        <span class="doccomment">/// buffer is attached.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If never set, the value is the full bounds of the surface,</span>
        <span class="doccomment">/// including any subsurfaces. This updates dynamically on every</span>
        <span class="doccomment">/// commit. This unset mode is meant for extremely simple clients.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If responding to a configure event, the window geometry in here</span>
        <span class="doccomment">/// must respect the sizing negotiations specified by the states in</span>
        <span class="doccomment">/// the configure event.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The arguments are given in the surface local coordinate space of</span>
        <span class="doccomment">/// the wl_surface associated with this xdg_surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// The width and height must be greater than zero.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_window_geometry</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">x</span>: <span class="ident">i32</span>, <span class="ident">y</span>: <span class="ident">i32</span>, <span class="ident">width</span>: <span class="ident">i32</span>, <span class="ident">height</span>: <span class="ident">i32</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SET_WINDOW_GEOMETRY</span>, <span class="ident">x</span>, <span class="ident">y</span>, <span class="ident">width</span>, <span class="ident">height</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// maximize the window</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Maximize the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// After requesting that the surface should be maximized, the compositor</span>
        <span class="doccomment">/// will respond by emitting a configure event with the &quot;maximized&quot; state</span>
        <span class="doccomment">/// and the required window geometry. The client should then update its</span>
        <span class="doccomment">/// content, drawing it in a maximized state, i.e. without shadow or other</span>
        <span class="doccomment">/// decoration outside of the window geometry. The client must also</span>
        <span class="doccomment">/// acknowledge the configure when committing the new content (see</span>
        <span class="doccomment">/// ack_configure).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// It is up to the compositor to decide how and where to maximize the</span>
        <span class="doccomment">/// surface, for example which output and what region of the screen should</span>
        <span class="doccomment">/// be used.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the surface was already maximized, the compositor will still emit</span>
        <span class="doccomment">/// a configure event with the &quot;maximized&quot; state.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_maximized</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SET_MAXIMIZED</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// unmaximize the window</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Unmaximize the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// After requesting that the surface should be unmaximized, the compositor</span>
        <span class="doccomment">/// will respond by emitting a configure event without the &quot;maximized&quot;</span>
        <span class="doccomment">/// state. If available, the compositor will include the window geometry</span>
        <span class="doccomment">/// dimensions the window had prior to being maximized in the configure</span>
        <span class="doccomment">/// request. The client must then update its content, drawing it in a</span>
        <span class="doccomment">/// regular state, i.e. potentially with shadow, etc. The client must also</span>
        <span class="doccomment">/// acknowledge the configure when committing the new content (see</span>
        <span class="doccomment">/// ack_configure).</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// It is up to the compositor to position the surface after it was</span>
        <span class="doccomment">/// unmaximized; usually the position the surface had before maximizing, if</span>
        <span class="doccomment">/// applicable.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the surface was already not maximized, the compositor will still</span>
        <span class="doccomment">/// emit a configure event without the &quot;maximized&quot; state.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">unset_maximized</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_UNSET_MAXIMIZED</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set the window as fullscreen on a monitor</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Make the surface fullscreen.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// You can specify an output that you would prefer to be fullscreen.</span>
        <span class="doccomment">/// If this value is NULL, it&#39;s up to the compositor to choose which</span>
        <span class="doccomment">/// display will be used to map this surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If the surface doesn&#39;t cover the whole output, the compositor will</span>
        <span class="doccomment">/// position the surface in the center of the output and compensate with</span>
        <span class="doccomment">/// black borders filling the rest of the output.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_fullscreen</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">output</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="kw-2">&amp;</span><span class="kw">super</span>::<span class="ident">wl_output</span>::<span class="ident">WlOutput</span><span class="op">&gt;</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SET_FULLSCREEN</span>, <span class="ident">output</span>.<span class="ident">map</span>(<span class="ident">Proxy</span>::<span class="ident">ptr</span>).<span class="ident">unwrap_or</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>())) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">unset_fullscreen</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_UNSET_FULLSCREEN</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
        <span class="doccomment">/// set the window as minimized</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// Request that the compositor minimize your surface. There is no</span>
        <span class="doccomment">/// way to know if the surface is currently minimized, nor is there</span>
        <span class="doccomment">/// any way to unset minimization on this surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If you are looking to throttle redrawing when minimized, please</span>
        <span class="doccomment">/// instead use the wl_surface.frame event for this, as this will</span>
        <span class="doccomment">/// also work with live previews on windows in Alt-Tab, Expose or</span>
        <span class="doccomment">/// similar compositor features.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_minimized</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_SURFACE_SET_MINIMIZED</span>) };
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
<span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">xdg_popup</span> {
    <span class="doccomment">//! short-lived, popup surfaces for menus</span>
    <span class="doccomment">//!</span>
    <span class="doccomment">//! A popup surface is a short-lived, temporary surface that can be</span>
    <span class="doccomment">//! used to implement menus. It takes an explicit grab on the surface</span>
    <span class="doccomment">//! that will be dismissed when the user dismisses the popup. This can</span>
    <span class="doccomment">//! be done by the user clicking outside the surface, using the keyboard,</span>
    <span class="doccomment">//! or even locking the screen through closing the lid or a timeout.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! When the popup is dismissed, a popup_done event will be sent out,</span>
    <span class="doccomment">//! and at the same time the surface will be unmapped. The xdg_popup</span>
    <span class="doccomment">//! object is now inert and cannot be reactivated, so clients should</span>
    <span class="doccomment">//! destroy it. Explicitly destroying the xdg_popup object will also</span>
    <span class="doccomment">//! dismiss the popup and unmap the surface.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Clients will receive events for all their surfaces during this</span>
    <span class="doccomment">//! grab (which is an &quot;owner-events&quot; grab in X11 parlance). This is</span>
    <span class="doccomment">//! done so that users can navigate through submenus and other</span>
    <span class="doccomment">//! &quot;nested&quot; popup windows without having to dismiss the topmost</span>
    <span class="doccomment">//! popup.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Clients that want to dismiss the popup when another surface of</span>
    <span class="doccomment">//! their own is clicked should dismiss the popup using the destroy</span>
    <span class="doccomment">//! request.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The parent surface must have either an xdg_surface or xdg_popup</span>
    <span class="doccomment">//! role.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! Specifying an xdg_popup for the parent means that the popups are</span>
    <span class="doccomment">//! nested, with this popup now being the topmost popup. Nested</span>
    <span class="doccomment">//! popups must be destroyed in the reverse order they were created</span>
    <span class="doccomment">//! in, e.g. the only popup you are allowed to destroy at all times</span>
    <span class="doccomment">//! is the topmost one.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! If there is an existing popup when creating a new popup, the</span>
    <span class="doccomment">//! parent must be the current topmost popup.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! A parent surface must be mapped before the new popup is mapped.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! When compositors choose to dismiss a popup, they will likely</span>
    <span class="doccomment">//! dismiss every nested popup as well. When a compositor dismisses</span>
    <span class="doccomment">//! popups, it will follow the same dismissing order as required</span>
    <span class="doccomment">//! from the client.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The x and y arguments passed when creating the popup object specify</span>
    <span class="doccomment">//! where the top left of the popup should be placed, relative to the</span>
    <span class="doccomment">//! local surface coordinates of the parent surface. See</span>
    <span class="doccomment">//! xdg_shell.get_xdg_popup.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! The client must call wl_surface.commit on the corresponding wl_surface</span>
    <span class="doccomment">//! for the xdg_popup state to take effect.</span>
    <span class="doccomment">//! </span>
    <span class="doccomment">//! For a surface to be mapped by the compositor the client must have</span>
    <span class="doccomment">//! committed both the xdg_popup state and a buffer.</span>
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">EventQueueHandle</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">Proxy</span>;
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">RequestResult</span>;

    <span class="kw">use</span> <span class="kw">super</span>::{<span class="ident">Liveness</span>, <span class="ident">Implementable</span>};
    <span class="kw">use</span> <span class="kw">super</span>::<span class="ident">interfaces</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">common</span>::<span class="kw-2">*</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">any</span>::<span class="ident">Any</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ffi</span>::{<span class="ident">CString</span>,<span class="ident">CStr</span>};
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">os</span>::<span class="ident">raw</span>::<span class="ident">c_void</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">ptr</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">Arc</span>;
    <span class="kw">use</span> <span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::{<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span>, <span class="ident">Ordering</span>};
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">RUST_MANAGED</span>;
    <span class="kw">use</span> <span class="ident">wayland_sys</span>::<span class="ident">client</span>::<span class="kw-2">*</span>;
    <span class="kw">type</span> <span class="ident">UserData</span> <span class="op">=</span> (<span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Box</span><span class="op">&lt;</span><span class="ident">Any</span><span class="op">&gt;&gt;</span>, <span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;</span>);

    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">XdgPopup</span> {
        <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>,
        <span class="ident">data</span>: <span class="prelude-ty">Option</span><span class="op">&lt;</span><span class="ident">Arc</span><span class="op">&lt;</span>(<span class="ident">AtomicBool</span>, <span class="ident">AtomicPtr</span><span class="op">&lt;</span>()<span class="op">&gt;</span>)<span class="op">&gt;&gt;</span>
    }

    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Send</span> <span class="kw">for</span> <span class="ident">XdgPopup</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Sync</span> <span class="kw">for</span> <span class="ident">XdgPopup</span> {}
    <span class="kw">unsafe</span> <span class="kw">impl</span> <span class="ident">Proxy</span> <span class="kw">for</span> <span class="ident">XdgPopup</span> {
        <span class="kw">fn</span> <span class="ident">ptr</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span> { <span class="self">self</span>.<span class="ident">ptr</span> }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_new</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">XdgPopup</span> {
            <span class="kw">let</span> <span class="ident">data</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span> <span class="op">=</span> <span class="ident">Box</span>::<span class="ident">into_raw</span>(<span class="ident">Box</span>::<span class="ident">new</span>((
                <span class="ident">ptr</span>::<span class="ident">null_mut</span>(),
                <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span>,
                <span class="ident">Arc</span>::<span class="ident">new</span>((<span class="ident">AtomicBool</span>::<span class="ident">new</span>(<span class="bool-val">true</span>), <span class="ident">AtomicPtr</span>::<span class="ident">new</span>(<span class="ident">ptr</span>::<span class="ident">null_mut</span>()))),
            )));
            <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_set_user_data</span>, <span class="ident">ptr</span>, <span class="ident">data</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">c_void</span>);
            <span class="ident">XdgPopup</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
        }
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_ptr_initialized</span>(<span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">wl_proxy</span>) <span class="op">-&gt;</span> <span class="ident">XdgPopup</span> {

            <span class="kw">let</span> <span class="ident">implem</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_listener</span>, <span class="ident">ptr</span>);
            <span class="kw">let</span> <span class="ident">rust_managed</span> <span class="op">=</span> <span class="ident">implem</span> <span class="op">==</span> <span class="kw-2">&amp;</span><span class="ident">RUST_MANAGED</span> <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _ <span class="kw">as</span> <span class="kw-2">*</span><span class="kw">const</span> _;

            <span class="kw">if</span> <span class="ident">rust_managed</span> {
                <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="ident">ptr</span>) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>;
                <span class="ident">XdgPopup</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-val">Some</span>((<span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">data</span>).<span class="number">2</span>.<span class="ident">clone</span>()) }
            } <span class="kw">else</span> {
                <span class="ident">XdgPopup</span> { <span class="ident">ptr</span>: <span class="ident">ptr</span>, <span class="ident">data</span>: <span class="prelude-ty">Option</span>::<span class="prelude-val">None</span> }
            }
        }

        <span class="kw">fn</span> <span class="ident">interface_ptr</span>() <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="ident">xdg_popup_interface</span> } }
        <span class="kw">fn</span> <span class="ident">interface_name</span>() <span class="op">-&gt;</span> <span class="kw-2">&amp;</span><span class="lifetime">&#39;static</span> <span class="ident">str</span> { <span class="string">&quot;xdg_popup&quot;</span>  }
        <span class="kw">fn</span> <span class="ident">supported_version</span>() <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="number">1</span> }
        <span class="kw">fn</span> <span class="ident">version</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">u32</span> { <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_version</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) } }

        <span class="kw">fn</span> <span class="ident">status</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Liveness</span> {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="kw">if</span> <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>) {
                    <span class="ident">Liveness</span>::<span class="ident">Alive</span>
                } <span class="kw">else</span> {
                    <span class="ident">Liveness</span>::<span class="ident">Dead</span>
                }
            } <span class="kw">else</span> {
                <span class="ident">Liveness</span>::<span class="ident">Unmanaged</span>
            }
        }

        <span class="kw">fn</span> <span class="ident">equals</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">XdgPopup</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="self">self</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="ident">other</span>.<span class="ident">status</span>() <span class="op">!=</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> <span class="op">&amp;&amp;</span> <span class="self">self</span>.<span class="ident">ptr</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">ptr</span>
        }

        <span class="kw">fn</span> <span class="ident">set_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">ptr</span>: <span class="kw-2">*</span><span class="kw-2">mut</span> ()) {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">store</span>(<span class="ident">ptr</span>, <span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
        }
        <span class="kw">fn</span> <span class="ident">get_user_data</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="kw-2">*</span><span class="kw-2">mut</span> () {
            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">load</span>(<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>)
            } <span class="kw">else</span> {
                ::<span class="ident">std</span>::<span class="ident">ptr</span>::<span class="ident">null_mut</span>()
            }
        }

        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">clone_unchecked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">XdgPopup</span> {
            <span class="ident">XdgPopup</span> {
                <span class="ident">ptr</span>: <span class="self">self</span>.<span class="ident">ptr</span>,
                <span class="ident">data</span>: <span class="self">self</span>.<span class="ident">data</span>.<span class="ident">clone</span>()
            }
        }
    }
    <span class="kw">unsafe</span> <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span>: <span class="lifetime">&#39;static</span><span class="op">&gt;</span> <span class="ident">Implementable</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">XdgPopup</span> {
        <span class="kw">type</span> <span class="ident">Implementation</span> <span class="op">=</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>;
        <span class="attribute">#[<span class="ident">allow</span>(<span class="ident">unused_mut</span>,<span class="ident">unused_assignments</span>)]</span>
        <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">__dispatch_msg</span>(<span class="kw-2">&amp;</span><span class="self">self</span>,  <span class="ident">opcode</span>: <span class="ident">u32</span>, <span class="ident">args</span>: <span class="kw-2">*</span><span class="kw">const</span> <span class="ident">wl_argument</span>) <span class="op">-&gt;</span> <span class="prelude-ty">Result</span><span class="op">&lt;</span>(),()<span class="op">&gt;</span> {

        <span class="kw">let</span> <span class="ident">data</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>);
        <span class="kw">let</span> <span class="ident">evq</span> <span class="op">=</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="ident">data</span>.<span class="number">0</span>);
        <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">kill</span> <span class="op">=</span> <span class="bool-val">false</span>;
        {
            <span class="kw">let</span> <span class="kw-2">&amp;</span><span class="kw-2">mut</span> (<span class="kw-2">ref</span> <span class="ident">implementation</span>, <span class="kw-2">ref</span> <span class="kw-2">mut</span> <span class="ident">idata</span>) <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">as_mut</span>().<span class="ident">unwrap</span>().<span class="ident">downcast_mut</span>::<span class="op">&lt;</span>(<span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>, <span class="ident">ID</span>)<span class="op">&gt;</span>().<span class="ident">unwrap</span>();
            <span class="kw">match</span> <span class="ident">opcode</span> {
                <span class="number">0</span> <span class="op">=&gt;</span> {
                    (<span class="ident">implementation</span>.<span class="ident">popup_done</span>)(<span class="ident">evq</span>, <span class="ident">idata</span>,  <span class="self">self</span>);
                },
                _ <span class="op">=&gt;</span> <span class="kw">return</span> <span class="prelude-val">Err</span>(())
            }
        }

        <span class="kw">if</span> <span class="ident">kill</span> {
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">data</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
        }
            <span class="prelude-val">Ok</span>(())
        }
    }
    <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="doccomment">/// popup interaction is done</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// The popup_done event is sent out when a popup is dismissed by the</span>
        <span class="doccomment">/// compositor. The client should destroy the xdg_popup object at this</span>
        <span class="doccomment">/// point.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// **Arguments:** event_queue_handle, interface_data, xdg_popup</span>
        <span class="kw">pub</span> <span class="ident">popup_done</span>: <span class="kw">fn</span>(<span class="ident">evqh</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">EventQueueHandle</span>, <span class="ident">data</span>: <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">ID</span>,  <span class="ident">xdg_popup</span>: <span class="kw-2">&amp;</span><span class="ident">XdgPopup</span>),
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Copy</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {}
    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">Clone</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">clone</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
            <span class="kw-2">*</span><span class="self">self</span>
        }
    }

    <span class="kw">impl</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> <span class="ident">PartialEq</span> <span class="kw">for</span> <span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span> {
        <span class="kw">fn</span> <span class="ident">eq</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">other</span>: <span class="kw-2">&amp;</span><span class="ident">Implementation</span><span class="op">&lt;</span><span class="ident">ID</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="ident">bool</span> {
            <span class="bool-val">true</span>
            <span class="op">&amp;&amp;</span> (<span class="self">self</span>.<span class="ident">popup_done</span> <span class="kw">as</span> <span class="ident">usize</span> <span class="op">==</span> <span class="ident">other</span>.<span class="ident">popup_done</span> <span class="kw">as</span> <span class="ident">usize</span>)

        }
    }

    <span class="kw">const</span> <span class="ident">XDG_POPUP_DESTROY</span>: <span class="ident">u32</span> <span class="op">=</span> <span class="number">0</span>;
    <span class="kw">impl</span> <span class="ident">XdgPopup</span> {
        <span class="doccomment">/// remove xdg_popup interface</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This destroys the popup. Explicitly destroying the xdg_popup</span>
        <span class="doccomment">/// object will also dismiss the popup, and unmap the surface.</span>
        <span class="doccomment">/// </span>
        <span class="doccomment">/// If this xdg_popup is not the &quot;topmost&quot; popup, a protocol error</span>
        <span class="doccomment">/// will be sent.</span>
        <span class="doccomment">///</span>
        <span class="doccomment">/// This is a destructor, you cannot send requests to this object once this method is called.</span>
        <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) <span class="op">-&gt;</span><span class="ident">RequestResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
            <span class="kw">if</span> <span class="self">self</span>.<span class="ident">status</span>() <span class="op">==</span> <span class="ident">Liveness</span>::<span class="ident">Dead</span> { <span class="kw">return</span> <span class="ident">RequestResult</span>::<span class="ident">Destroyed</span> }
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_marshal</span>, <span class="self">self</span>.<span class="ident">ptr</span>(), <span class="ident">XDG_POPUP_DESTROY</span>) };

            <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="kw-2">ref</span> <span class="ident">data</span>) <span class="op">=</span> <span class="self">self</span>.<span class="ident">data</span> {
                <span class="ident">data</span>.<span class="number">0</span>.<span class="ident">store</span>(<span class="bool-val">false</span>, ::<span class="ident">std</span>::<span class="ident">sync</span>::<span class="ident">atomic</span>::<span class="ident">Ordering</span>::<span class="ident">SeqCst</span>);
            }
            <span class="kw">let</span> <span class="ident">udata</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="kw-2">*</span>(<span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_get_user_data</span>, <span class="self">self</span>.<span class="ident">ptr</span>()) <span class="kw">as</span> <span class="kw-2">*</span><span class="kw-2">mut</span> <span class="ident">UserData</span>) };
            <span class="kw">let</span> <span class="ident">_impl</span> <span class="op">=</span> <span class="ident">udata</span>.<span class="number">1</span>.<span class="ident">take</span>();
            ::<span class="ident">std</span>::<span class="ident">mem</span>::<span class="ident">drop</span>(<span class="ident">_impl</span>);
            <span class="kw">unsafe</span> { <span class="macro">ffi_dispatch</span><span class="macro">!</span>(<span class="ident">WAYLAND_CLIENT_HANDLE</span>, <span class="ident">wl_proxy_destroy</span>, <span class="self">self</span>.<span class="ident">ptr</span>()); }
            <span class="ident">RequestResult</span>::<span class="ident">Sent</span>(())
        }
    }
}
</pre>
</section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../../../../../../../../../../";
        window.currentCrate = "wayland_protocols";
    </script>
    <script src="../../../../../../../../../../../../main.js"></script>
    <script defer src="../../../../../../../../../../../../search-index.js"></script>
</body>
</html>