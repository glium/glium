<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `EventQueue` struct in crate `wayland_client`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, EventQueue">

    <title>wayland_client::EventQueue - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct EventQueue</p><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.dispatch">dispatch</a><a href="#method.dispatch_pending">dispatch_pending</a><a href="#method.sync_roundtrip">sync_roundtrip</a><a href="#method.prepare_read">prepare_read</a></div><a class="sidebar-title" href="#deref-methods">Methods from Deref&lt;Target=EventQueueHandle&gt;</a><div class="sidebar-links"></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Deref">Deref</a><a href="#impl-DerefMut">DerefMut</a></div></div><p class='location'><a href='index.html'>wayland_client</a></p><script>window.sidebarCurrent = {name: 'EventQueue', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>wayland_client</a>::<wbr><a class="struct" href=''>EventQueue</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/wayland_client/event_queue.rs.html#125-128' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct EventQueue { /* fields omitted */ }</pre><div class='docblock'><p>An event queue managing wayland events</p>

<p>Each wayland object can receive events from the server. To handle these events
you must associate to these objects an implementation: a struct defined in their
respective module, in which you provide a set of functions that will handle each event.</p>

<p>Your implementation can also access a shared state managed by the event queue. See
the <code>State</code> struct and the <code>state()</code> method on <code>EventQueueHandle</code>. If you need this,
the way to do it is:</p>

<ul>
<li>insert your state value in the event queue state store, your are then provided with a
token to access it</li>
<li>provide this token (you can clone it) as implementation data to any wayland object
that need to access this state in its event callbacks.</li>
</ul>

<p>The event queues also provides you control on the flow of the program, via the <code>dispatch()</code> and
<code>dispatch_pending()</code> methods.</p>
</div>
                    <h2 id='methods' class='small-section-header'>
                      Methods<a href='#methods' class='anchor'></a>
                    </h2>
                <h3 id='impl' class='impl'><span class='in-band'><code>impl <a class="struct" href="../wayland_client/struct.EventQueue.html" title="struct wayland_client::EventQueue">EventQueue</a></code><a href='#impl' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#130-260' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.dispatch' class="method"><span id='dispatch.v' class='invisible'><code>pub fn <a href='#method.dispatch' class='fnname'>dispatch</a>(&amp;mut self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">IoResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#141-158' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Dispatches events from the internal buffer.</p>

<p>Dispatches all events to their appropriate handlers.
If not events were in the internal buffer, will block until
some events are read and dispatch them.
This process can insert events in the internal buffers of
other event queues.</p>

<p>If an error is returned, your connection with the wayland
compositor is probably lost.</p>
</div><h4 id='method.dispatch_pending' class="method"><span id='dispatch_pending.v' class='invisible'><code>pub fn <a href='#method.dispatch_pending' class='fnname'>dispatch_pending</a>(&amp;mut self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">IoResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u32.html">u32</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#168-191' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Dispatches pending events from the internal buffer.</p>

<p>Dispatches all events to their appropriate handlers.
Never blocks, if not events were pending, simply returns
<code>Ok(0)</code>.</p>

<p>If an error is returned, your connection with the wayland
compositor is probably lost.</p>
</div><h4 id='method.sync_roundtrip' class="method"><span id='sync_roundtrip.v' class='invisible'><code>pub fn <a href='#method.sync_roundtrip' class='fnname'>sync_roundtrip</a>(&amp;mut self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">IoResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i32.html">i32</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#202-219' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Synchronous roundtrip</p>

<p>This call will cause a synchonous roundtrip with the wayland server. It will block until all
pending requests of this queue are sent to the server and it has processed all of them and
send the appropriate events.</p>

<p>Handlers are called as a consequence.</p>

<p>On success returns the number of dispatched events.</p>
</div><h4 id='method.prepare_read' class="method"><span id='prepare_read.v' class='invisible'><code>pub fn <a href='#method.prepare_read' class='fnname'>prepare_read</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../wayland_client/struct.ReadEventsGuard.html" title="struct wayland_client::ReadEventsGuard">ReadEventsGuard</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#240-259' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Prepare an conccurent read</p>

<p>Will declare your intention to read events from the server socket.</p>

<p>Will return <code>None</code> if there are still some events awaiting dispatch on this EventIterator.
In this case, you need to call <code>dispatch_pending()</code> before calling this method again.</p>

<p>As long as the returned guard is in scope, no events can be dispatched to any event iterator.</p>

<p>The guard can then be destroyed by two means:</p>

<ul>
<li>Calling its <code>cancel()</code> method (or letting it go out of scope): the read intention will
be cancelled</li>
<li>Calling its <code>read_events()</code> method: will block until all existing guards are destroyed
by one of these methods, then events will be read and all blocked <code>read_events()</code> calls
will return.</li>
</ul>

<p>This call will otherwise not block on the server socket if it is empty, and return
an io error <code>WouldBlock</code> in such cases.</p>
</div></div>
                    <h2 id='deref-methods' class='small-section-header'>
                      Methods from <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&lt;Target = <a class="struct" href="../wayland_client/struct.EventQueueHandle.html" title="struct wayland_client::EventQueueHandle">EventQueueHandle</a>&gt;<a href='#deref-methods' class='anchor'></a>
                    </h2>
                <div class='impl-items'><h4 id='method.register' class="method"><span id='register.v' class='invisible'><code>pub fn <a href='#method.register' class='fnname'>register</a>&lt;P, ID&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;proxy: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>P, <br>&nbsp;&nbsp;&nbsp;&nbsp;implementation: P::<a class="type" href="../wayland_client/trait.Implementable.html#associatedtype.Implementation" title="type wayland_client::Implementable::Implementation">Implementation</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;idata: ID<br>) -&gt; <a class="enum" href="../wayland_client/enum.RegisterStatus.html" title="enum wayland_client::RegisterStatus">RegisterStatus</a> <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;P: <a class="trait" href="../wayland_client/trait.Proxy.html" title="trait wayland_client::Proxy">Proxy</a> + <a class="trait" href="../wayland_client/trait.Implementable.html" title="trait wayland_client::Implementable">Implementable</a>&lt;ID&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;ID: 'static,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#56-96' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Register a proxy to this event queue.</p>

<p>You are required to provide a valid implementation for this proxy
as well as some associated implementation data. This implementation
is expected to be a struct holding the various relevant
function pointers.</p>

<p>This implementation data can typically contain indexes to state value
that the implementation will need to work on.</p>

<p>This overwrites any precedently set implementation for this proxy.</p>

<p>Returns appropriately and does nothing if this proxy is dead or already managed by
something else than this library.</p>
</div><h4 id='method.state' class="method"><span id='state.v' class='invisible'><code>pub fn <a href='#method.state' class='fnname'>state</a>(&amp;mut self) -&gt; &amp;mut <a class="struct" href="../wayland_client/struct.State.html" title="struct wayland_client::State">State</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#103-105' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Get a handle to the internal state</p>

<p>The returned guard object allows you to get references
to the handler objects you previously inserted in this
event queue.</p>
</div></div>
            <h2 id='implementations' class='small-section-header'>
              Trait Implementations<a href='#implementations' class='anchor'></a>
            </h2>
        <h3 id='impl-Deref' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a> for <a class="struct" href="../wayland_client/struct.EventQueue.html" title="struct wayland_client::EventQueue">EventQueue</a></code><a href='#impl-Deref' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#262-267' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='associatedtype.Target' class="type"><span id='Target.t' class='invisible'><code>type <a href='https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html#associatedtype.Target' class="type">Target</a> = <a class="struct" href="../wayland_client/struct.EventQueueHandle.html" title="struct wayland_client::EventQueueHandle">EventQueueHandle</a></code></span></h4>
<div class='docblock'><p>The resulting type after dereferencing.</p>
</div><h4 id='method.deref' class="method"><span id='deref.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html#tymethod.deref' class='fnname'>deref</a>(&amp;self) -&gt; &amp;<a class="struct" href="../wayland_client/struct.EventQueueHandle.html" title="struct wayland_client::EventQueueHandle">EventQueueHandle</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#264-266' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Dereferences the value.</p>
</div></div><h3 id='impl-DerefMut' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.DerefMut.html" title="trait core::ops::deref::DerefMut">DerefMut</a> for <a class="struct" href="../wayland_client/struct.EventQueue.html" title="struct wayland_client::EventQueue">EventQueue</a></code><a href='#impl-DerefMut' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#269-273' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.deref_mut' class="method"><span id='deref_mut.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/ops/deref/trait.DerefMut.html#tymethod.deref_mut' class='fnname'>deref_mut</a>(&amp;mut self) -&gt; &amp;mut <a class="struct" href="../wayland_client/struct.EventQueueHandle.html" title="struct wayland_client::EventQueueHandle">EventQueueHandle</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/wayland_client/event_queue.rs.html#270-272' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Mutably dereferences the value.</p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "wayland_client";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>